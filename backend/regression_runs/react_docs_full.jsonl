{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:001:what_is_react", "timestamp": "2025-12-29T23:03:01.901224Z", "domain": "react_docs", "mode": "docs", "query": "What is React and what is it used for?", "case": {"id": "what_is_react", "tags": ["intro"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React is a JavaScript library for building user interfaces, particularly for single-page applications where you need a fast, interactive user experience. It allows developers to create reusable UI components that manage their own state, which can then be composed to build complex user interfaces.\n\nReact is primarily used for:\n\n1. **Building User Interfaces**: It helps in creating dynamic and responsive user interfaces for web applications.\n2. **Component-Based Architecture**: React promotes the development of applications using components, which can be reused and managed independently.\n3. **State Management**: React provides a way to manage the state of components, allowing for interactive and dynamic applications.\n4. **Virtual DOM**: React uses a virtual DOM to optimize rendering and improve performance by minimizing direct manipulation of the actual DOM.\n\nOverall, React is widely used for developing modern web applications due to its efficiency, flexibility, and the ability to create complex UIs with ease.", "latency_ms": 5682, "tokens_in": 146, "tokens_out": 184, "cost_estimate_usd": 0.0001323, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React is a JavaScript library for building user interfaces, particularly for single-page applications where you can create reusable components. It allows developers to create components that manage their own state, making it easier to build interactive UIs. React is designed to efficiently update and render the right components when your data changes, which helps in creating dynamic web applications [1063].\n\nReact can be used in various ways; it can be integrated into existing HTML pages to add interactivity or used to build entire applications from scratch. Many React-based frameworks enhance this by automatically generating HTML from React components, allowing for content to be displayed before the JavaScript code fully loads [2273]. Overall, React provides a flexible approach to building web applications, enabling developers to use as much or as little of it as needed [157].", "latency_ms": 5390, "tokens_in": 1433, "tokens_out": 159, "cost_estimate_usd": 0.00031035, "retrieved_chunks": [{"chunk_id": 4527, "source": "domains/react_docs/data/versions.md", "text_preview": "uild React?](https://legacy.reactjs.org/blog/2013/06/05/why-react.html)\n\nReact was open sourced at Facebook Seattle in 2013:\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/XxVg_s8xAms?si=466vSJrnXTn05j9A\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>", "score": 0.6900179386138916}, {"chunk_id": 2273, "source": "domains/react_docs/data/learn/your-first-component.md", "text_preview": "e of them are only used once.\n\n[React-based frameworks](/learn/creating-a-react-app) take this a step further. Instead of using an empty HTML file and letting React \"take over\" managing the page with JavaScript, they *also* generate the HTML automatically from your React components. This allows your app to show some content before the JavaScript code loads.\n\nStill, many websites only use React to [add interactivity to existing HTML pages.](/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page) They have many root components instead of a single one for the entire page. You can use as much\u2014or as little\u2014React as you need.\n\n</DeepDive>\n\n<Recap>\n\nYou've just gotten your first taste of React! Let's recap some key points.\n\n* React lets you create components, **reusa", "score": 0.6507374048233032}, {"chunk_id": 150, "source": "domains/react_docs/data/community/videos.md", "text_preview": "emplates and building views with JavaScript, \u201cre-rendering\u201d your entire application when your data changes, and a lightweight implementation of the DOM and events - (2013 - 0h30m).\n<YouTubeIframe title=\"Pete Hunt: React: Rethinking Best Practices - JSConf EU 2013\" src=\"https://www.youtube-nocookie.com/embed/x7cQ3mrcKaY\" />\n\n### Introduction to React {/*introduction-to-react*/}\n\nTom Occhino and Jordan Walke introduce React at Facebook Seattle - (2013 - 1h20m).\n<YouTubeIframe title=\"Tom Occhino and Jordan Walke introduce React at Facebook Seattle\" src=\"https://www.youtube-nocookie.com/embed/XxVg_s8xAms\" />", "score": 0.6263694763183594}, {"chunk_id": 4523, "source": "domains/react_docs/data/versions.md", "text_preview": "1/react-v0.10.html)\n- [React v0.10 RC](https://legacy.reactjs.org/blog/2014/03/19/react-v0.10-rc1.html)\n- [React v0.9](https://legacy.reactjs.org/blog/2014/02/20/react-v0.9.html)\n- [React v0.9 RC](https://legacy.reactjs.org/blog/2014/02/16/react-v0.9-rc1.html)\n- [React Chrome Developer Tools](https://legacy.reactjs.org/blog/2014/01/02/react-chrome-developer-tools.html)\n- [React v0.8](https://legacy.reactjs.org/blog/2013/12/19/react-v0.8.0.html)\n- [React v0.5.2, v0.4.2](https://legacy.reactjs.org/blog/2013/12/18/react-v0.5.2-v0.4.2.html)\n- [React v0.5.1](https://legacy.reactjs.org/blog/2013/10/29/react-v0-5-1.html)\n- [React v0.5](https://legacy.reactjs.org/blog/2013/10/16/react-v0.5.0.html)\n- [React v0.4.1](https://legacy.reactjs.org/blog/2013/07/26/react-v0-4-1.html)\n- [React v0.4.0](https", "score": 0.592535138130188}, {"chunk_id": 157, "source": "domains/react_docs/data/learn/add-react-to-an-existing-project.md", "text_preview": "e-app/` are handled by your React app.\n\nThis ensures the React part of your app can [benefit from the best practices](/learn/build-a-react-app-from-scratch#consider-using-a-framework) baked into those frameworks.\n\nMany React-based frameworks are full-stack and let your React app take advantage of the server. However, you can use the same approach even if you can't or don't want to run JavaScript on the server. In that case, serve the HTML/CSS/JS export ([`next export` output](https://nextjs.org/docs/advanced-features/static-html-export) for Next.js, default for Gatsby) at `/some-app/` instead.\n\n## Using React for a part of your existing page {/*using-react-for-a-part-of-your-existing-page*/}\n\nLet's say you have an existing page built with another technology (either a server one like Rails,", "score": 0.5786842107772827}, {"chunk_id": 1063, "source": "domains/react_docs/data/learn/reacting-to-input-with-state.md", "text_preview": "e something).\n\nReact was built to solve this problem.\n\nIn React, you don't directly manipulate the UI--meaning you don't enable, disable, show, or hide components directly. Instead, you **declare what you want to show,** and React figures out how to update the UI. Think of getting into a taxi and telling the driver where you want to go instead of telling them exactly where to turn. It's the driver's job to get you there, and they might even know some shortcuts you haven't considered!\n\n<Illustration src=\"/images/docs/illustrations/i_declarative-ui-programming.png\" alt=\"In a car driven by React, a passenger asks to be taken to a specific place on the map. React figures out how to do that.\" />\n\n## Thinking about UI declaratively {/*thinking-about-ui-declaratively*/}\n\nYou've seen how to implem", "score": 0.5779737830162048}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:002:jsx_basics", "timestamp": "2025-12-29T23:03:06.936771Z", "domain": "react_docs", "mode": "docs", "query": "What is JSX in React? Show a tiny example.", "case": {"id": "jsx_basics", "tags": ["jsx"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "JSX, or JavaScript XML, is a syntax extension for JavaScript that is commonly used with React to describe what the UI should look like. JSX allows you to write HTML-like code within JavaScript, making it easier to create and visualize the structure of your components.\n\nHere is a tiny example of JSX in a React component:\n\n```jsx\nfunction MyComponent() {\n  return <h1>Hello, world!</h1>;\n}\n```\n\nIn this example, `MyComponent` is a React functional component that returns a JSX element, which is an `<h1>` tag containing the text \"Hello, world!\". JSX is then transformed into JavaScript function calls by tools like Babel before being rendered to the DOM.", "latency_ms": 5028, "tokens_in": 147, "tokens_out": 145, "cost_estimate_usd": 0.00010905, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "JSX is a syntax extension for JavaScript that allows you to write HTML-like markup inside a JavaScript file. It is often used in React to represent the UI components. JSX looks similar to HTML but is stricter and can display dynamic information.\n\nHere is a tiny example of JSX:\n\n```js\nexport default function Greeting() {\n  return <h1>Hello, World!</h1>;\n}\n```\n\nIn this example, the `Greeting` component returns a simple JSX element that renders \"Hello, World!\" as an `<h1>` heading [2158].", "latency_ms": 3877, "tokens_in": 1570, "tokens_out": 114, "cost_estimate_usd": 0.00030389999999999996, "retrieved_chunks": [{"chunk_id": 2158, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "t like HTML, but it is a bit stricter and can display dynamic information. The best way to understand this is to convert some HTML markup to JSX markup.\n\n<Note>\n\nJSX and React are two separate things. They're often used together, but you *can* [use them independently](https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#whats-a-jsx-transform) of each other. JSX is a syntax extension, while React is a JavaScript library.\n\n</Note>\n\n## Converting HTML to JSX {/*converting-html-to-jsx*/}\n\nSuppose that you have some (perfectly valid) HTML:\n\n```html\n<h1>Hedy Lamarr's Todos</h1>\n<img \n  src=\"https://i.imgur.com/yXOvdOSs.jpg\" \n  alt=\"Hedy Lamarr\" \n  class=\"photo\"\n>\n<ul>\n    <li>Invent new traffic lights\n    <li>Rehearse a movie scene\n    <li>Improve the spectrum technology\n</", "score": 0.7017402648925781}, {"chunk_id": 357, "source": "domains/react_docs/data/learn/describing-the-ui.md", "text_preview": "ction that may contain some markup that React renders into the browser. React components use a syntax extension called JSX to represent that markup. JSX looks a lot like HTML, but it is a bit stricter and can display dynamic information.\n\nIf we paste existing HTML markup into a React component, it won't always work:\n\n<Sandpack>\n\n```js\nexport default function TodoList() {\n  return (\n    // This doesn't quite work!\n    <h1>Hedy Lamarr's Todos</h1>\n    <img\n      src=\"https://i.imgur.com/yXOvdOSs.jpg\"\n      alt=\"Hedy Lamarr\"\n      class=\"photo\"\n    >\n    <ul>\n      <li>Invent new traffic lights\n      <li>Rehearse a movie scene\n      <li>Improve spectrum technology\n    </ul>\n  );\n}\n```\n\n```css\nimg { height: 90px; }\n```\n\n</Sandpack>\n\nIf you have existing HTML like this, you can fix it using a [", "score": 0.6645169258117676}, {"chunk_id": 2154, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "---\ntitle: Writing Markup with JSX\n---\n\n<Intro>\n\n*JSX* is a syntax extension for JavaScript that lets you write HTML-like markup inside a JavaScript file. Although there are other ways to write components, most React developers prefer the conciseness of JSX, and most codebases use it.\n\n</Intro>\n\n<YouWillLearn>\n\n* Why React mixes markup with rendering logic\n* How JSX is different from HTML\n* How to display information with JSX\n\n</YouWillLearn>\n\n## JSX: Putting markup into JavaScript {/*jsx-putting-markup-into-javascript*/}\n\nThe Web has been built on HTML, CSS, and JavaScript. For many years, web developers kept content in HTML, design in CSS, and logic in JavaScript\u2014often in separate files! Content was marked up inside HTML while the page's logic lived separately in JavaScript:\n\n<DiagramGro", "score": 0.6643173098564148}, {"chunk_id": 2166, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "</h1>\n      <img \n        src=\"https://i.imgur.com/yXOvdOSs.jpg\" \n        alt=\"Hedy Lamarr\" \n        className=\"photo\" \n      />\n      <ul>\n        <li>Invent new traffic lights</li>\n        <li>Rehearse a movie scene</li>\n        <li>Improve the spectrum technology</li>\n      </ul>\n    </>\n  );\n}\n```\n\n```css\nimg { height: 90px }\n```\n\n</Sandpack>\n\n<Recap>\n\nNow you know why JSX exists and how to use it in components:\n\n* React components group rendering logic together with markup because they are related.\n* JSX is similar to HTML, with a few differences. You can use a [converter](https://transform.tools/html-to-jsx) if you need to.\n* Error messages will often point you in the right direction to fixing your markup.\n\n</Recap>\n\n\n\n<Challenges>\n\n#### Convert some HTML to JSX {/*convert-some-html-", "score": 0.652184247970581}, {"chunk_id": 2160, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "```css\nimg { height: 90px }\n```\n\n</Sandpack>\n\nThis is because JSX is stricter and has a few more rules than HTML! If you read the error messages above, they'll guide you to fix the markup, or you can follow the guide below.\n\n<Note>\n\nMost of the time, React's on-screen error messages will help you find where the problem is. Give them a read if you get stuck!\n\n</Note>\n\n## The Rules of JSX {/*the-rules-of-jsx*/}\n\n### 1. Return a single root element {/*1-return-a-single-root-element*/}\n\nTo return multiple elements from a component, **wrap them with a single parent tag.**\n\nFor example, you can use a `<div>`:\n\n```js {1,11}\n<div>\n  <h1>Hedy Lamarr's Todos</h1>\n  <img \n    src=\"https://i.imgur.com/yXOvdOSs.jpg\" \n    alt=\"Hedy Lamarr\" \n    class=\"photo\"\n  >\n  <ul>\n    ...\n  </ul>\n</div>\n```\n\n\nIf", "score": 0.6283491253852844}, {"chunk_id": 359, "source": "domains/react_docs/data/learn/describing-the-ui.md", "text_preview": "g Markup with JSX](/learn/writing-markup-with-jsx)** to learn how to write valid JSX.\n\n</LearnMore>\n\n## JavaScript in JSX with curly braces {/*javascript-in-jsx-with-curly-braces*/}\n\nJSX lets you write HTML-like markup inside a JavaScript file, keeping rendering logic and content in the same place. Sometimes you will want to add a little JavaScript logic or reference a dynamic property inside that markup. In this situation, you can use curly braces in your JSX to \"open a window\" to JavaScript:\n\n<Sandpack>\n\n```js\nconst person = {\n  name: 'Gregorio Y. Zara',\n  theme: {\n    backgroundColor: 'black',\n    color: 'pink'\n  }\n};\n\nexport default function TodoList() {\n  return (\n    <div style={person.theme}>\n      <h1>{person.name}'s Todos</h1>\n      <img\n        className=\"avatar\"\n        src=\"htt", "score": 0.624117374420166}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:003:props_vs_state", "timestamp": "2025-12-29T23:03:14.250768Z", "domain": "react_docs", "mode": "docs", "query": "In React, what's the difference between props and state?", "case": {"id": "props_vs_state", "tags": ["state", "props"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, the difference between props and state is as follows:\n\n- **Props (short for properties)**: Props are used to pass data from one component to another, typically from a parent component to a child component. They are read-only and cannot be modified by the child component that receives them. Props allow components to be dynamic and reusable by providing them with different data.\n\n- **State**: State is a built-in object that is used to manage the local data of a component. Unlike props, state is mutable, meaning it can be changed within the component. State is used to track information that can change over time, such as user input, form data, or any other data that affects the rendering of the component.\n\nIn summary, props are used for passing data down the component tree, while state is used for managing data that can change within a component.", "latency_ms": 4785, "tokens_in": 147, "tokens_out": 174, "cost_estimate_usd": 0.00012645, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, props and state serve different purposes. \n\n**Props** are like arguments passed to a function, allowing a parent component to pass data to a child component and customize its appearance. For example, a `Form` can pass a `color` prop to a `Button` [1831]. Props are immutable, meaning they cannot be changed directly by the component that receives them. If a component needs to change its props, it must request new props from its parent component [872].\n\n**State**, on the other hand, is like a component\u2019s memory. It allows a component to keep track of information and change it in response to interactions. For instance, a `Button` might maintain an `isHovered` state [1831]. State is private to the component that declares it, meaning the parent component cannot change it directly [1671]. State variables are declared using the `useState` Hook, and they can be updated using the setter function provided by this Hook [4465].\n\nIn summary, props are used to pass data down from parent to child components and are immutable, while state is used to manage a component's internal data and can be changed by the component itself.", "latency_ms": 7305, "tokens_in": 1406, "tokens_out": 240, "cost_estimate_usd": 0.0003549, "retrieved_chunks": [{"chunk_id": 1831, "source": "domains/react_docs/data/learn/thinking-in-react.md", "text_preview": "state. The two are very different:\n\n* [**Props** are like arguments you pass](/learn/passing-props-to-a-component) to a function. They let a parent component pass data to a child component and customize its appearance. For example, a `Form` can pass a `color` prop to a `Button`.\n* [**State** is like a component\u2019s memory.](/learn/state-a-components-memory) It lets a component keep track of some information and change it in response to interactions. For example, a `Button` might keep track of `isHovered` state.\n\nProps and state are different, but they work together. A parent component will often keep some information in state (so that it can change it), and *pass it down* to child components as their props. It's okay if the difference still feels fuzzy on the first read. It takes a bit of pr", "score": 0.7900022268295288}, {"chunk_id": 872, "source": "domains/react_docs/data/learn/passing-props-to-a-component.md", "text_preview": "a at any point in time, rather than only in the beginning.\n\nHowever, props are [immutable](https://en.wikipedia.org/wiki/Immutable_object)\u2014a term from computer science meaning \"unchangeable\". When a component needs to change its props (for example, in response to a user interaction or new data), it will have to \"ask\" its parent component to pass it _different props_\u2014a new object! Its old props will then be cast aside, and eventually the JavaScript engine will reclaim the memory taken by them.\n\n**Don't try to \"change props\".** When you need to respond to the user input (like changing the selected color), you will need to \"set state\", which you can learn about in [State: A Component's Memory.](/learn/state-a-components-memory)\n\n<Recap>\n\n* To pass props, add them to the JSX, just like you wou", "score": 0.6860049366950989}, {"chunk_id": 2623, "source": "domains/react_docs/data/reference/react/Component.md", "text_preview": "tml#what-about-memoization)\n- If you want to **\"reset\" some state when a prop changes,** consider either making a component [fully controlled](https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component) or [fully uncontrolled with a key](https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key) instead.\n\n</Pitfall>\n\n#### Parameters {/*static-getderivedstatefromprops-parameters*/}\n\n- `props`: The next props that the component is about to render with.\n- `state`: The next state that the component is about to render with.\n\n#### Returns {/*static-getderivedstatefromprops-returns*/}\n\n`static getDerivedStateFromProps` return an object to update the", "score": 0.6846489310264587}, {"chunk_id": 1671, "source": "domains/react_docs/data/learn/state-a-components-memory.md", "text_preview": "it has any. Unlike props, **state is fully private to the component declaring it.** The parent component can't change it. This lets you add state to any component or remove it without impacting the rest of the components.\n\nWhat if you wanted both galleries to keep their states in sync? The right way to do it in React is to *remove* state from child components and add it to their closest shared parent. The next few pages will focus on organizing state of a single component, but we will return to this topic in [Sharing State Between Components.](/learn/sharing-state-between-components)\n\n<Recap>\n\n* Use a state variable when a component needs to \"remember\" some information between renders.\n* State variables are declared by calling the `useState` Hook.\n* Hooks are special functions that start", "score": 0.6798574924468994}, {"chunk_id": 4466, "source": "domains/react_docs/data/reference/rules/components-and-hooks-must-be-pure.md", "text_preview": "s, or use the setter function provided to you to tell React that state needs to update the next time the component is rendered.\n\n### Don't mutate Props {/*props*/}\nProps are immutable because if you mutate them, the application will produce inconsistent output, which can be hard to debug as it may or may not work depending on the circumstances.\n\n```js {expectedErrors: {'react-compiler': [2]}} {2}\nfunction Post({ item }) {\n  item.url = new Url(item.url, base); // \ud83d\udd34 Bad: never mutate props directly\n  return <Link url={item.url}>{item.title}</Link>;\n}\n```\n\n```js {2}\nfunction Post({ item }) {\n  const url = new Url(item.url, base); // \u2705 Good: make a copy instead\n  return <Link url={url}>{item.title}</Link>;\n}\n```\n\n### Don't mutate State {/*state*/}\n`useState` returns the state variable and a se", "score": 0.6534291505813599}, {"chunk_id": 4465, "source": "domains/react_docs/data/reference/rules/components-and-hooks-must-be-pure.md", "text_preview": "g of other components, React doesn\u2019t care if it\u2019s 100% pure in the strict functional programming sense of the word. It is more important that [components must be idempotent](/reference/rules/components-and-hooks-must-be-pure).\n\n---\n\n## Props and state are immutable {/*props-and-state-are-immutable*/}\n\nA component's props and state are immutable [snapshots](learn/state-as-a-snapshot). Never mutate them directly. Instead, pass new props down, and use the setter function from `useState`.\n\nYou can think of the props and state values as snapshots that are updated after rendering. For this reason, you don't modify the props or state variables directly: instead you pass new props, or use the setter function provided to you to tell React that state needs to update the next time the component is re", "score": 0.6503161191940308}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 0.85, "penalty_total": 0.15, "rule_breakdown": [{"rule": "overconfident_language_check", "penalty": 0.15, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "note": "Overconfident language detected."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "notes": "Overconfident language detected."}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "prompt", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:004:use_state", "timestamp": "2025-12-29T23:03:22.472787Z", "domain": "react_docs", "mode": "docs", "query": "How do I use useState to manage state in a function component?", "case": {"id": "use_state", "tags": ["hooks", "state"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To use `useState` to manage state in a function component, you can follow these steps:\n\n1. **Import `useState`**: First, you need to import the `useState` hook from React.\n\n2. **Initialize State**: Call `useState` inside your function component to declare a state variable and a function to update that state. You can pass the initial state as an argument to `useState`.\n\n3. **Update State**: Use the state update function to change the state when needed, typically in response to events like user interactions.\n\nHere is a simple example:\n\n```javascript\nimport React, { useState } from 'react';\n\nfunction MyComponent() {\n  // Declare a state variable called \"count\" and a function to update it\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  );\n}\n\nexport default MyComponent;\n```\n\nIn this example:\n- `count` is the state variable that holds the current count.\n- `setCount` is the function used to update the `count`.\n- The initial state is set to `0`.\n- When the button is clicked, `setCount` is called to increment the count.\n\nThis is how you can manage state in a function component using `useState`.", "latency_ms": 7245, "tokens_in": 150, "tokens_out": 304, "cost_estimate_usd": 0.00020490000000000002, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To use `useState` to manage state in a function component, you need to call the `useState` Hook at the top level of your component. This Hook allows you to declare a state variable and provides a way to update it. The syntax for using `useState` is as follows:\n\n```js\nconst [state, setState] = useState(initialState);\n```\n\nHere, `initialState` is the value you want the state variable to start with. The `useState` function returns an array containing two items: the current state and a function to update that state. You typically use array destructuring to assign these values to variables, following the convention of naming them like `[something, setSomething]` [3466].\n\nFor example, you might declare state variables like this:\n\n```js\nimport { useState } from 'react';\n\nfunction MyComponent() {\n  const [age, setAge] = useState(28);\n  const [name, setName] = useState('Taylor');\n  // ...\n}\n```\n\nTo update the state, you call the setter function (e.g., `setAge` or `setName`) with the new value you want to set. For instance:\n\n```js\nfunction handleClick() {\n  setName('Robin');\n}\n```\n\nThis will update the `name` state variable to 'Robin' when `handleClick` is invoked [3457][3501].", "latency_ms": 8192, "tokens_in": 1495, "tokens_out": 293, "cost_estimate_usd": 0.00040005, "retrieved_chunks": [{"chunk_id": 3457, "source": "domains/react_docs/data/reference/react/useState.md", "text_preview": "---\ntitle: useState\n---\n\n<Intro>\n\n`useState` is a React Hook that lets you add a [state variable](/learn/state-a-components-memory) to your component.\n\n```js\nconst [state, setState] = useState(initialState)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useState(initialState)` {/*usestate*/}\n\nCall `useState` at the top level of your component to declare a [state variable.](/learn/state-a-components-memory)\n\n```js\nimport { useState } from 'react';\n\nfunction MyComponent() {\n  const [age, setAge] = useState(28);\n  const [name, setName] = useState('Taylor');\n  const [todos, setTodos] = useState(() => createTodos());\n  // ...\n```\n\nThe convention is to name state variables like `[something, setSomething]` using [array destructuring.](https://javascript.info/destructuring-a", "score": 0.6623032689094543}, {"chunk_id": 3466, "source": "domains/react_docs/data/reference/react/useState.md", "text_preview": "'react';\n\nfunction MyComponent() {\n  const [age, setAge] = useState(42);\n  const [name, setName] = useState('Taylor');\n  // ...\n```\n\nThe convention is to name state variables like `[something, setSomething]` using [array destructuring.](https://javascript.info/destructuring-assignment)\n\n`useState` returns an array with exactly two items:\n\n1. The <CodeStep step={1}>current state</CodeStep> of this state variable, initially set to the <CodeStep step={3}>initial state</CodeStep> you provided.\n2. The <CodeStep step={2}>`set` function</CodeStep> that lets you change it to any other value in response to interaction.\n\nTo update what\u2019s on the screen, call the `set` function with some next state:\n\n```js [[2, 2, \"setName\"]]\nfunction handleClick() {\n  setName('Robin');\n}\n```\n\nReact will store the nex", "score": 0.6262112855911255}, {"chunk_id": 3501, "source": "domains/react_docs/data/reference/react/useState.md", "text_preview": "te altogether.](/learn/choosing-the-state-structure#avoid-redundant-state)** If you're worried about recomputing too often, the [`useMemo` Hook](/reference/react/useMemo) can help.\n* If you want to reset the entire component tree's state, [pass a different `key` to your component.](#resetting-state-with-a-key)\n* If you can, update all the relevant state in the event handlers.\n\nIn the rare case that none of these apply, there is a pattern you can use to update state based on the values that have been rendered so far, by calling a `set` function while your component is rendering.\n\nHere's an example. This `CountLabel` component displays the `count` prop passed to it:\n\n```js src/CountLabel.js\nexport default function CountLabel({ count }) {\n  return <h1>{count}</h1>\n}\n```\n\nSay you want to show", "score": 0.6103507280349731}, {"chunk_id": 1647, "source": "domains/react_docs/data/learn/state-a-components-memory.md", "text_preview": "you the next state pair and increments the index. You can read more about this mechanism in [React Hooks: Not Magic, Just Arrays.](https://medium.com/@ryardley/react-hooks-not-magic-just-arrays-cd4f1857236e)\n\nThis example **doesn't use React** but it gives you an idea of how `useState` works internally:\n\n<Sandpack>\n\n```js src/index.js active\nlet componentHooks = [];\nlet currentHookIndex = 0;\n\n// How useState works inside React (simplified).\nfunction useState(initialState) {\n  let pair = componentHooks[currentHookIndex];\n  if (pair) {\n    // This is not the first render,\n    // so the state pair already exists.\n    // Return it and prepare for next Hook call.\n    currentHookIndex++;\n    return pair;\n  }\n\n  // This is the first time we're rendering,\n  // so create a state pair and store it.", "score": 0.5986853837966919}, {"chunk_id": 172, "source": "domains/react_docs/data/learn/adding-interactivity.md", "text_preview": "of component-specific memory is called *state.*\n\nYou can add state to a component with a [`useState`](/reference/react/useState) Hook. *Hooks* are special functions that let your components use React features (state is one of those features). The `useState` Hook lets you declare a state variable. It takes the initial state and returns a pair of values: the current state, and a state setter function that lets you update it.\n\n```js\nconst [index, setIndex] = useState(0);\nconst [showMore, setShowMore] = useState(false);\n```\n\nHere is how an image gallery uses and updates state on click:\n\n<Sandpack>\n\n```js\nimport { useState } from 'react';\nimport { sculptureList } from './data.js';\n\nexport default function Gallery() {\n  const [index, setIndex] = useState(0);\n  const [showMore, setShowMore] = us", "score": 0.595206081867218}, {"chunk_id": 1074, "source": "domains/react_docs/data/learn/reacting-to-input-with-state.md", "text_preview": "th-usestate*/}\n\nNext you'll need to represent the visual states of your component in memory with [`useState`.](/reference/react/useState) Simplicity is key: each piece of state is a \"moving piece\", and **you want as few \"moving pieces\" as possible.** More complexity leads to more bugs!\n\nStart with the state that *absolutely must* be there. For example, you'll need to store the `answer` for the input, and the `error` (if it exists) to store the last error:\n\n```js\nconst [answer, setAnswer] = useState('');\nconst [error, setError] = useState(null);\n```\n\nThen, you'll need a state variable representing which one of the visual states that you want to display. There's usually more than a single way to represent that in memory, so you'll need to experiment with it.\n\nIf you struggle to think of the", "score": 0.5922253727912903}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:005:use_effect", "timestamp": "2025-12-29T23:03:29.520255Z", "domain": "react_docs", "mode": "docs", "query": "When should I use useEffect and how does the dependency array work?", "case": {"id": "use_effect", "tags": ["hooks", "effects"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "According to the official React documentation, you should use the `useEffect` hook to perform side effects in your functional components. Side effects can include data fetching, subscriptions, or manually changing the DOM. The `useEffect` hook runs after the render is committed to the screen, allowing you to synchronize your component with external systems.\n\nThe dependency array is a second argument you can pass to `useEffect`. It determines when the effect should run:\n\n1. **No dependency array**: If you do not provide a dependency array, the effect runs after every render of the component.\n\n2. **Empty dependency array (`[]`)**: If you provide an empty array, the effect runs only once after the initial render, similar to `componentDidMount` in class components.\n\n3. **With dependencies**: If you provide an array with dependencies (e.g., `[prop1, state1]`), the effect will run after the initial render and whenever any of the specified dependencies change.\n\nThis behavior allows you to optimize performance and control when your effects are executed based on the state or props of your component. \n\nFor more detailed information, you can refer to the official React documentation on the `useEffect` hook.", "latency_ms": 6726, "tokens_in": 150, "tokens_out": 245, "cost_estimate_usd": 0.0001695, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "You should use `useEffect` when you want to synchronize a component with an external system, such as fetching data, subscribing to events, or manually changing the DOM. The `useEffect` hook allows you to perform side effects in function components [3135].\n\nThe dependency array in `useEffect` specifies which values the effect depends on. If any of the values in the array change between renders, React will re-run the effect. For example, if you include a prop or state variable in the dependency array, the effect will re-synchronize whenever that value changes [635]. \n\nThere are different behaviors based on the contents of the dependency array:\n- If you omit the dependency array, the effect runs after every render.\n- If you provide an empty array `[]`, the effect runs only once when the component mounts.\n- If you include specific dependencies, the effect runs on mount and also whenever any of those dependencies change [1749]. \n\nThis mechanism helps ensure that your effects are executed at the right times, preventing unnecessary operations and optimizing performance [1753].", "latency_ms": 7021, "tokens_in": 1507, "tokens_out": 215, "cost_estimate_usd": 0.00035505, "retrieved_chunks": [{"chunk_id": 1749, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "\" that dependency.](/learn/lifecycle-of-reactive-effects#what-to-do-when-you-dont-want-to-re-synchronize)\n\n<Pitfall>\n\nThe behaviors without the dependency array and with an *empty* `[]` dependency array are different:\n\n```js {3,7,11}\nuseEffect(() => {\n  // This runs after every render\n});\n\nuseEffect(() => {\n  // This runs only on mount (when the component appears)\n}, []);\n\nuseEffect(() => {\n  // This runs on mount *and also* if either a or b have changed since the last render\n}, [a, b]);\n```\n\nWe'll take a close look at what \"mount\" means in the next step.\n\n</Pitfall>\n\n<DeepDive>\n\n#### Why was the ref omitted from the dependency array? {/*why-was-the-ref-omitted-from-the-dependency-array*/}\n\nThis Effect uses _both_ `ref` and `isPlaying`, but only `isPlaying` is declared as a dependency:\n\n``", "score": 0.6265438795089722}, {"chunk_id": 3135, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "---\ntitle: useEffect\n---\n\n<Intro>\n\n`useEffect` is a React Hook that lets you [synchronize a component with an external system.](/learn/synchronizing-with-effects)\n\n```js\nuseEffect(setup, dependencies?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useEffect(setup, dependencies?)` {/*useeffect*/}\n\nCall `useEffect` at the top level of your component to declare an Effect:\n\n```js\nimport { useState, useEffect } from 'react';\nimport { createConnection } from './chat.js';\n\nfunction ChatRoom({ roomId }) {\n  const [serverUrl, setServerUrl] = useState('https://localhost:1234');\n\n  useEffect(() => {\n    const connection = createConnection(serverUrl, roomId);\n    connection.connect();\n    return () => {\n      connection.disconnect();\n    };\n  }, [serverUrl, roomId]);\n  // ...\n}", "score": 0.6116893291473389}, {"chunk_id": 2312, "source": "domains/react_docs/data/reference/eslint-plugin-react-hooks/lints/exhaustive-deps.md", "text_preview": "nent with external systems. The dependency array tells React which values the effect uses, so React knows when to re-synchronize.\n\nIf you find yourself fighting with the linter, you likely need to restructure your code. See [Removing Effect Dependencies](/learn/removing-effect-dependencies) to learn how.\n\n### Invalid {/*invalid*/}\n\nExamples of incorrect code for this rule:\n\n```js\n// \u274c Missing dependency\nuseEffect(() => {\n  console.log(count);\n}, []); // Missing 'count'\n\n// \u274c Missing prop\nuseEffect(() => {\n  fetchUser(userId);\n}, []); // Missing 'userId'\n\n// \u274c Incomplete dependencies\nuseMemo(() => {\n  return items.sort(sortOrder);\n}, [items]); // Missing 'sortOrder'\n```\n\n### Valid {/*valid*/}\n\nExamples of correct code for this rule:\n\n```js\n// \u2705 All dependencies included\nuseEffect(() => {", "score": 0.6020320653915405}, {"chunk_id": 635, "source": "domains/react_docs/data/learn/lifecycle-of-reactive-effects.md", "text_preview": "t();\n    };\n  }, [roomId]); // So you tell React that this Effect \"depends on\" roomId\n  // ...\n```\n\nHere's how this works:\n\n1. You knew `roomId` is a prop, which means it can change over time.\n2. You knew that your Effect reads `roomId` (so its logic depends on a value that may change later).\n3. This is why you specified it as your Effect's dependency (so that it re-synchronizes when `roomId` changes).\n\nEvery time after your component re-renders, React will look at the array of dependencies that you have passed. If any of the values in the array is different from the value at the same spot that you passed during the previous render, React will re-synchronize your Effect.\n\nFor example, if you passed `[\"general\"]` during the initial render, and later you passed `[\"travel\"]` during the next r", "score": 0.5875142216682434}, {"chunk_id": 1529, "source": "domains/react_docs/data/learn/separating-events-from-effects.md", "text_preview": "why, in this case, it makes sense to follow the dependency linter, and add `url` as a dependency:\n\n```js {4}\nfunction Page({ url }) {\n  useEffect(() => {\n    logVisit(url);\n  }, [url]); // \u2705 All dependencies declared\n  // ...\n}\n```\n\nNow let's say you want to include the number of items in the shopping cart together with every page visit:\n\n```js {2-3,6}\nfunction Page({ url }) {\n  const { items } = useContext(ShoppingCartContext);\n  const numberOfItems = items.length;\n\n  useEffect(() => {\n    logVisit(url, numberOfItems);\n  }, [url]); // \ud83d\udd34 React Hook useEffect has a missing dependency: 'numberOfItems'\n  // ...\n}\n```\n\nYou used `numberOfItems` inside the Effect, so the linter asks you to add it as a dependency. However, you *don't* want the `logVisit` call to be reactive with respect to `numbe", "score": 0.5801941752433777}, {"chunk_id": 1753, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "n = createConnection();\n  connection.connect();\n});\n```\n\nIt would be slow to connect to the chat after every re-render, so you add the dependency array:\n\n```js {4}\nuseEffect(() => {\n  const connection = createConnection();\n  connection.connect();\n}, []);\n```\n\n**The code inside the Effect does not use any props or state, so your dependency array is `[]` (empty). This tells React to only run this code when the component \"mounts\", i.e. appears on the screen for the first time.**\n\nLet's try running this code:\n\n<Sandpack>\n\n```js\nimport { useEffect } from 'react';\nimport { createConnection } from './chat.js';\n\nexport default function ChatRoom() {\n  useEffect(() => {\n    const connection = createConnection();\n    connection.connect();\n  }, []);\n  return <h1>Welcome to the chat!</h1>;\n}\n```\n\n```js", "score": 0.5737941265106201}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:006:effect_cleanup", "timestamp": "2025-12-29T23:03:37.221648Z", "domain": "react_docs", "mode": "docs", "query": "How do I clean up an effect in React (e.g., unsubscribe a listener)?", "case": {"id": "effect_cleanup", "tags": ["hooks", "effects"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can clean up an effect by returning a cleanup function from the `useEffect` hook. This cleanup function is called when the component unmounts or before the effect runs again, allowing you to unsubscribe from listeners or perform any necessary cleanup.\n\nHere\u2019s an example of how to use a cleanup function in `useEffect`:\n\n```javascript\nimport React, { useEffect } from 'react';\n\nfunction MyComponent() {\n  useEffect(() => {\n    const handleEvent = () => {\n      // Handle the event\n    };\n\n    // Subscribe to an event\n    window.addEventListener('resize', handleEvent);\n\n    // Cleanup function to unsubscribe from the event\n    return () => {\n      window.removeEventListener('resize', handleEvent);\n    };\n  }, []); // The empty dependency array means this effect runs once on mount and cleans up on unmount.\n\n  return <div>My Component</div>;\n}\n```\n\nIn this example, the `handleEvent` function is registered as an event listener for the `resize` event when the component mounts. The cleanup function returned from `useEffect` removes this event listener when the component unmounts or before the effect runs again. \n\nThis pattern is essential for preventing memory leaks and ensuring that your components behave correctly as they mount and unmount.", "latency_ms": 7674, "tokens_in": 153, "tokens_out": 268, "cost_estimate_usd": 0.00018375, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To clean up an effect in React, you can return a cleanup function from the `useEffect` Hook. This cleanup function should undo or stop whatever the effect was doing, such as unsubscribing from an event listener.\n\nFor example, if your effect subscribes to a scroll event, you would set it up like this:\n\n```js\nuseEffect(() => {\n  function handleScroll(e) {\n    console.log(window.scrollX, window.scrollY);\n  }\n  window.addEventListener('scroll', handleScroll);\n  \n  // Cleanup function to unsubscribe\n  return () => window.removeEventListener('scroll', handleScroll);\n}, []);\n```\n\nIn this example, the cleanup function is defined to remove the event listener when the component unmounts or before the effect runs again, ensuring that you do not have multiple listeners attached at the same time [1764].", "latency_ms": 7151, "tokens_in": 1414, "tokens_out": 175, "cost_estimate_usd": 0.00031709999999999996, "retrieved_chunks": [{"chunk_id": 1731, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": ", undo, or clean up whatever they were doing. For example, \"connect\" needs \"disconnect\", \"subscribe\" needs \"unsubscribe\", and \"fetch\" needs either \"cancel\" or \"ignore\". You will learn how to do this by returning a *cleanup function*.\n\nLet's look at each of these steps in detail.\n\n### Step 1: Declare an Effect {/*step-1-declare-an-effect*/}\n\nTo declare an Effect in your component, import the [`useEffect` Hook](/reference/react/useEffect) from React:\n\n```js\nimport { useEffect } from 'react';\n```\n\nThen, call it at the top level of your component and put some code inside your Effect:\n\n```js {2-4}\nfunction MyComponent() {\n  useEffect(() => {\n    // Code here will run after *every* render\n  });\n  return <div />;\n}\n```\n\nEvery time your component renders, React will update the screen *and then* ru", "score": 0.5939674377441406}, {"chunk_id": 3146, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "onent is removed from the page, your Effect will disconnect one last time.\n\n**To [help you find bugs,](/learn/synchronizing-with-effects#step-3-add-cleanup-if-needed) in development React runs <CodeStep step={1}>setup</CodeStep> and <CodeStep step={2}>cleanup</CodeStep> one extra time before the <CodeStep step={1}>setup</CodeStep>.** This is a stress-test that verifies your Effect's logic is implemented correctly. If this causes visible issues, your cleanup function is missing some logic. The cleanup function should stop or undo whatever the setup function was doing. The rule of thumb is that the user shouldn't be able to distinguish between the setup being called once (as in production) and a *setup* \u2192 *cleanup* \u2192 *setup* sequence (as in development). [See common solutions.](/learn/synchr", "score": 0.5871890187263489}, {"chunk_id": 3276, "source": "domains/react_docs/data/reference/react/useLayoutEffect.md", "text_preview": "that your cleanup logic \"mirrors\" your setup logic and that it stops or undoes whatever the setup is doing. If this causes a problem, [implement the cleanup function.](/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development)\n\n* If some of your dependencies are objects or functions defined inside the component, there is a risk that they will **cause the Effect to re-run more often than needed.** To fix this, remove unnecessary [object](/reference/react/useEffect#removing-unnecessary-object-dependencies) and [function](/reference/react/useEffect#removing-unnecessary-function-dependencies) dependencies. You can also [extract state updates](/reference/react/useEffect#updating-state-based-on-previous-state-from-an-effect) and [non-reactive logic](/reference/react", "score": 0.5612039566040039}, {"chunk_id": 1762, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "be cleaned up like in the solution above.\n\nSee the examples below for how to handle common patterns.\n\n</Pitfall>\n\n### Controlling non-React widgets {/*controlling-non-react-widgets*/}\n\nSometimes you need to add UI widgets that aren't written in React. For example, let's say you're adding a map component to your page. It has a `setZoomLevel()` method, and you'd like to keep the zoom level in sync with a `zoomLevel` state variable in your React code. Your Effect would look similar to this:\n\n```js\nuseEffect(() => {\n  const map = mapRef.current;\n  map.setZoomLevel(zoomLevel);\n}, [zoomLevel]);\n```\n\nNote that there is no cleanup needed in this case. In development, React will call the Effect twice, but this is not a problem because calling `setZoomLevel` twice with the same value does not do an", "score": 0.5610595941543579}, {"chunk_id": 1780, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "mponent once in development to verify that you've implemented cleanup well.\n\nNow edit the input to say `abc`. If you do it fast enough, you'll see `Schedule \"ab\" log` immediately followed by `Cancel \"ab\" log` and `Schedule \"abc\" log`. **React always cleans up the previous render's Effect before the next render's Effect.** This is why even if you type into the input fast, there is at most one timeout scheduled at a time. Edit the input a few times and watch the console to get a feel for how Effects get cleaned up.\n\nType something into the input and then immediately press \"Unmount the component\". Notice how unmounting cleans up the last render's Effect. Here, it clears the last timeout before it has a chance to fire.\n\nFinally, edit the component above and comment out the cleanup function so", "score": 0.5608822107315063}, {"chunk_id": 1764, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "al();\n  return () => dialog.close();\n}, []);\n```\n\nIn development, your Effect will call `showModal()`, then immediately `close()`, and then `showModal()` again. This has the same user-visible behavior as calling `showModal()` once, as you would see in production.\n\n### Subscribing to events {/*subscribing-to-events*/}\n\nIf your Effect subscribes to something, the cleanup function should unsubscribe:\n\n```js {6}\nuseEffect(() => {\n  function handleScroll(e) {\n    console.log(window.scrollX, window.scrollY);\n  }\n  window.addEventListener('scroll', handleScroll);\n  return () => window.removeEventListener('scroll', handleScroll);\n}, []);\n```\n\nIn development, your Effect will call `addEventListener()`, then immediately `removeEventListener()`, and then `addEventListener()` again with the same handl", "score": 0.5587800741195679}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:007:controlled_input", "timestamp": "2025-12-29T23:03:50.533505Z", "domain": "react_docs", "mode": "docs", "query": "What is a controlled input in React and how do I implement one?", "case": {"id": "controlled_input", "tags": ["forms"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A controlled input in React is an input element whose value is controlled by the React state. This means that the input's value is set by the state of the component, and any changes to the input are handled through event handlers that update the state.\n\nTo implement a controlled input, you typically follow these steps:\n\n1. **Initialize State**: Use the `useState` hook (or class component state) to create a state variable that will hold the input value.\n\n2. **Set the Input Value**: Bind the input's `value` attribute to the state variable.\n\n3. **Handle Changes**: Create an event handler function that updates the state when the input value changes, and attach this function to the input's `onChange` event.\n\nHere\u2019s an example using a functional component:\n\n```jsx\nimport React, { useState } from 'react';\n\nfunction ControlledInput() {\n  const [inputValue, setInputValue] = useState('');\n\n  const handleChange = (event) => {\n    setInputValue(event.target.value);\n  };\n\n  return (\n    <div>\n      <input \n        type=\"text\" \n        value={inputValue} \n        onChange={handleChange} \n      />\n      <p>You typed: {inputValue}</p>\n    </div>\n  );\n}\n\nexport default ControlledInput;\n```\n\nIn this example:\n- `inputValue` is the state variable that holds the current value of the input.\n- The `value` attribute of the `<input>` element is set to `inputValue`, making it a controlled input.\n- The `handleChange` function updates `inputValue` whenever the user types in the input field.\n\nThis approach ensures that the input's displayed value is always in sync with the component's state.", "latency_ms": 13303, "tokens_in": 150, "tokens_out": 361, "cost_estimate_usd": 0.00023909999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A controlled input in React is an input element whose value is controlled by the React state. This means that the value of the input is set by a state variable, and any changes to the input are handled through an event that updates that state variable.\n\nTo implement a controlled input, you need to pass the `value` prop to the input element, which should be linked to a state variable. You also need to handle the `onChange` event to update the state variable whenever the user types in the input. Here\u2019s an example:\n\n```js\nfunction Form() {\n  const [firstName, setFirstName] = useState(''); // Declare a state variable\n  return (\n    <input\n      value={firstName} // Force the input's value to match the state variable\n      onChange={e => setFirstName(e.target.value)} // Update the state variable on any edits\n    />\n  );\n}\n```\n\nIn this example, `firstName` is the state variable that holds the current value of the input, and `setFirstName` is the function used to update that value when the input changes [4000].", "latency_ms": 8308, "tokens_in": 1467, "tokens_out": 233, "cost_estimate_usd": 0.00035985, "retrieved_chunks": [{"chunk_id": 4000, "source": "domains/react_docs/data/reference/react-dom/components/input.md", "text_preview": "s an initial value](#providing-an-initial-value-for-an-input) like `<input defaultValue=\"Initial text\" />`, your JSX only specifies the initial value. It does not control what the value should be right now.\n\n**To render a _controlled_ input, pass the `value` prop to it (or `checked` for checkboxes and radios).** React will force the input to always have the `value` you passed. Usually, you would do this by declaring a [state variable:](/reference/react/useState)\n\n```js {2,6,7}\nfunction Form() {\n  const [firstName, setFirstName] = useState(''); // Declare a state variable...\n  // ...\n  return (\n    <input\n      value={firstName} // ...force the input's value to match the state variable...\n      onChange={e => setFirstName(e.target.value)} // ... and update the state variable on any edits!", "score": 0.633929431438446}, {"chunk_id": 722, "source": "domains/react_docs/data/learn/managing-state.md", "text_preview": "te-between-components)\n* [How to control whether the state gets preserved or reset](/learn/preserving-and-resetting-state)\n* [How to consolidate complex state logic in a function](/learn/extracting-state-logic-into-a-reducer)\n* [How to pass information without \"prop drilling\"](/learn/passing-data-deeply-with-context)\n* [How to scale state management as your app grows](/learn/scaling-up-with-reducer-and-context)\n\n</YouWillLearn>\n\n## Reacting to input with state {/*reacting-to-input-with-state*/}\n\nWith React, you won't modify the UI from code directly. For example, you won't write commands like \"disable the button\", \"enable the button\", \"show the success message\", etc. Instead, you will describe the UI you want to see for the different visual states of your component (\"initial state\", \"typin", "score": 0.629077672958374}, {"chunk_id": 3999, "source": "domains/react_docs/data/reference/react-dom/components/input.md", "text_preview": "sed as a key in the form data, for example `{ firstName: \"Taylor\" }`.\n\n</Note>\n\n<Pitfall>\n\nBy default, a `<button>` inside a `<form>` without a `type` attribute will submit it. This can be surprising! If you have your own custom `Button` React component, consider using [`<button type=\"button\">`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button) instead of `<button>` (with no type). Then, to be explicit, use `<button type=\"submit\">` for buttons that *are* supposed to submit the form.\n\n</Pitfall>\n\n---\n\n### Controlling an input with a state variable {/*controlling-an-input-with-a-state-variable*/}\n\nAn input like `<input />` is *uncontrolled.* Even if you [pass an initial value](#providing-an-initial-value-for-an-input) like `<input defaultValue=\"Initial text\" />`, your JSX onl", "score": 0.6286786794662476}, {"chunk_id": 4109, "source": "domains/react_docs/data/reference/react-dom/components/textarea.md", "text_preview": "e](/learn/preserving-and-resetting-state) on every re-render. For example, this can happen if the text area or one of its parents always receives a different `key` attribute, or if you nest component definitions (which is not allowed in React and causes the \"inner\" component to remount on every render).\n\n---\n\n### I'm getting an error: \"A component is changing an uncontrolled input to be controlled\" {/*im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled*/}\n\n\nIf you provide a `value` to the component, it must remain a string throughout its lifetime.\n\nYou cannot pass `value={undefined}` first and later pass `value=\"some string\"` because React won't know whether you want the component to be uncontrolled or controlled. A controlled component should always receive", "score": 0.6267803907394409}, {"chunk_id": 3257, "source": "domains/react_docs/data/reference/react/useImperativeHandle.md", "text_preview": "t ref = useRef(null);\n\n  function handleClick() {\n    ref.current.focus();\n    // This won't work because the DOM node isn't exposed:\n    // ref.current.style.opacity = 0.5;\n  }\n\n  return (\n    <form>\n      <MyInput placeholder=\"Enter your name\" ref={ref} />\n      <button type=\"button\" onClick={handleClick}>\n        Edit\n      </button>\n    </form>\n  );\n}\n```\n\n```js src/MyInput.js\nimport { useRef, useImperativeHandle } from 'react';\n\nfunction MyInput({ ref, ...props }) {\n  const inputRef = useRef(null);\n\n  useImperativeHandle(ref, () => {\n    return {\n      focus() {\n        inputRef.current.focus();\n      },\n      scrollIntoView() {\n        inputRef.current.scrollIntoView();\n      },\n    };\n  }, []);\n\n  return <input {...props} ref={inputRef} />;\n};\n\nexport default MyInput;\n```\n\n```css\nin", "score": 0.6110305786132812}, {"chunk_id": 3445, "source": "domains/react_docs/data/reference/react/useRef.md", "text_preview": "MyComponent() {\n  const inputRef = useRef(null);\n  // ...\n```\n\nThen pass your ref object as the `ref` attribute to the JSX of the DOM node you want to manipulate:\n\n```js [[1, 2, \"inputRef\"]]\n  // ...\n  return <input ref={inputRef} />;\n```\n\nAfter React creates the DOM node and puts it on the screen, React will set the <CodeStep step={2}>`current` property</CodeStep> of your ref object to that DOM node. Now you can access the `<input>`'s DOM node and call methods like [`focus()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus):\n\n```js [[2, 2, \"inputRef.current\"]]\n  function handleClick() {\n    inputRef.current.focus();\n  }\n```\n\nReact will set the `current` property back to `null` when the node is removed from the screen.\n\nRead more about [manipulating the DOM with refs.]", "score": 0.6083968877792358}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 0.85, "penalty_total": 0.15, "rule_breakdown": [{"rule": "overconfident_language_check", "penalty": 0.15, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "note": "Overconfident language detected."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "notes": "Overconfident language detected."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:008:keys_in_lists", "timestamp": "2025-12-29T23:03:57.055181Z", "domain": "react_docs", "mode": "docs", "query": "Why do I need keys when rendering lists in React? What makes a good key?", "case": {"id": "keys_in_lists", "tags": ["lists"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, keys are essential when rendering lists of elements because they help React identify which items have changed, been added, or removed. This identification allows React to optimize the rendering process by minimizing the number of DOM manipulations, which can be costly in terms of performance.\n\nA good key should be a stable and unique identifier for each item in the list. Here are some guidelines for what makes a good key:\n\n1. **Uniqueness**: Each key should be unique among its siblings. This helps React distinguish between different elements.\n\n2. **Stability**: The key should not change between renders. If the key changes, React will treat the element as a new one, which can lead to unnecessary re-renders and loss of component state.\n\n3. **Avoid Index as Key**: While you can use the index of the array as a key, it's generally not recommended if the list can change (items added, removed, or reordered). Using the index can lead to issues with component state and performance.\n\nIn summary, keys are crucial for efficient updates in React lists, and a good key is unique and stable.", "latency_ms": 6078, "tokens_in": 153, "tokens_out": 226, "cost_estimate_usd": 0.00015854999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "Keys are essential when rendering lists in React because they help uniquely identify each item among its siblings. This identification allows React to maintain the state of components between re-renders. When keys are used correctly, React can efficiently update the UI by determining which components need to be re-rendered, moved, or destroyed based on the keys associated with each item in the list [1286][1953].\n\nA good key should be unique among siblings and should not change over time. This stability is crucial because if a key changes, React will treat the component as a new one, leading to a loss of state. It is recommended to use keys that are derived from stable identifiers, such as database IDs, rather than using array indices, which can lead to issues when items are reordered or removed [1954][1285].", "latency_ms": 6508, "tokens_in": 1412, "tokens_out": 163, "cost_estimate_usd": 0.0003096, "retrieved_chunks": [{"chunk_id": 1286, "source": "domains/react_docs/data/learn/rendering-lists.md", "text_preview": "ferent_ arrays.\n* **Keys must not change** or that defeats their purpose! Don't generate them while rendering.\n\n### Why does React need keys? {/*why-does-react-need-keys*/}\n\nImagine that files on your desktop didn't have names. Instead, you'd refer to them by their order -- the first file, the second file, and so on. You could get used to it, but once you delete a file, it would get confusing. The second file would become the first file, the third file would be the second file, and so on.\n\nFile names in a folder and JSX keys in an array serve a similar purpose. They let us uniquely identify an item between its siblings. A well-chosen key provides more information than the position within the array. Even if the _position_ changes due to reordering, the `key` lets React identify the item thr", "score": 0.7331773042678833}, {"chunk_id": 1953, "source": "domains/react_docs/data/learn/tutorial-tic-tac-toe.md", "text_preview": "items for a matching key. If the current list has a key that didn't exist before, React creates a component. If the current list is missing a key that existed in the previous list, React destroys the previous component. If two keys match, the corresponding component is moved.\n\nKeys tell React about the identity of each component, which allows React to maintain state between re-renders. If a component's key changes, the component will be destroyed and re-created with a new state.\n\n`key` is a special and reserved property in React. When an element is created, React extracts the `key` property and stores the key directly on the returned element. Even though `key` may look like it is passed as props, React automatically uses `key` to decide which components to update. There's no way for a com", "score": 0.6923709511756897}, {"chunk_id": 1954, "source": "domains/react_docs/data/learn/tutorial-tic-tac-toe.md", "text_preview": "ike it is passed as props, React automatically uses `key` to decide which components to update. There's no way for a component to ask what `key` its parent specified.\n\n**It's strongly recommended that you assign proper keys whenever you build dynamic lists.** If you don't have an appropriate key, you may want to consider restructuring your data so that you do.\n\nIf no key is specified, React will report an error and use the array index as a key by default. Using the array index as a key is problematic when trying to re-order a list's items or inserting/removing list items. Explicitly passing `key={i}` silences the error but has the same problems as array indices and is not recommended in most cases.\n\nKeys do not need to be globally unique; they only need to be unique between components and", "score": 0.6807155013084412}, {"chunk_id": 934, "source": "domains/react_docs/data/learn/preserving-and-resetting-state.md", "text_preview": "e same place. In this example, you only have two, so it's not a hassle to render both separately in the JSX.\n\n### Option 2: Resetting state with a key {/*option-2-resetting-state-with-a-key*/}\n\nThere is also another, more generic, way to reset a component's state.\n\nYou might have seen `key`s when [rendering lists.](/learn/rendering-lists#keeping-list-items-in-order-with-key) Keys aren't just for lists! You can use keys to make React distinguish between any components. By default, React uses order within the parent (\"first counter\", \"second counter\") to discern between components. But keys let you tell React that this is not just a *first* counter, or a *second* counter, but a specific counter--for example, *Taylor's* counter. This way, React will know *Taylor's* counter wherever it appears", "score": 0.6617422103881836}, {"chunk_id": 1284, "source": "domains/react_docs/data/learn/rendering-lists.md", "text_preview": "each item needs to render not one, but several DOM nodes?\n\nThe short [`<>...</>` Fragment](/reference/react/Fragment) syntax won't let you pass a key, so you need to either group them into a single `<div>`, or use the slightly longer and [more explicit `<Fragment>` syntax:](/reference/react/Fragment#rendering-a-list-of-fragments)\n\n```js\nimport { Fragment } from 'react';\n\n// ...\n\nconst listItems = people.map(person =>\n  <Fragment key={person.id}>\n    <h1>{person.name}</h1>\n    <p>{person.bio}</p>\n  </Fragment>\n);\n```\n\nFragments disappear from the DOM, so this will produce a flat list of `<h1>`, `<p>`, `<h1>`, `<p>`, and so on.\n\n</DeepDive>\n\n### Where to get your `key` {/*where-to-get-your-key*/}\n\nDifferent sources of data provide different sources of keys:\n\n* **Data from a database:** If y", "score": 0.6260970830917358}, {"chunk_id": 1285, "source": "domains/react_docs/data/learn/rendering-lists.md", "text_preview": "where-to-get-your-key*/}\n\nDifferent sources of data provide different sources of keys:\n\n* **Data from a database:** If your data is coming from a database, you can use the database keys/IDs, which are unique by nature.\n* **Locally generated data:** If your data is generated and persisted locally (e.g. notes in a note-taking app), use an incrementing counter, [`crypto.randomUUID()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID) or a package like [`uuid`](https://www.npmjs.com/package/uuid) when creating items.\n\n### Rules of keys {/*rules-of-keys*/}\n\n* **Keys must be unique among siblings.** However, it\u2019s okay to use the same keys for JSX nodes in _different_ arrays.\n* **Keys must not change** or that defeats their purpose! Don't generate them while rendering.\n\n### Why", "score": 0.60856032371521}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:009:conditional_rendering", "timestamp": "2025-12-29T23:04:05.872577Z", "domain": "react_docs", "mode": "docs", "query": "How do I conditionally render elements in React?", "case": {"id": "conditional_rendering", "tags": ["rendering"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can conditionally render elements using several methods. The official React documentation outlines a few common approaches:\n\n1. **Using if statements**: You can use standard JavaScript `if` statements to conditionally render components. For example:\n\n   ```jsx\n   function MyComponent({ isLoggedIn }) {\n     if (isLoggedIn) {\n       return <h1>Welcome back!</h1>;\n     } else {\n       return <h1>Please sign up.</h1>;\n     }\n   }\n   ```\n\n2. **Using ternary operators**: This is a concise way to conditionally render elements inline:\n\n   ```jsx\n   function MyComponent({ isLoggedIn }) {\n     return (\n       <h1>{isLoggedIn ? 'Welcome back!' : 'Please sign up.'}</h1>\n     );\n   }\n   ```\n\n3. **Using logical && operator**: You can use the logical AND operator to render an element only if a condition is true:\n\n   ```jsx\n   function MyComponent({ isLoggedIn }) {\n     return (\n       <div>\n         {isLoggedIn && <h1>Welcome back!</h1>}\n       </div>\n     );\n   }\n   ```\n\nThese methods allow you to control what gets rendered based on the component's state or props. For more detailed examples and explanations, you can refer to the official React documentation on conditional rendering.", "latency_ms": 6909, "tokens_in": 146, "tokens_out": 287, "cost_estimate_usd": 0.00019409999999999997, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can conditionally render elements using standard JavaScript syntax. There are several methods to achieve this:\n\n1. **Using `if` statements**: You can declare a variable to hold the JSX you want to render based on a condition. For example:\n\n   ```js\n   let content;\n   if (isLoggedIn) {\n     content = <AdminPanel />;\n   } else {\n     content = <LoginForm />;\n   }\n   return (\n     <div>\n       {content}\n     </div>\n   );\n   ```\n\n   This approach allows you to clearly define what should be rendered based on the condition [536].\n\n2. **Using the conditional (ternary) operator**: This is a more compact way to conditionally render elements directly within JSX. For example:\n\n   ```js\n   <div>\n     {isLoggedIn ? (\n       <AdminPanel />\n     ) : (\n       <LoginForm />\n     )}\n   </div>\n   ```\n\n   This method is useful for inline conditions [537].\n\n3. **Using the logical `&&` operator**: If you only want to render something when a condition is true, you can use the `&&` operator. For instance:\n\n   ```js\n   <div>\n     {isLoggedIn && <AdminPanel />}\n   </div>\n   ```\n\n   This will render `<AdminPanel />` only if `isLoggedIn` is true [537].\n\nThese techniques allow you to control what gets rendered based on the state or props of your components.", "latency_ms": 8808, "tokens_in": 1436, "tokens_out": 311, "cost_estimate_usd": 0.000402, "retrieved_chunks": [{"chunk_id": 312, "source": "domains/react_docs/data/learn/conditional-rendering.md", "text_preview": "---\ntitle: Conditional Rendering\n---\n\n<Intro>\n\nYour components will often need to display different things depending on different conditions. In React, you can conditionally render JSX using JavaScript syntax like `if` statements, `&&`, and `? :` operators.\n\n</Intro>\n\n<YouWillLearn>\n\n* How to return different JSX depending on a condition\n* How to conditionally include or exclude a piece of JSX\n* Common conditional syntax shortcuts you\u2019ll encounter in React codebases\n\n</YouWillLearn>\n\n## Conditionally returning JSX {/*conditionally-returning-jsx*/}\n\nLet\u2019s say you have a `PackingList` component rendering several `Item`s, which can be marked as packed or not:\n\n<Sandpack>\n\n```js\nfunction Item({ name, isPacked }) {\n  return <li className=\"item\">{name}</li>;\n}\n\nexport default function PackingLis", "score": 0.6760947108268738}, {"chunk_id": 363, "source": "domains/react_docs/data/learn/describing-the-ui.md", "text_preview": ": 20px;\n  border-radius: 50%;\n}\n```\n\n</Sandpack>\n\n<LearnMore path=\"/learn/passing-props-to-a-component\">\n\nRead **[Passing Props to a Component](/learn/passing-props-to-a-component)** to learn how to pass and read props.\n\n</LearnMore>\n\n## Conditional rendering {/*conditional-rendering*/}\n\nYour components will often need to display different things depending on different conditions. In React, you can conditionally render JSX using JavaScript syntax like `if` statements, `&&`, and `? :` operators.\n\nIn this example, the JavaScript `&&` operator is used to conditionally render a checkmark:\n\n<Sandpack>\n\n```js\nfunction Item({ name, isPacked }) {\n  return (\n    <li className=\"item\">\n      {name} {isPacked && '\u2705'}\n    </li>\n  );\n}\n\nexport default function PackingList() {\n  return (\n    <section>", "score": 0.6626149415969849}, {"chunk_id": 536, "source": "domains/react_docs/data/learn/index.md", "text_preview": "syntax, but a regular `{}` object inside the `style={ }` JSX curly braces. You can use the `style` attribute when your styles depend on JavaScript variables.\n\n## Conditional rendering {/*conditional-rendering*/}\n\nIn React, there is no special syntax for writing conditions. Instead, you'll use the same techniques as you use when writing regular JavaScript code. For example, you can use an [`if`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else) statement to conditionally include JSX:\n\n```js\nlet content;\nif (isLoggedIn) {\n  content = <AdminPanel />;\n} else {\n  content = <LoginForm />;\n}\nreturn (\n  <div>\n    {content}\n  </div>\n);\n```\n\nIf you prefer more compact code, you can use the [conditional `?` operator.](https://developer.mozilla.org/en-US/docs/Web", "score": 0.6588907241821289}, {"chunk_id": 537, "source": "domains/react_docs/data/learn/index.md", "text_preview": "f you prefer more compact code, you can use the [conditional `?` operator.](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator) Unlike `if`, it works inside JSX:\n\n```js\n<div>\n  {isLoggedIn ? (\n    <AdminPanel />\n  ) : (\n    <LoginForm />\n  )}\n</div>\n```\n\nWhen you don't need the `else` branch, you can also use a shorter [logical `&&` syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#short-circuit_evaluation):\n\n```js\n<div>\n  {isLoggedIn && <AdminPanel />}\n</div>\n```\n\nAll of these approaches also work for conditionally specifying attributes. If you're unfamiliar with some of this JavaScript syntax, you can start by always using `if...else`.\n\n## Rendering lists {/*rendering-lists*/}\n\nYou will rely on Ja", "score": 0.6457065343856812}, {"chunk_id": 318, "source": "domains/react_docs/data/learn/conditional-rendering.md", "text_preview": "onent. You may already have noticed some duplication in the render output:\n\n```js\n<li className=\"item\">{name} \u2705</li>\n```\n\nis very similar to\n\n```js\n<li className=\"item\">{name}</li>\n```\n\nBoth of the conditional branches return `<li className=\"item\">...</li>`:\n\n```js\nif (isPacked) {\n  return <li className=\"item\">{name} \u2705</li>;\n}\nreturn <li className=\"item\">{name}</li>;\n```\n\nWhile this duplication isn't harmful, it could make your code harder to maintain. What if you want to change the `className`? You'd have to do it in two places in your code! In such a situation, you could conditionally include a little JSX to make your code more [DRY.](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)\n\n### Conditional (ternary) operator (`? :`) {/*conditional-ternary-operator--*/}\n\nJavaScript has a c", "score": 0.6008940935134888}, {"chunk_id": 2017, "source": "domains/react_docs/data/learn/understanding-your-ui-as-a-tree.md", "text_preview": "not a part of React. React render trees can provide insight to our React app regardless of what platform your app renders to.\n\n</DeepDive>\n\nA render tree represents a single render pass of a React application. With [conditional rendering](/learn/conditional-rendering), a parent component may render different children depending on the data passed.\n\nWe can update the app to conditionally render either an inspirational quote or color.\n\n<Sandpack>\n\n```js src/App.js\nimport FancyText from './FancyText';\nimport InspirationGenerator from './InspirationGenerator';\nimport Copyright from './Copyright';\n\nexport default function App() {\n  return (\n    <>\n      <FancyText title text=\"Get Inspired App\" />\n      <InspirationGenerator>\n        <Copyright year={2004} />\n      </InspirationGenerator>\n    </>", "score": 0.5950915813446045}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:010:lifting_state_up", "timestamp": "2025-12-29T23:04:11.275262Z", "domain": "react_docs", "mode": "docs", "query": "What does it mean to lift state up in React, and when should I do it?", "case": {"id": "lifting_state_up", "tags": ["state"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "Lifting state up in React refers to the practice of moving state from a child component to a parent component. This is done when multiple child components need to share the same state or when a parent component needs to control the state of its children.\n\nYou should consider lifting state up in the following scenarios:\n\n1. **Shared State**: If two or more child components need to access and modify the same state, it is beneficial to lift that state up to their closest common ancestor. This allows the parent to manage the state and pass it down as props to the children.\n\n2. **Controlled Components**: When you want to have a single source of truth for the state that affects multiple components, lifting state up can help maintain consistency across those components.\n\n3. **Communication Between Siblings**: If sibling components need to communicate or react to changes in each other's state, lifting the state to their parent allows the parent to manage the interactions.\n\nIn summary, lifting state up is a way to manage shared state in a React application, ensuring that components can communicate and share data effectively.", "latency_ms": 5395, "tokens_in": 154, "tokens_out": 216, "cost_estimate_usd": 0.00015269999999999997, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "Lifting state up in React means moving the state that is shared between two or more components to their closest common parent component. This allows the parent component to manage the state and pass it down to the child components via props. This technique is commonly used when you want the state of two components to always change together, ensuring that they remain in sync. \n\nYou should lift state up when you have multiple components that need to share and synchronize their state. By doing this, you avoid duplicating state across components and can manage the state more effectively from a single source, which helps prevent bugs and inconsistencies in your application [1580][1598].", "latency_ms": 3907, "tokens_in": 1409, "tokens_out": 130, "cost_estimate_usd": 0.00028935, "retrieved_chunks": [{"chunk_id": 1580, "source": "domains/react_docs/data/learn/sharing-state-between-components.md", "text_preview": "---\ntitle: Sharing State Between Components\n---\n\n<Intro>\n\nSometimes, you want the state of two components to always change together. To do it, remove state from both of them, move it to their closest common parent, and then pass it down to them via props. This is known as *lifting state up,* and it's one of the most common things you will do writing React code.\n\n</Intro>\n\n<YouWillLearn>\n\n- How to share state between components by lifting it up\n- What are controlled and uncontrolled components\n\n</YouWillLearn>\n\n## Lifting state up by example {/*lifting-state-up-by-example*/}\n\nIn this example, a parent `Accordion` component renders two separate `Panel`s:\n\n* `Accordion`\n  - `Panel`\n  - `Panel`\n\nEach `Panel` component has a boolean `isActive` state that determines whether its content is visibl", "score": 0.6529508233070374}, {"chunk_id": 730, "source": "domains/react_docs/data/learn/managing-state.md", "text_preview": "```\n\n</Sandpack>\n\nThis might seem like a small change, but many bugs in React apps are fixed this way.\n\n<LearnMore path=\"/learn/choosing-the-state-structure\">\n\nRead **[Choosing the State Structure](/learn/choosing-the-state-structure)** to learn how to design the state shape to avoid bugs.\n\n</LearnMore>\n\n## Sharing state between components {/*sharing-state-between-components*/}\n\nSometimes, you want the state of two components to always change together. To do it, remove state from both of them, move it to their closest common parent, and then pass it down to them via props. This is known as \"lifting state up\", and it's one of the most common things you will do writing React code.\n\nIn this example, only one panel should be active at a time. To achieve this, instead of keeping the active sta", "score": 0.6116138100624084}, {"chunk_id": 1598, "source": "domains/react_docs/data/learn/sharing-state-between-components.md", "text_preview": "-but that for _each_ piece of state, there is a _specific_ component that holds that piece of information. Instead of duplicating shared state between components, *lift it up* to their common shared parent, and *pass it down* to the children that need it.\n\nYour app will change as you work on it. It is common that you will move state down or back up while you're still figuring out where each piece of the state \"lives\". This is all part of the process!\n\nTo see what this feels like in practice with a few more components, read [Thinking in React.](/learn/thinking-in-react)\n\n<Recap>\n\n* When you want to coordinate two components, move their state to their common parent.\n* Then pass the information down through props from their common parent.\n* Finally, pass the event handlers down so that the ch", "score": 0.5971279144287109}, {"chunk_id": 722, "source": "domains/react_docs/data/learn/managing-state.md", "text_preview": "te-between-components)\n* [How to control whether the state gets preserved or reset](/learn/preserving-and-resetting-state)\n* [How to consolidate complex state logic in a function](/learn/extracting-state-logic-into-a-reducer)\n* [How to pass information without \"prop drilling\"](/learn/passing-data-deeply-with-context)\n* [How to scale state management as your app grows](/learn/scaling-up-with-reducer-and-context)\n\n</YouWillLearn>\n\n## Reacting to input with state {/*reacting-to-input-with-state*/}\n\nWith React, you won't modify the UI from code directly. For example, you won't write commands like \"disable the button\", \"enable the button\", \"show the success message\", etc. Instead, you will describe the UI you want to see for the different visual states of your component (\"initial state\", \"typin", "score": 0.5679214000701904}, {"chunk_id": 897, "source": "domains/react_docs/data/learn/preserving-and-resetting-state.md", "text_preview": "re in your UI.\n\nWhen you give a component state, you might think the state \"lives\" inside the component. But the state is actually held inside React. React associates each piece of state it's holding with the correct component by where that component sits in the render tree.\n\nHere, there is only one `<Counter />` JSX tag, but it's rendered at two different positions:\n\n<Sandpack>\n\n```js\nimport { useState } from 'react';\n\nexport default function App() {\n  const counter = <Counter />;\n  return (\n    <div>\n      {counter}\n      {counter}\n    </div>\n  );\n}\n\nfunction Counter() {\n  const [score, setScore] = useState(0);\n  const [hover, setHover] = useState(false);\n\n  let className = 'counter';\n  if (hover) {\n    className += ' hover';\n  }\n\n  return (\n    <div\n      className={className}\n      onP", "score": 0.5564915537834167}, {"chunk_id": 1064, "source": "domains/react_docs/data/learn/reacting-to-input-with-state.md", "text_preview": "how to do that.\" />\n\n## Thinking about UI declaratively {/*thinking-about-ui-declaratively*/}\n\nYou've seen how to implement a form imperatively above. To better understand how to think in React, you'll walk through reimplementing this UI in React below:\n\n1. **Identify** your component's different visual states\n2. **Determine** what triggers those state changes\n3. **Represent** the state in memory using `useState`\n4. **Remove** any non-essential state variables\n5. **Connect** the event handlers to set the state\n\n### Step 1: Identify your component's different visual states {/*step-1-identify-your-components-different-visual-states*/}\n\nIn computer science, you may hear about a [\"state machine\"](https://en.wikipedia.org/wiki/Finite-state_machine) being in one of several \u201cstates\u201d. If you work", "score": 0.5378431081771851}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 0.85, "penalty_total": 0.15, "rule_breakdown": [{"rule": "overconfident_language_check", "penalty": 0.15, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "note": "Overconfident language detected."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "notes": "Overconfident language detected."}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "prompt", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:011:context_basics", "timestamp": "2025-12-29T23:04:19.825339Z", "domain": "react_docs", "mode": "docs", "query": "How do I pass data deeply without prop drilling in React?", "case": {"id": "context_basics", "tags": ["context"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To pass data deeply without prop drilling in React, you can use the Context API. The Context API allows you to create a context that can be accessed by any component in the component tree, avoiding the need to pass props through every level of the tree.\n\nHere\u2019s a brief overview of how to use the Context API:\n\n1. **Create a Context**: Use `React.createContext()` to create a context object.\n\n   ```javascript\n   const MyContext = React.createContext();\n   ```\n\n2. **Provide the Context**: Use the `Provider` component of the context to wrap the part of your component tree where you want the context to be available. You can pass the data you want to share as a value to the `Provider`.\n\n   ```javascript\n   const App = () => {\n     const sharedData = { /* your data */ };\n\n     return (\n       <MyContext.Provider value={sharedData}>\n         <ComponentA />\n       </MyContext.Provider>\n     );\n   };\n   ```\n\n3. **Consume the Context**: Use the `useContext` hook or the `Context.Consumer` component in any child component to access the data.\n\n   ```javascript\n   const ComponentB = () => {\n     const contextData = React.useContext(MyContext);\n\n     return <div>{contextData.someValue}</div>;\n   };\n   ```\n\nThis way, you can access the shared data in any component that is a descendant of the `Provider`, without having to pass props through every intermediate component.\n\nFor more detailed information, you can refer to the official React documentation on the Context API.", "latency_ms": 8523, "tokens_in": 148, "tokens_out": 324, "cost_estimate_usd": 0.0002166, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "You can pass data deeply without prop drilling in React by using the context feature. Context allows a parent component to provide data to the entire tree of components below it, without the need to pass props explicitly through each level of the component hierarchy. This is particularly useful when you need to share the same information across many components or when the nearest common ancestor is far removed from the components that need the data [805]. \n\nBy utilizing context, you can avoid the verbosity and inconvenience of prop drilling, making your data flow more efficient and easier to manage [806].", "latency_ms": 3093, "tokens_in": 1373, "tokens_out": 111, "cost_estimate_usd": 0.00027255, "retrieved_chunks": [{"chunk_id": 806, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "earn>\n\n## The problem with passing props {/*the-problem-with-passing-props*/}\n\n[Passing props](/learn/passing-props-to-a-component) is a great way to explicitly pipe data through your UI tree to the components that use it.\n\nBut passing props can become verbose and inconvenient when you need to pass some prop deeply through the tree, or if many components need the same prop. The nearest common ancestor could be far removed from the components that need data, and [lifting state up](/learn/sharing-state-between-components) that high can lead to a situation called \"prop drilling\".\n\n<DiagramGroup>\n\n<Diagram name=\"passing_data_lifting_state\" height={160} width={608} captionPosition=\"top\" alt=\"Diagram with a tree of three components. The parent contains a bubble representing a value highlighted i", "score": 0.648159384727478}, {"chunk_id": 841, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "ents. It may feel like a slog, but it makes it very clear which components use which data! The person maintaining your code will be glad you've made the data flow explicit with props.\n2. **Extract components and [pass JSX as `children`](/learn/passing-props-to-a-component#passing-jsx-as-children) to them.** If you pass some data through many layers of intermediate components that don't use that data (and only pass it further down), this often means that you forgot to extract some components along the way. For example, maybe you pass data props like `posts` to visual components that don't use them directly, like `<Layout posts={posts} />`. Instead, make `Layout` take `children` as a prop, and render `<Layout><Posts posts={posts} /></Layout>`. This reduces the number of layers between the co", "score": 0.6166303157806396}, {"chunk_id": 805, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "---\ntitle: Passing Data Deeply with Context\n---\n\n<Intro>\n\nUsually, you will pass information from a parent component to a child component via props. But passing props can become verbose and inconvenient if you have to pass them through many components in the middle, or if many components in your app need the same information. *Context* lets the parent component make some information available to any component in the tree below it\u2014no matter how deep\u2014without passing it explicitly through props.\n\n</Intro>\n\n<YouWillLearn>\n\n- What \"prop drilling\" is\n- How to replace repetitive prop passing with context\n- Common use cases for context\n- Common alternatives to context\n\n</YouWillLearn>\n\n## The problem with passing props {/*the-problem-with-passing-props*/}\n\n[Passing props](/learn/passing-props-to-a", "score": 0.6130083799362183}, {"chunk_id": 808, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "child of the root passes the value through to one of its two children - the right one, which is highlighted purple. That child passed the value through its single child, which passes it down to both of its two children, which are highlighted purple.\">\n\nProp drilling\n\n</Diagram>\n\n</DiagramGroup>\n\nWouldn't it be great if there were a way to \"teleport\" data to the components in the tree that need it without passing props? With React's context feature, there is!\n\n## Context: an alternative to passing props {/*context-an-alternative-to-passing-props*/}\n\nContext lets a parent component provide data to the entire tree below it. There are many uses for context. Here is one example. Consider this `Heading` component that accepts a `level` for its size:\n\n<Sandpack>\n\n```js\nimport Heading from './Head", "score": 0.6049181222915649}, {"chunk_id": 2213, "source": "domains/react_docs/data/learn/you-might-not-need-an-effect.md", "text_preview": "}\n\nfunction Child({ onFetched }) {\n  const data = useSomeAPI();\n  // \ud83d\udd34 Avoid: Passing data to the parent in an Effect\n  useEffect(() => {\n    if (data) {\n      onFetched(data);\n    }\n  }, [onFetched, data]);\n  // ...\n}\n```\n\nIn React, data flows from the parent components to their children. When you see something wrong on the screen, you can trace where the information comes from by going up the component chain until you find which component passes the wrong prop or has the wrong state. When child components update the state of their parent components in Effects, the data flow becomes very difficult to trace. Since both the child and the parent need the same data, let the parent component fetch that data, and *pass it down* to the child instead:\n\n```js {4-5}\nfunction Parent() {\n  const data", "score": 0.5653541088104248}, {"chunk_id": 585, "source": "domains/react_docs/data/learn/keeping-components-pure.md", "text_preview": "of each other. In the same way, each component should only \"think for itself\", and not attempt to coordinate with or depend upon others during rendering. Rendering is like a school exam: each component should calculate JSX on their own!\n\n<DeepDive>\n\n#### Detecting impure calculations with StrictMode {/*detecting-impure-calculations-with-strict-mode*/}\n\nAlthough you might not have used them all yet, in React there are three kinds of inputs that you can read while rendering: [props](/learn/passing-props-to-a-component), [state](/learn/state-a-components-memory), and [context.](/learn/passing-data-deeply-with-context) You should always treat these inputs as read-only.\n\nWhen you want to *change* something in response to user input, you should [set state](/learn/state-a-components-memory) inst", "score": 0.5534406900405884}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 0.5, "expect_details": {"missing": ["Provider"]}, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": "prompt"}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:012:use_reducer", "timestamp": "2025-12-29T23:04:25.522797Z", "domain": "react_docs", "mode": "docs", "query": "When should I use useReducer instead of useState?", "case": {"id": "use_reducer", "tags": ["hooks", "state"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "According to the official React documentation, you should consider using `useReducer` instead of `useState` in the following scenarios:\n\n1. **Complex State Logic**: If your state logic involves multiple sub-values or when the next state depends on the previous one, `useReducer` can help manage that complexity more clearly.\n\n2. **State Management Across Components**: If you find that you need to manage state that is shared across multiple components, `useReducer` can provide a more structured way to handle updates.\n\n3. **Performance Optimization**: In cases where you have a component that triggers deep updates (like updating an object with many properties), `useReducer` can help prevent unnecessary re-renders by batching updates.\n\n4. **Better Organization**: If you have a lot of state transitions, using `useReducer` can help keep your state management organized by centralizing the state update logic in a reducer function.\n\nIn summary, `useReducer` is particularly useful for managing complex state logic and when you need a more structured approach to state updates compared to `useState`.", "latency_ms": 5690, "tokens_in": 147, "tokens_out": 218, "cost_estimate_usd": 0.00015285, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "You should consider using `useReducer` instead of `useState` when you often encounter bugs due to incorrect state updates in some component and want to introduce more structure to your code. `useReducer` can help manage complex state logic more effectively, especially when many event handlers modify state in a similar way. It allows you to separate the update logic from the event handling, which can improve readability and debugging [449][451]. \n\nAdditionally, if your state updates are complex and you find that using `useState` leads to bloated component code, `useReducer` can help cleanly organize that logic [449]. However, it's also noted that you don't have to use reducers for everything, and you can mix and match `useState` and `useReducer` within the same component [451].", "latency_ms": 5163, "tokens_in": 1469, "tokens_out": 162, "cost_estimate_usd": 0.00031755, "retrieved_chunks": [{"chunk_id": 449, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "`useState` you have to write less code upfront. With `useReducer`, you have to write both a reducer function _and_ dispatch actions. However, `useReducer` can help cut down on the code if many event handlers modify state in a similar way.\n- **Readability:** `useState` is very easy to read when the state updates are simple. When they get more complex, they can bloat your component's code and make it difficult to scan. In this case, `useReducer` lets you cleanly separate the _how_ of update logic from the _what happened_ of event handlers.\n- **Debugging:** When you have a bug with `useState`, it can be difficult to tell _where_ the state was set incorrectly, and _why_. With `useReducer`, you can add a console log into your reducer to see every state update, and _why_ it happened (due to whi", "score": 0.7093126773834229}, {"chunk_id": 451, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "eference:** Some people like reducers, others don't. That's okay. It's a matter of preference. You can always convert between `useState` and `useReducer` back and forth: they are equivalent!\n\nWe recommend using a reducer if you often encounter bugs due to incorrect state updates in some component, and want to introduce more structure to its code. You don't have to use reducers for everything: feel free to mix and match! You can even `useState` and `useReducer` in the same component.\n\n## Writing reducers well {/*writing-reducers-well*/}\n\nKeep these two tips in mind when writing reducers:\n\n- **Reducers must be pure.** Similar to [state updater functions](/learn/queueing-a-series-of-state-updates), reducers run during rendering! (Actions are queued until the next render.) This means that redu", "score": 0.6742817163467407}, {"chunk_id": 425, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "alled a \"reducer\".**\n\nReducers are a different way to handle state. You can migrate from `useState` to `useReducer` in three steps:\n\n1. **Move** from setting state to dispatching actions.\n2. **Write** a reducer function.\n3. **Use** the reducer from your component.\n\n### Step 1: Move from setting state to dispatching actions {/*step-1-move-from-setting-state-to-dispatching-actions*/}\n\nYour event handlers currently specify _what to do_ by setting state:\n\n```js\nfunction handleAddTask(text) {\n  setTasks([\n    ...tasks,\n    {\n      id: nextId++,\n      text: text,\n      done: false,\n    },\n  ]);\n}\n\nfunction handleChangeTask(task) {\n  setTasks(\n    tasks.map((t) => {\n      if (t.id === task.id) {\n        return task;\n      } else {\n        return t;\n      }\n    })\n  );\n}\n\nfunction handleDeleteTask", "score": 0.6733031272888184}, {"chunk_id": 450, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "h `useReducer`, you can add a console log into your reducer to see every state update, and _why_ it happened (due to which `action`). If each `action` is correct, you'll know that the mistake is in the reducer logic itself. However, you have to step through more code than with `useState`.\n- **Testing:** A reducer is a pure function that doesn't depend on your component. This means that you can export and test it separately in isolation. While generally it's best to test components in a more realistic environment, for complex state update logic it can be useful to assert that your reducer returns a particular state for a particular initial state and action.\n- **Personal preference:** Some people like reducers, others don't. That's okay. It's a matter of preference. You can always convert be", "score": 0.6650655269622803}, {"chunk_id": 3397, "source": "domains/react_docs/data/reference/react/useReducer.md", "text_preview": "ent handlers into a single function outside of your component. Read more about [choosing between `useState` and `useReducer`.](/learn/extracting-state-logic-into-a-reducer#comparing-usestate-and-usereducer)\n\n---\n\n### Writing the reducer function {/*writing-the-reducer-function*/}\n\nA reducer function is declared like this:\n\n```js\nfunction reducer(state, action) {\n  // ...\n}\n```\n\nThen you need to fill in the code that will calculate and return the next state. By convention, it is common to write it as a [`switch` statement.](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch) For each `case` in the `switch`, calculate and return some next state.\n\n```js {4-7,10-13}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'incremented_age': {\n      r", "score": 0.6601709127426147}, {"chunk_id": 3387, "source": "domains/react_docs/data/reference/react/useReducer.md", "text_preview": "---\ntitle: useReducer\n---\n\n<Intro>\n\n`useReducer` is a React Hook that lets you add a [reducer](/learn/extracting-state-logic-into-a-reducer) to your component.\n\n```js\nconst [state, dispatch] = useReducer(reducer, initialArg, init?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useReducer(reducer, initialArg, init?)` {/*usereducer*/}\n\nCall `useReducer` at the top level of your component to manage its state with a [reducer.](/learn/extracting-state-logic-into-a-reducer)\n\n```js\nimport { useReducer } from 'react';\n\nfunction reducer(state, action) {\n  // ...\n}\n\nfunction MyComponent() {\n  const [state, dispatch] = useReducer(reducer, { age: 42 });\n  // ...\n```\n\n[See more examples below.](#usage)\n\n#### Parameters {/*parameters*/}\n\n* `reducer`: The reducer function that spe", "score": 0.6493033766746521}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:013:custom_hooks", "timestamp": "2025-12-29T23:04:33.021158Z", "domain": "react_docs", "mode": "docs", "query": "What is a custom hook and when should I create one?", "case": {"id": "custom_hooks", "tags": ["hooks"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A custom hook in React is a JavaScript function that starts with the prefix \"use\" and can call other hooks. Custom hooks allow you to extract component logic into reusable functions. This is useful for sharing logic between components without changing their structure.\n\nYou should create a custom hook when:\n\n1. **You have reusable logic**: If you find yourself using the same logic in multiple components, a custom hook can help encapsulate that logic and make it reusable.\n\n2. **You want to abstract complex logic**: If a component has complex logic that can be separated out, creating a custom hook can simplify the component and make it easier to understand.\n\n3. **You want to manage state or side effects**: If you need to manage state or side effects that are common across multiple components, a custom hook can provide a clean way to handle that.\n\nThe official React documentation provides guidance on how to create and use custom hooks, emphasizing that they are a way to share logic without changing the component hierarchy.", "latency_ms": 5223, "tokens_in": 148, "tokens_out": 201, "cost_estimate_usd": 0.0001428, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A custom Hook in React is a JavaScript function that allows you to reuse stateful logic between components. It is defined by a function that starts with the word \"use\" followed by a capital letter, such as `useChatRoom` or `useImpressionLog`. Custom Hooks help make the calling code more declarative by constraining what it does, focusing on specific use cases rather than being overly abstract [1406][1402].\n\nYou should create a custom Hook when you have logic that you want to share between multiple components. However, it's important to note that you don't need to extract a custom Hook for every small piece of duplicated code; some duplication is acceptable. A custom Hook is particularly useful when you have a clear, reusable piece of logic that can simplify your components and improve code organization [1430][1396].", "latency_ms": 7490, "tokens_in": 1473, "tokens_out": 168, "cost_estimate_usd": 0.00032175, "retrieved_chunks": [{"chunk_id": 1406, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "hatRoom({ serverUrl, roomId });\n  useImpressionLog('visit_chat', { roomId });\n  // ...\n}\n```\n\n**A good custom Hook makes the calling code more declarative by constraining what it does.** For example, `useChatRoom(options)` can only connect to the chat room, while `useImpressionLog(eventName, extraData)` can only send an impression log to the analytics. If your custom Hook API doesn't constrain the use cases and is very abstract, in the long run it's likely to introduce more problems than it solves.\n\n</DeepDive>\n\n### Custom Hooks help you migrate to better patterns {/*custom-hooks-help-you-migrate-to-better-patterns*/}\n\nEffects are an [\"escape hatch\"](/learn/escape-hatches): you use them when you need to \"step outside React\" and when there is no better built-in solution for your use case. W", "score": 0.5888679027557373}, {"chunk_id": 1402, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "k a clear name, it might mean that your Effect is too coupled to the rest of your component's logic, and is not yet ready to be extracted.\n\nIdeally, your custom Hook's name should be clear enough that even a person who doesn't write code often could have a good guess about what your custom Hook does, what it takes, and what it returns:\n\n* \u2705 `useData(url)`\n* \u2705 `useImpressionLog(eventName, extraData)`\n* \u2705 `useChatRoom(options)`\n\nWhen you synchronize with an external system, your custom Hook name may be more technical and use jargon specific to that system. It's good as long as it would be clear to a person familiar with that system:\n\n* \u2705 `useMediaQuery(query)`\n* \u2705 `useSocket(url)`\n* \u2705 `useIntersectionObserver(ref, options)`\n\n**Keep custom Hooks focused on concrete high-level use cases.** Avo", "score": 0.5796340703964233}, {"chunk_id": 1350, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "---\ntitle: 'Reusing Logic with Custom Hooks'\n---\n\n<Intro>\n\nReact comes with several built-in Hooks like `useState`, `useContext`, and `useEffect`. Sometimes, you'll wish that there was a Hook for some more specific purpose: for example, to fetch data, to keep track of whether the user is online, or to connect to a chat room. You might not find these Hooks in React, but you can create your own Hooks for your application's needs.\n\n</Intro>\n\n<YouWillLearn>\n\n- What custom Hooks are, and how to write your own\n- How to reuse logic between components\n- How to name and structure your custom Hooks\n- When and why to extract custom Hooks\n\n</YouWillLearn>\n\n## Custom Hooks: Sharing logic between components {/*custom-hooks-sharing-logic-between-components*/}\n\nImagine you're developing an app that heavil", "score": 0.5772238373756409}, {"chunk_id": 1430, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "</>\n  );\n}\n```\n\n```css src/styles.css\nlabel, button { display: block; margin-bottom: 20px; }\nhtml, body { min-height: 300px; }\n```\n\n```css src/welcome.css active\n.welcome {\n  color: white;\n  padding: 50px;\n  text-align: center;\n  font-size: 50px;\n  background-image: radial-gradient(circle, rgba(63,94,251,1) 0%, rgba(252,70,107,1) 100%);\n\n  animation: fadeIn 1000ms;\n}\n\n@keyframes fadeIn {\n  0% { opacity: 0; }\n  100% { opacity: 1; }\n}\n\n```\n\n</Sandpack>\n\nSometimes, you don't even need a Hook!\n\n<Recap>\n\n- Custom Hooks let you share logic between components.\n- Custom Hooks must be named starting with `use` followed by a capital letter.\n- Custom Hooks only share stateful logic, not state itself.\n- You can pass reactive values from one Hook to another, and they stay up-to-date.\n- All Hooks re", "score": 0.5562654733657837}, {"chunk_id": 1396, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "\"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test --env=jsdom\",\n    \"eject\": \"react-scripts eject\"\n  }\n}\n```\n\n```css\ninput { display: block; margin-bottom: 20px; }\nbutton { margin-left: 10px; }\n```\n\n</Sandpack>\n\nNotice how you no longer need to know *how* `useChatRoom` works in order to use it. You could add it to any other component, pass any other options, and it would work the same way. That's the power of custom Hooks.\n\n## When to use custom Hooks {/*when-to-use-custom-hooks*/}\n\nYou don't need to extract a custom Hook for every little duplicated bit of code. Some duplication is fine. For example, extracting a `useFormInput` Hook to wrap a single `useState` call like earlier is probably unnecessary.\n\nHowever, whenever yo", "score": 0.5539200901985168}, {"chunk_id": 2755, "source": "domains/react_docs/data/reference/react/hooks.md", "text_preview": "tly useful to library authors and aren't commonly used in the application code.\n\n- [`useDebugValue`](/reference/react/useDebugValue) lets you customize the label React DevTools displays for your custom Hook.\n- [`useId`](/reference/react/useId) lets a component associate a unique ID with itself. Typically used with accessibility APIs.\n- [`useSyncExternalStore`](/reference/react/useSyncExternalStore) lets a component subscribe to an external store.\n* [`useActionState`](/reference/react/useActionState) allows you to manage state of actions.\n\n---\n\n## Your own Hooks {/*your-own-hooks*/}\n\nYou can also [define your own custom Hooks](/learn/reusing-logic-with-custom-hooks#extracting-your-own-custom-hook-from-a-component) as JavaScript functions.", "score": 0.5477042198181152}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:014:use_memo_vs_use_callback", "timestamp": "2025-12-29T23:04:38.786637Z", "domain": "react_docs", "mode": "docs", "query": "What's the difference between useMemo and useCallback?", "case": {"id": "use_memo_vs_use_callback", "tags": ["hooks", "performance"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "According to the official React documentation, `useMemo` and `useCallback` are both hooks that help optimize performance by memoizing values and functions, respectively, but they serve different purposes:\n\n- **`useMemo`**: This hook is used to memoize a computed value. It takes a function and an array of dependencies, and it will recompute the memoized value only when one of the dependencies changes. This is useful for optimizing expensive calculations that you don't want to run on every render.\n\n  Example:\n  ```javascript\n  const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);\n  ```\n\n- **`useCallback`**: This hook is used to memoize a function. It also takes a function and an array of dependencies, and it will return a memoized version of the function that only changes if one of the dependencies changes. This is particularly useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders.\n\n  Example:\n  ```javascript\n  const memoizedCallback = useCallback(() => {\n    doSomething(a, b);\n  }, [a, b]);\n  ```\n\nIn summary, `useMemo` is for memoizing values, while `useCallback` is for memoizing functions.", "latency_ms": 5756, "tokens_in": 146, "tokens_out": 264, "cost_estimate_usd": 0.0001803, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "The difference between `useMemo` and `useCallback` lies in what they are designed to memoize. \n\n`useMemo` is a React Hook that lets you cache the result of a calculation between re-renders. It is used for memoizing a computed value, which means it caches the result of a function call and returns that cached result on subsequent renders unless the dependencies change. For example, you might use `useMemo` to cache the result of a data transformation or an expensive computation [3308].\n\nOn the other hand, `useCallback` is a React Hook that lets you cache a function definition between re-renders. It is specifically used to memoize a function itself, ensuring that the same function instance is returned across renders unless the dependencies change. This is particularly useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders [2993].\n\nIn summary, use `useMemo` for caching values and `useCallback` for caching functions [3009].", "latency_ms": 5668, "tokens_in": 1420, "tokens_out": 202, "cost_estimate_usd": 0.0003342, "retrieved_chunks": [{"chunk_id": 3009, "source": "domains/react_docs/data/reference/react/useCallback.md", "text_preview": "with [`useMemo`,](/reference/react/useMemo) you might find it helpful to think of `useCallback` as this:\n\n```js {expectedErrors: {'react-compiler': [3]}}\n// Simplified implementation (inside React)\nfunction useCallback(fn, dependencies) {\n  return useMemo(() => fn, dependencies);\n}\n```\n\n[Read more about the difference between `useMemo` and `useCallback`.](/reference/react/useMemo#memoizing-a-function)\n\n</DeepDive>\n\n<DeepDive>\n\n#### Should you add useCallback everywhere? {/*should-you-add-usecallback-everywhere*/}\n\nIf your app is like this site, and most interactions are coarse (like replacing a page or an entire section), memoization is usually unnecessary. On the other hand, if your app is more like a drawing editor, and most interactions are granular (like moving shapes), then you might", "score": 0.6471222639083862}, {"chunk_id": 3006, "source": "domains/react_docs/data/reference/react/useCallback.md", "text_preview": "the underlying problem and fix it first. Then you may add `useCallback` back.\n\n</Note>\n\n<DeepDive>\n\n#### How is useCallback related to useMemo? {/*how-is-usecallback-related-to-usememo*/}\n\nYou will often see [`useMemo`](/reference/react/useMemo) alongside `useCallback`. They are both useful when you're trying to optimize a child component. They let you [memoize](https://en.wikipedia.org/wiki/Memoization) (or, in other words, cache) something you're passing down:\n\n```js {6-8,10-15,19}\nimport { useMemo, useCallback } from 'react';\n\nfunction ProductPage({ productId, referrer }) {\n  const product = useData('/product/' + productId);\n\n  const requirements = useMemo(() => { // Calls your function and caches its result\n    return computeRequirements(product);\n  }, [product]);\n\n  const handleSubmi", "score": 0.6466237306594849}, {"chunk_id": 3308, "source": "domains/react_docs/data/reference/react/useMemo.md", "text_preview": "---\ntitle: useMemo\n---\n\n<Intro>\n\n`useMemo` is a React Hook that lets you cache the result of a calculation between re-renders.\n\n```js\nconst cachedValue = useMemo(calculateValue, dependencies)\n```\n\n</Intro>\n\n<Note>\n\n[React Compiler](/learn/react-compiler) automatically memoizes values and functions, reducing the need for manual `useMemo` calls. You can use the compiler to handle memoization automatically.\n\n</Note>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useMemo(calculateValue, dependencies)` {/*usememo*/}\n\nCall `useMemo` at the top level of your component to cache a calculation between re-renders:\n\n```js\nimport { useMemo } from 'react';\n\nfunction TodoList({ todos, tab }) {\n  const visibleTodos = useMemo(\n    () => filterTodos(todos, tab),\n    [todos, tab]\n  );\n  // ...\n}\n```", "score": 0.6125223636627197}, {"chunk_id": 2993, "source": "domains/react_docs/data/reference/react/useCallback.md", "text_preview": "---\ntitle: useCallback\n---\n\n<Intro>\n\n`useCallback` is a React Hook that lets you cache a function definition between re-renders.\n\n```js\nconst cachedFn = useCallback(fn, dependencies)\n```\n\n</Intro>\n\n<Note>\n\n[React Compiler](/learn/react-compiler) automatically memoizes values and functions, reducing the need for manual `useCallback` calls. You can use the compiler to handle memoization automatically.\n\n</Note>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useCallback(fn, dependencies)` {/*usecallback*/}\n\nCall `useCallback` at the top level of your component to cache a function definition between re-renders:\n\n```js {4,9}\nimport { useCallback } from 'react';\n\nexport default function ProductPage({ productId, referrer, theme }) {\n  const handleSubmit = useCallback((orderDetails) => {", "score": 0.5984591245651245}, {"chunk_id": 2463, "source": "domains/react_docs/data/reference/react/cache.md", "text_preview": "eact/memo), or [`useMemo`](/reference/react/useMemo)? {/*cache-memo-usememo*/}\n\nAll mentioned APIs offer memoization but the difference is what they're intended to memoize, who can access the cache, and when their cache is invalidated.\n\n#### `useMemo` {/*deep-dive-use-memo*/}\n\nIn general, you should use [`useMemo`](/reference/react/useMemo) for caching an expensive computation in a Client Component across renders. As an example, to memoize a transformation of data within a component.\n\n```jsx {expectedErrors: {'react-compiler': [4]}} {4}\n'use client';\n\nfunction WeatherReport({record}) {\n  const avgTemp = useMemo(() => calculateAvg(record), record);\n  // ...\n}\n\nfunction App() {\n  const record = getRecord();\n  return (\n    <>\n      <WeatherReport record={record} />\n      <WeatherReport record", "score": 0.5930418372154236}, {"chunk_id": 1048, "source": "domains/react_docs/data/learn/react-compiler/introduction.md", "text_preview": "seCallback, and React.memo? {/*what-should-i-do-about-usememo-usecallback-and-reactmemo*/}\n\nBy default, React Compiler will memoize your code based on its analysis and heuristics. In most cases, this memoization will be as precise, or moreso, than what you may have written.\n\nHowever, in some cases developers may need more control over memoization. The `useMemo` and `useCallback` hooks can continue to be used with React Compiler as an escape hatch to provide control over which values are memoized. A common use-case for this is if a memoized value is used as an effect dependency, in order to ensure that an effect does not fire repeatedly even when its dependencies do not meaningfully change.\n\nFor new code, we recommend relying on the compiler for memoization and using `useMemo`/`useCallback`", "score": 0.5880440473556519}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:015:refs_use_ref", "timestamp": "2025-12-29T23:04:47.086927Z", "domain": "react_docs", "mode": "docs", "query": "How do I reference a DOM element in React?", "case": {"id": "refs_use_ref", "tags": ["refs"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can reference a DOM element using the `ref` attribute. This allows you to create a reference to a DOM element that you can then access directly. Here's how you can do it:\n\n1. **Using `useRef` Hook (for functional components)**:\n   You can use the `useRef` hook to create a ref and attach it to a DOM element.\n\n   ```jsx\n   import React, { useRef, useEffect } from 'react';\n\n   function MyComponent() {\n     const myRef = useRef(null);\n\n     useEffect(() => {\n       // Access the DOM element\n       if (myRef.current) {\n         myRef.current.focus(); // Example: focus the input\n       }\n     }, []);\n\n     return <input ref={myRef} type=\"text\" />;\n   }\n   ```\n\n2. **Using `createRef` (for class components)**:\n   In class components, you can use `createRef` to create a ref.\n\n   ```jsx\n   import React, { Component } from 'react';\n\n   class MyComponent extends Component {\n     constructor(props) {\n       super(props);\n       this.myRef = React.createRef();\n     }\n\n     componentDidMount() {\n       // Access the DOM element\n       if (this.myRef.current) {\n         this.myRef.current.focus(); // Example: focus the input\n       }\n     }\n\n     render() {\n       return <input ref={this.myRef} type=\"text\" />;\n     }\n   }\n   ```\n\nIn both cases, the `ref` attribute is used to attach the reference to the DOM element, and you can access the element through the `current` property of the ref object. \n\nThis method of referencing DOM elements is built-in to React and does not require any third-party integration.", "latency_ms": 8274, "tokens_in": 146, "tokens_out": 367, "cost_estimate_usd": 0.00024209999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To reference a DOM element in React, you can use the `useRef` Hook. First, import `useRef` from React. Then, declare a ref inside your component using `const myRef = useRef(null);`. Finally, pass this ref to the desired JSX element using the `ref` attribute, like this: `<div ref={myRef}>`. When React creates the DOM node for this element, it will assign a reference to it in `myRef.current`, allowing you to access the DOM node later [759][760][761].", "latency_ms": 2942, "tokens_in": 1470, "tokens_out": 113, "cost_estimate_usd": 0.0002883, "retrieved_chunks": [{"chunk_id": 385, "source": "domains/react_docs/data/learn/escape-hatches.md", "text_preview": "h-refs*/}\n\nReact automatically updates the DOM to match your render output, so your components won't often need to manipulate it. However, sometimes you might need access to the DOM elements managed by React\u2014for example, to focus a node, scroll to it, or measure its size and position. There is no built-in way to do those things in React, so you will need a ref to the DOM node. For example, clicking the button will focus the input using a ref:\n\n<Sandpack>\n\n```js\nimport { useRef } from 'react';\n\nexport default function Form() {\n  const inputRef = useRef(null);\n\n  function handleClick() {\n    inputRef.current.focus();\n  }\n\n  return (\n    <>\n      <input ref={inputRef} />\n      <button onClick={handleClick}>\n        Focus the input\n      </button>\n    </>\n  );\n}\n```\n\n</Sandpack>\n\n<LearnMore pa", "score": 0.7101589441299438}, {"chunk_id": 759, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "---\ntitle: 'Manipulating the DOM with Refs'\n---\n\n<Intro>\n\nReact automatically updates the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model/Introduction) to match your render output, so your components won't often need to manipulate it. However, sometimes you might need access to the DOM elements managed by React--for example, to focus a node, scroll to it, or measure its size and position. There is no built-in way to do those things in React, so you will need a *ref* to the DOM node.\n\n</Intro>\n\n<YouWillLearn>\n\n- How to access a DOM node managed by React with the `ref` attribute\n- How the `ref` JSX attribute relates to the `useRef` Hook\n- How to access another component's DOM node\n- In which cases it's safe to modify the DOM managed by React\n\n</YouWillLearn>\n\n## Gettin", "score": 0.6772878170013428}, {"chunk_id": 760, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "s another component's DOM node\n- In which cases it's safe to modify the DOM managed by React\n\n</YouWillLearn>\n\n## Getting a ref to the node {/*getting-a-ref-to-the-node*/}\n\nTo access a DOM node managed by React, first, import the `useRef` Hook:\n\n```js\nimport { useRef } from 'react';\n```\n\nThen, use it to declare a ref inside your component:\n\n```js\nconst myRef = useRef(null);\n```\n\nFinally, pass your ref as the `ref` attribute to the JSX tag for which you want to get the DOM node:\n\n```js\n<div ref={myRef}>\n```\n\nThe `useRef` Hook returns an object with a single property called `current`. Initially, `myRef.current` will be `null`. When React creates a DOM node for this `<div>`, React will put a reference to this node into `myRef.current`. You can then access this DOM node from your [event handle", "score": 0.6631567478179932}, {"chunk_id": 761, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "React will put a reference to this node into `myRef.current`. You can then access this DOM node from your [event handlers](/learn/responding-to-events) and use the built-in [browser APIs](https://developer.mozilla.org/docs/Web/API/Element) defined on it.\n\n```js\n// You can use any browser APIs, for example:\nmyRef.current.scrollIntoView();\n```\n\n### Example: Focusing a text input {/*example-focusing-a-text-input*/}\n\nIn this example, clicking the button will focus the input:\n\n<Sandpack>\n\n```js\nimport { useRef } from 'react';\n\nexport default function Form() {\n  const inputRef = useRef(null);\n\n  function handleClick() {\n    inputRef.current.focus();\n  }\n\n  return (\n    <>\n      <input ref={inputRef} />\n      <button onClick={handleClick}>\n        Focus the input\n      </button>\n    </>\n  );\n}\n`", "score": 0.6582500338554382}, {"chunk_id": 3456, "source": "domains/react_docs/data/reference/react/useRef.md", "text_preview": "des inside them.\n\nTo fix this, find the component that you want to get a ref to:\n\n```js\nexport default function MyInput({ value, onChange }) {\n  return (\n    <input\n      value={value}\n      onChange={onChange}\n    />\n  );\n}\n```\n\nAnd then add `ref` to the list of props your component accepts and pass `ref` as a prop to the relevant child [built-in component](/reference/react-dom/components/common) like this:\n\n```js {1,6}\nfunction MyInput({ value, onChange, ref }) {\n  return (\n    <input\n      value={value}\n      onChange={onChange}\n      ref={ref}\n    />\n  );\n};\n\nexport default MyInput;\n```\n\nThen the parent component can get a ref to it.\n\nRead more about [accessing another component's DOM nodes.](/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes)", "score": 0.6454582214355469}, {"chunk_id": 788, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "u'll use them to hold DOM elements.\n- You instruct React to put a DOM node into `myRef.current` by passing `<div ref={myRef}>`.\n- Usually, you will use refs for non-destructive actions like focusing, scrolling, or measuring DOM elements.\n- A component doesn't expose its DOM nodes by default. You can opt into exposing a DOM node by using the `ref` prop.\n- Avoid changing DOM nodes managed by React.\n- If you do modify DOM nodes managed by React, modify parts that React has no reason to update.\n\n</Recap>\n\n\n\n<Challenges>\n\n#### Play and pause the video {/*play-and-pause-the-video*/}\n\nIn this example, the button toggles a state variable to switch between a playing and a paused state. However, in order to actually play or pause the video, toggling state is not enough. You also need to call [`play(", "score": 0.6406176686286926}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:016:strict_mode", "timestamp": "2025-12-29T23:04:53.461911Z", "domain": "react_docs", "mode": "docs", "query": "What is React Strict Mode and why can effects run twice in development?", "case": {"id": "strict_mode", "tags": ["dev"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Strict Mode is a tool for highlighting potential problems in an application. It activates additional checks and warnings for its descendants. Strict Mode does not render any visible UI; it only activates checks and warnings for the components within it.\n\nOne of the behaviors of React Strict Mode is that it intentionally invokes certain lifecycle methods and effects twice in development mode. This includes the `useEffect` hook. The purpose of this behavior is to help developers identify side effects that may not be properly handled. By running effects twice, React can help ensure that components are resilient to unexpected behavior, such as effects that rely on mutable state or side effects that are not cleaned up properly.\n\nThis double invocation does not occur in production builds; it is strictly a development feature to aid in identifying potential issues early in the development process. \n\nFor more detailed information, you can refer to the official React documentation on Strict Mode.", "latency_ms": 4303, "tokens_in": 150, "tokens_out": 177, "cost_estimate_usd": 0.00012869999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Strict Mode is a tool for highlighting potential problems in an application during development. It enables additional checks and warnings for its descendants, helping developers identify issues that could lead to bugs in production. Specifically, it allows components to re-render an extra time, re-run effects an extra time, and re-run ref callbacks an extra time, all in development mode. This behavior helps catch bugs caused by impure rendering, missing cleanup logic in effects, and missing cleanup in ref callbacks, which might not be easily noticeable otherwise [2836][2854].\n\nEffects can run twice in development when Strict Mode is enabled because React performs an additional setup and cleanup cycle for every effect. This extra cycle acts as a stress test to ensure that the cleanup logic properly mirrors the setup logic. If the cleanup is missing or incorrect, it can lead to issues such as resource leaks, which are easier to catch during development with this mechanism [2863][3139].", "latency_ms": 6366, "tokens_in": 1370, "tokens_out": 188, "cost_estimate_usd": 0.0003183, "retrieved_chunks": [{"chunk_id": 2867, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "ct in development, Strict Mode made the missing cleanup logic more noticeable.\n\n[Read more about implementing Effect cleanup.](/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development)\n\n---\n### Fixing bugs found by re-running ref callbacks in development {/*fixing-bugs-found-by-re-running-ref-callbacks-in-development*/}\n\nStrict Mode can also help find bugs in [callbacks refs.](/learn/manipulating-the-dom-with-refs)\n\nEvery callback `ref` has some setup code and may have some cleanup code. Normally, React calls setup when the element is *created* (is added to the DOM) and calls cleanup when the element is *removed* (is removed from the DOM).\n\nWhen Strict Mode is on, React will also run **one extra setup+cleanup cycle in development for every callback `ref`.** Th", "score": 0.742677628993988}, {"chunk_id": 3139, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "-might-not-need-an-effect)\n\n* When Strict Mode is on, React will **run one extra development-only setup+cleanup cycle** before the first real setup. This is a stress-test that ensures that your cleanup logic \"mirrors\" your setup logic and that it stops or undoes whatever the setup is doing. If this causes a problem, [implement the cleanup function.](/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development)\n\n* If some of your dependencies are objects or functions defined inside the component, there is a risk that they will **cause the Effect to re-run more often than needed.** To fix this, remove unnecessary [object](#removing-unnecessary-object-dependencies) and [function](#removing-unnecessary-function-dependencies) dependencies. You can also [extract state u", "score": 0.7387650012969971}, {"chunk_id": 2854, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "then calls cleanup and setup again if its dependencies changed since the last render.\n\nWhen Strict Mode is on, React will also run **one extra setup+cleanup cycle in development for every Effect.** This may feel surprising, but it helps reveal subtle bugs that are hard to catch manually.\n\n**Here is an example to illustrate how re-running Effects in Strict Mode helps you find bugs early.**\n\nConsider this example that connects a component to a chat:\n\n<Sandpack>\n\n```js src/index.js\nimport { createRoot } from 'react-dom/client';\nimport './styles.css';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById(\"root\"));\nroot.render(<App />);\n```\n\n```js\nimport { useState, useEffect } from 'react';\nimport { createConnection } from './chat.js';\n\nconst serverUrl = 'https://localhos", "score": 0.7248605489730835}, {"chunk_id": 2868, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "hen Strict Mode is on, React will also run **one extra setup+cleanup cycle in development for every callback `ref`.** This may feel surprising, but it helps reveal subtle bugs that are hard to catch manually.\n\nConsider this example, which allows you to select an animal and then scroll to one of them. Notice when you switch from \"Cats\" to \"Dogs\", the console logs show that the number of animals in the list keeps growing, and the \"Scroll to\" buttons stop working:\n\n<Sandpack>\n\n```js src/index.js\nimport { createRoot } from 'react-dom/client';\nimport './styles.css';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById(\"root\"));\n// \u274c Not using StrictMode.\nroot.render(<App />);\n```\n\n```js src/App.js active\nimport { useRef, useState } from \"react\";\n\nexport default function Ca", "score": 0.7140366435050964}, {"chunk_id": 2836, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "liably reproduce in production. Strict Mode lets you fix bugs before your users report them.\n\n<Note>\n\nStrict Mode enables the following checks in development:\n\n- Your components will [re-render an extra time](#fixing-bugs-found-by-double-rendering-in-development) to find bugs caused by impure rendering.\n- Your components will [re-run Effects an extra time](#fixing-bugs-found-by-re-running-effects-in-development) to find bugs caused by missing Effect cleanup.\n- Your components will [re-run ref callbacks an extra time](#fixing-bugs-found-by-re-running-ref-callbacks-in-development) to find bugs caused by missing ref cleanup.\n- Your components will [be checked for usage of deprecated APIs.](#fixing-deprecation-warnings-enabled-by-strict-mode)\n\n**All of these checks are development-only and do", "score": 0.7080847024917603}, {"chunk_id": 2863, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "s a problem** (the number of active connections jumps to 2). Strict Mode runs an extra setup+cleanup cycle for every Effect. This Effect has no cleanup logic, so it creates an extra connection but doesn't destroy it. This is a hint that you're missing a cleanup function.\n\nStrict Mode lets you notice such mistakes early in the process. When you fix your Effect by adding a cleanup function in Strict Mode, you *also* fix many possible future production bugs like the select box from before:\n\n<Sandpack>\n\n```js src/index.js\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport './styles.css';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById(\"root\"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n```\n\n```js\nimport { useSta", "score": 0.6999104619026184}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:017:create_root", "timestamp": "2025-12-29T23:05:04.181327Z", "domain": "react_docs", "mode": "docs", "query": "How do I render a React app in the browser with createRoot?", "case": {"id": "create_root", "tags": ["react-dom"], "answerable_from_general_knowledge": true, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To render a React app in the browser using `createRoot`, you can follow these steps as outlined in the official React documentation:\n\n1. **Import React and ReactDOM**: Make sure to import the necessary libraries in your JavaScript file.\n\n2. **Create a root element**: You need to have a root DOM element in your HTML where your React app will be rendered.\n\n3. **Use `createRoot`**: Call `createRoot` from `react-dom/client` to create a root and then render your React component.\n\nHere is an example:\n\n```javascript\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App'; // Import your main App component\n\n// Get the root element from the HTML\nconst rootElement = document.getElementById('root');\n\n// Create a root using createRoot\nconst root = ReactDOM.createRoot(rootElement);\n\n// Render your App component\nroot.render(<App />);\n```\n\nIn this example:\n- Ensure you have an HTML file with a `<div id=\"root\"></div>` where the React app will be mounted.\n- The `createRoot` method is used to create a root for your React application, and the `render` method is called on that root to display your component.\n\nThis method is built-in and does not require any third-party integration.", "latency_ms": 10697, "tokens_in": 150, "tokens_out": 272, "cost_estimate_usd": 0.0001857, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To render a React app in the browser using `createRoot`, you need to follow these steps:\n\n1. Import the `createRoot` function from the `react-dom/client` package.\n2. Select a DOM element where you want to render your React app, typically using `document.getElementById`.\n3. Call `createRoot` with the selected DOM element to create a root.\n4. Use the `root.render` method to display your React component inside the root.\n\nHere is an example code snippet:\n\n```js\nimport { createRoot } from 'react-dom/client';\nimport App from './App.js'; // Import your main App component\n\nconst root = createRoot(document.getElementById('root')); // Select the DOM node\nroot.render(<App />); // Render the App component\n```\n\nThis code will find the DOM node defined in your HTML (usually a `<div>` with an id of \"root\") and display the `<App />` React component inside it [3763][3754].", "latency_ms": 8807, "tokens_in": 1531, "tokens_out": 207, "cost_estimate_usd": 0.00035384999999999995, "retrieved_chunks": [{"chunk_id": 3763, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "## Usage {/*usage*/}\n\n### Rendering an app fully built with React {/*rendering-an-app-fully-built-with-react*/}\n\nIf your app is fully built with React, create a single root for your entire app.\n\n```js [[1, 3, \"document.getElementById('root')\"], [2, 4, \"<App />\"]]\nimport { createRoot } from 'react-dom/client';\n\nconst root = createRoot(document.getElementById('root'));\nroot.render(<App />);\n```\n\nUsually, you only need to run this code once at startup. It will:\n\n1. Find the <CodeStep step={1}>browser DOM node</CodeStep> defined in your HTML.\n2. Display the <CodeStep step={2}>React component</CodeStep> for your app inside.\n\n<Sandpack>\n\n```html public/index.html\n<!DOCTYPE html>\n<html>\n  <head><title>My app</title></head>\n  <body>\n    <!-- This is the DOM node -->\n    <div id=\"root\"></div>\n  </b", "score": 0.7334326505661011}, {"chunk_id": 3753, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "---\ntitle: createRoot\n---\n\n<Intro>\n\n`createRoot` lets you create a root to display React components inside a browser DOM node.\n\n```js\nconst root = createRoot(domNode, options?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `createRoot(domNode, options?)` {/*createroot*/}\n\nCall `createRoot` to create a React root for displaying content inside a browser DOM element.\n\n```js\nimport { createRoot } from 'react-dom/client';\n\nconst domNode = document.getElementById('root');\nconst root = createRoot(domNode);\n```\n\nReact will create a root for the `domNode`, and take over managing the DOM inside it. After you've created a root, you need to call [`root.render`](#root-render) to display a React component inside of it:\n\n```js\nroot.render(<App />);\n```\n\nAn app fully built with Reac", "score": 0.7322419881820679}, {"chunk_id": 3754, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "(#root-render) to display a React component inside of it:\n\n```js\nroot.render(<App />);\n```\n\nAn app fully built with React will usually only have one `createRoot` call for its root component. A page that uses \"sprinkles\" of React for parts of the page may have as many separate roots as needed.\n\n[See more examples below.](#usage)\n\n#### Parameters {/*parameters*/}\n\n* `domNode`: A [DOM element.](https://developer.mozilla.org/en-US/docs/Web/API/Element) React will create a root for this DOM element and allow you to call functions on the root, such as `render` to display rendered React content.\n\n* **optional** `options`: An object with options for this React root.\n\n  * **optional** `onCaughtError`: Callback called when React catches an error in an Error Boundary. Called with the `error` caught b", "score": 0.7247512340545654}, {"chunk_id": 3764, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": ">\n<html>\n  <head><title>My app</title></head>\n  <body>\n    <!-- This is the DOM node -->\n    <div id=\"root\"></div>\n  </body>\n</html>\n```\n\n```js src/index.js active\nimport { createRoot } from 'react-dom/client';\nimport App from './App.js';\nimport './styles.css';\n\nconst root = createRoot(document.getElementById('root'));\nroot.render(<App />);\n```\n\n```js src/App.js\nimport { useState } from 'react';\n\nexport default function App() {\n  return (\n    <>\n      <h1>Hello, world!</h1>\n      <Counter />\n    </>\n  );\n}\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  return (\n    <button onClick={() => setCount(count + 1)}>\n      You clicked me {count} times\n    </button>\n  );\n}\n```\n\n</Sandpack>\n\n**If your app is fully built with React, you shouldn't need to create any more roots, or to", "score": 0.6942502856254578}, {"chunk_id": 3757, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "part of the DOM tree that isn't a child of your component (for example, a modal or a tooltip), use [`createPortal`](/reference/react-dom/createPortal) instead of `createRoot`.\n\n---\n\n### `root.render(reactNode)` {/*root-render*/}\n\nCall `root.render` to display a piece of [JSX](/learn/writing-markup-with-jsx) (\"React node\") into the React root's browser DOM node.\n\n```js\nroot.render(<App />);\n```\n\nReact will display `<App />` in the `root`, and take over managing the DOM inside it.\n\n[See more examples below.](#usage)\n\n#### Parameters {/*root-render-parameters*/}\n\n* `reactNode`: A *React node* that you want to display. This will usually be a piece of JSX like `<App />`, but you can also pass a React element constructed with [`createElement()`](/reference/react/createElement), a string, a numb", "score": 0.6919670701026917}, {"chunk_id": 4128, "source": "domains/react_docs/data/reference/react-dom/createPortal.md", "text_preview": "static areas such as sidebars. Compared with having [multiple separate React roots,](/reference/react-dom/client/createRoot#rendering-a-page-partially-built-with-react) portals let you treat the app as a single React tree with shared state even though its parts render to different parts of the DOM.\n\n<Sandpack>\n\n```html public/index.html\n<!DOCTYPE html>\n<html>\n  <head><title>My app</title></head>\n  <body>\n    <h1>Welcome to my hybrid app</h1>\n    <div class=\"parent\">\n      <div class=\"sidebar\">\n        This is server non-React markup\n        <div id=\"sidebar-content\"></div>\n      </div>\n      <div id=\"root\"></div>\n    </div>\n  </body>\n</html>\n```\n\n```js src/index.js\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App.js';\nimport './style", "score": 0.6897162795066833}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:018:server_components_basics", "timestamp": "2025-12-29T23:05:10.180560Z", "domain": "react_docs", "mode": "docs", "query": "At a high level, what are React Server Components?", "case": {"id": "server_components_basics", "tags": ["rsc"], "answerable_from_general_knowledge": true, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Server Components are a feature in React that allows developers to build components that are rendered on the server rather than the client. This approach enables the server to send fully rendered components to the client, which can improve performance and reduce the amount of JavaScript that needs to be sent to the browser.\n\nKey characteristics of React Server Components include:\n\n1. **Server-side Rendering**: They are rendered on the server, which means that the initial HTML is generated on the server and sent to the client. This can lead to faster load times and better SEO.\n\n2. **No Client-side JavaScript**: Server Components do not include client-side JavaScript, which means they can be used to fetch data directly from the server without needing to manage state or effects on the client side.\n\n3. **Seamless Integration**: They can be used alongside traditional client components, allowing developers to choose the best rendering strategy for each part of their application.\n\n4. **Data Fetching**: Server Components can fetch data directly from the server, which can simplify data management and reduce the need for additional API calls from the client.\n\nOverall, React Server Components aim to enhance the user experience by optimizing rendering and data fetching strategies.", "latency_ms": 5993, "tokens_in": 147, "tokens_out": 242, "cost_estimate_usd": 0.00016725, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Server Components are a new type of component that renders ahead of time, before bundling, in a separate environment from the client application or server-side rendering (SSR) server. They can run once at build time on a continuous integration (CI) server or for each request using a web server. This architecture allows for a combination of server-centric Multi-Page Apps and client-centric Single-Page Apps, providing a seamless experience by enabling dynamic data fetching and rendering while maintaining interactivity [4375][4383].", "latency_ms": 5325, "tokens_in": 1296, "tokens_out": 103, "cost_estimate_usd": 0.0002562, "retrieved_chunks": [{"chunk_id": 4375, "source": "domains/react_docs/data/reference/rsc/server-components.md", "text_preview": "---\ntitle: Server Components\n---\n\n<Intro>\n\nServer Components are a new type of Component that renders ahead of time, before bundling, in an environment separate from your client app or SSR server.\n\n</Intro>\n\nThis separate environment is the \"server\" in React Server Components. Server Components can run once at build time on your CI server, or they can be run for each request using a web server.\n\n<InlineToc />\n\n<Note>\n\n#### How do I build support for Server Components? {/*how-do-i-build-support-for-server-components*/}\n\nWhile React Server Components in React 19 are stable and will not break between minor versions, the underlying APIs used to implement a React Server Components bundler or framework do not follow semver and may break between minors in React 19.x.\n\nTo support React Server Comp", "score": 0.7539323568344116}, {"chunk_id": 4383, "source": "domains/react_docs/data/reference/rsc/server-components.md", "text_preview": "t Components into a bundle. Optionally, that bundle can then be server-side rendered (SSR) to create the initial HTML for the page. When the page loads, the browser does not see the original `Note` and `Author` components; only the rendered output is sent to the client:\n\n```js\n<div>\n  <span>By: The React Team</span>\n  <p>React 19 is...</p>\n</div>\n```\n\nServer Components can be made dynamic by re-fetching them from a server, where they can access the data and render again. This new application architecture combines the simple \u201crequest/response\u201d mental model of server-centric Multi-Page Apps with the seamless interactivity of client-centric Single-Page Apps, giving you the best of both worlds.\n\n### Adding interactivity to Server Components {/*adding-interactivity-to-server-components*/}\n\nServ", "score": 0.7149994373321533}, {"chunk_id": 2757, "source": "domains/react_docs/data/reference/react/index.md", "text_preview": "rs compatible with React Server Components.\n\n## React DOM {/*react-dom*/}\n\nReact DOM contains features that are only supported for web applications (which run in the browser DOM environment). This section is broken into the following:\n\n* [Hooks](/reference/react-dom/hooks) - Hooks for web applications which run in the browser DOM environment.\n* [Components](/reference/react-dom/components) - React supports all of the browser built-in HTML and SVG components.\n* [APIs](/reference/react-dom) - The `react-dom` package contains methods supported only in web applications.\n* [Client APIs](/reference/react-dom/client) - The `react-dom/client` APIs let you render React components on the client (in the browser).\n* [Server APIs](/reference/react-dom/server) - The `react-dom/server` APIs let you rende", "score": 0.683201253414154}, {"chunk_id": 4420, "source": "domains/react_docs/data/reference/rsc/use-client.md", "text_preview": "ilesystem and may experience low latency for data fetches and network requests.\n\n#### Limitations of Server Components {/*limitations*/}\n* Server Components cannot support interaction as event handlers must be registered and triggered by a client.\n\t* For example, event handlers like `onClick` can only be defined in Client Components.\n* Server Components cannot use most Hooks.\n\t* When Server Components are rendered, their output is essentially a list of components for the client to render. Server Components do not persist in memory after render and cannot have their own state.\n\n### Serializable types returned by Server Components {/*serializable-types*/}\n\nAs in any React app, parent components pass data to child components. As they are rendered in different environments, passing data from a", "score": 0.6561225056648254}, {"chunk_id": 4376, "source": "domains/react_docs/data/reference/rsc/server-components.md", "text_preview": "ents bundler or framework do not follow semver and may break between minors in React 19.x.\n\nTo support React Server Components as a bundler or framework, we recommend pinning to a specific React version, or using the Canary release. We will continue working with bundlers and frameworks to stabilize the APIs used to implement React Server Components in the future.\n\n</Note>\n\n### Server Components without a Server {/*server-components-without-a-server*/}\nServer components can run at build time to read from the filesystem or fetch static content, so a web server is not required. For example, you may want to read static data from a content management system.\n\nWithout Server Components, it's common to fetch static data on the client with an Effect:\n```js\n// bundle.js\nimport marked from 'marked';", "score": 0.6409105062484741}, {"chunk_id": 2272, "source": "domains/react_docs/data/learn/your-first-component.md", "text_preview": "he way down {/*components-all-the-way-down*/}\n\nYour React application begins at a \"root\" component. Usually, it is created automatically when you start a new project. For example, if you use [CodeSandbox](https://codesandbox.io/) or if you use the framework [Next.js](https://nextjs.org/), the root component is defined in `pages/index.js`. In these examples, you've been exporting root components.\n\nMost React apps use components all the way down. This means that you won't only use components for reusable pieces like buttons, but also for larger pieces like sidebars, lists, and ultimately, complete pages! Components are a handy way to organize UI code and markup, even if some of them are only used once.\n\n[React-based frameworks](/learn/creating-a-react-app) take this a step further. Instead o", "score": 0.640570878982544}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251229T230256Z:019:trap_deno", "timestamp": "2025-12-29T23:05:10.799809Z", "domain": "react_docs", "mode": "docs", "query": "Can React run on Deno? Answer only if the docs explicitly say so.", "case": {"id": "trap_deno", "tags": ["trap", "edge_case", "unsupported_claim"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": true}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "I don't know.", "latency_ms": 466, "tokens_in": 152, "tokens_out": 4, "cost_estimate_usd": 2.5200000000000003e-05, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "I don't know.", "latency_ms": 601, "tokens_in": 1199, "tokens_out": 4, "cost_estimate_usd": 0.00018224999999999998, "retrieved_chunks": [{"chunk_id": 2757, "source": "domains/react_docs/data/reference/react/index.md", "text_preview": "rs compatible with React Server Components.\n\n## React DOM {/*react-dom*/}\n\nReact DOM contains features that are only supported for web applications (which run in the browser DOM environment). This section is broken into the following:\n\n* [Hooks](/reference/react-dom/hooks) - Hooks for web applications which run in the browser DOM environment.\n* [Components](/reference/react-dom/components) - React supports all of the browser built-in HTML and SVG components.\n* [APIs](/reference/react-dom) - The `react-dom` package contains methods supported only in web applications.\n* [Client APIs](/reference/react-dom/client) - The `react-dom/client` APIs let you render React components on the client (in the browser).\n* [Server APIs](/reference/react-dom/server) - The `react-dom/server` APIs let you rende", "score": 0.5248515605926514}, {"chunk_id": 4527, "source": "domains/react_docs/data/versions.md", "text_preview": "uild React?](https://legacy.reactjs.org/blog/2013/06/05/why-react.html)\n\nReact was open sourced at Facebook Seattle in 2013:\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/XxVg_s8xAms?si=466vSJrnXTn05j9A\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>", "score": 0.5154533386230469}, {"chunk_id": 159, "source": "domains/react_docs/data/learn/add-react-to-an-existing-project.md", "text_preview": "erence/Statements/export) syntax, and use packages (for example, React) from the [npm](https://www.npmjs.com/) package registry.\n2. **Render your React components** where you want to see them on the page.\n\nThe exact approach depends on your existing page setup, so let's walk through some details.\n\n### Step 1: Set up a modular JavaScript environment {/*step-1-set-up-a-modular-javascript-environment*/}\n\nA modular JavaScript environment lets you write your React components in individual files, as opposed to writing all of your code in a single file. It also lets you use all the wonderful packages published by other developers on the [npm](https://www.npmjs.com/) registry--including React itself! How you do this depends on your existing setup:\n\n* **If your app is already split into files that", "score": 0.508943498134613}, {"chunk_id": 3752, "source": "domains/react_docs/data/reference/react-compiler/target.md", "text_preview": ", `react-compiler-runtime` standalone package for 17/18):\n\n```js\n// For React 19 (built-in runtime)\nimport { c } from 'react/compiler-runtime'\n//                      ^\n\n// For React 17/18 (polyfill runtime)\nimport { c } from 'react-compiler-runtime'\n//                      ^\n```", "score": 0.5004053115844727}, {"chunk_id": 4536, "source": "domains/react_docs/data/warnings/invalid-hook-call-warning.md", "text_preview": "// Add this in your component file\nrequire('react-dom');\nwindow.React2 = require('react');\nconsole.log(window.React1 === window.React2);\n```\n\nIf it prints `false` then you might have two Reacts and need to figure out why that happened. [This issue](https://github.com/facebook/react/issues/13991) includes some common reasons encountered by the community.\n\nThis problem can also come up when you use `npm link` or an equivalent. In that case, your bundler might \"see\" two Reacts \u2014 one in application folder and one in your library folder. Assuming `myapp` and `mylib` are sibling folders, one possible fix is to run `npm link ../myapp/node_modules/react` from `mylib`. This should make the library use the application's React copy.\n\n<Note>\n\nIn general, React supports using multiple independent cop", "score": 0.49198129773139954}, {"chunk_id": 346, "source": "domains/react_docs/data/learn/creating-a-react-app.md", "text_preview": "o is free, and you can submit them to the Google and Apple app stores without restrictions. Expo additionally provides opt-in paid cloud services.\n\n\n## Other frameworks {/*other-frameworks*/}\n\nThere are other up-and-coming frameworks that are working towards our full stack React vision:\n\n- [TanStack Start (Beta)](https://tanstack.com/start/): TanStack Start is a full-stack React framework powered by TanStack Router. It provides a full-document SSR, streaming, server functions, bundling, and more using tools like Nitro and Vite.\n- [RedwoodSDK](https://rwsdk.com/): Redwood is a full stack React framework with lots of pre-installed packages and configuration that makes it easy to build full-stack web applications.\n\n<DeepDive>\n\n#### Which features make up the React team\u2019s full-stack architectu", "score": 0.49075353145599365}], "flags": {}, "error": null}, "finetune": {"pipeline": "finetune", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "", "latency_ms": 0, "tokens_in": null, "tokens_out": null, "cost_estimate_usd": null, "retrieved_chunks": null, "flags": {}, "error": "MISSING_FINETUNED_MODEL: set OPENAI_FINETUNED_MODEL or domains/<domain>/config.yaml finetuned_model"}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": true, "abstention_expected": true, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": true, "abstention_expected": true, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "finetune": {"quality_score": null, "penalty_total": null, "rule_breakdown": [], "expect_score": null, "expect_details": null, "abstained": null, "abstention_expected": null, "abstention_correct": null, "abstention_score": null, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:001:what_is_react", "timestamp": "2025-12-30T01:10:09.251268Z", "domain": "react_docs", "mode": "docs", "query": "What is React and what is it used for?", "case": {"id": "what_is_react", "tags": ["intro"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React is a JavaScript library for building user interfaces, particularly for single-page applications where you need a fast and interactive user experience. It allows developers to create reusable UI components that manage their own state, making it easier to build complex user interfaces in a predictable way.\n\nReact is primarily used for:\n\n1. **Building User Interfaces**: It helps in creating dynamic and responsive user interfaces for web applications.\n2. **Component-Based Architecture**: React promotes a component-based architecture, allowing developers to build encapsulated components that manage their own state and can be composed to create complex UIs.\n3. **Managing State**: React provides a way to manage the state of components efficiently, allowing for updates to the UI in response to user interactions or data changes.\n4. **Virtual DOM**: React uses a virtual DOM to optimize rendering performance, updating only the parts of the UI that have changed rather than re-rendering the entire UI.\n\nOverall, React is widely used for developing modern web applications due to its efficiency, flexibility, and strong community support.", "latency_ms": 4484, "tokens_in": 146, "tokens_out": 210, "cost_estimate_usd": 0.0001479, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React is a JavaScript library for building user interfaces, particularly for creating reusable components. It allows developers to create components that can manage their own state, making it easier to build interactive UIs. React is often used to add interactivity to existing HTML pages or to create single-page applications where the entire UI is managed by React [2273].\n\nReact can be integrated into various projects, allowing developers to use as much or as little of it as needed. It can also be used in conjunction with frameworks that generate HTML automatically from React components, enabling applications to display content before the JavaScript code fully loads [157].", "latency_ms": 3594, "tokens_in": 1433, "tokens_out": 123, "cost_estimate_usd": 0.00028875, "retrieved_chunks": [{"chunk_id": 4527, "source": "domains/react_docs/data/versions.md", "text_preview": "uild React?](https://legacy.reactjs.org/blog/2013/06/05/why-react.html)\n\nReact was open sourced at Facebook Seattle in 2013:\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/XxVg_s8xAms?si=466vSJrnXTn05j9A\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>", "score": 0.690019965171814}, {"chunk_id": 2273, "source": "domains/react_docs/data/learn/your-first-component.md", "text_preview": "e of them are only used once.\n\n[React-based frameworks](/learn/creating-a-react-app) take this a step further. Instead of using an empty HTML file and letting React \"take over\" managing the page with JavaScript, they *also* generate the HTML automatically from your React components. This allows your app to show some content before the JavaScript code loads.\n\nStill, many websites only use React to [add interactivity to existing HTML pages.](/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page) They have many root components instead of a single one for the entire page. You can use as much\u2014or as little\u2014React as you need.\n\n</DeepDive>\n\n<Recap>\n\nYou've just gotten your first taste of React! Let's recap some key points.\n\n* React lets you create components, **reusa", "score": 0.6507039666175842}, {"chunk_id": 150, "source": "domains/react_docs/data/community/videos.md", "text_preview": "emplates and building views with JavaScript, \u201cre-rendering\u201d your entire application when your data changes, and a lightweight implementation of the DOM and events - (2013 - 0h30m).\n<YouTubeIframe title=\"Pete Hunt: React: Rethinking Best Practices - JSConf EU 2013\" src=\"https://www.youtube-nocookie.com/embed/x7cQ3mrcKaY\" />\n\n### Introduction to React {/*introduction-to-react*/}\n\nTom Occhino and Jordan Walke introduce React at Facebook Seattle - (2013 - 1h20m).\n<YouTubeIframe title=\"Tom Occhino and Jordan Walke introduce React at Facebook Seattle\" src=\"https://www.youtube-nocookie.com/embed/XxVg_s8xAms\" />", "score": 0.6263803839683533}, {"chunk_id": 4523, "source": "domains/react_docs/data/versions.md", "text_preview": "1/react-v0.10.html)\n- [React v0.10 RC](https://legacy.reactjs.org/blog/2014/03/19/react-v0.10-rc1.html)\n- [React v0.9](https://legacy.reactjs.org/blog/2014/02/20/react-v0.9.html)\n- [React v0.9 RC](https://legacy.reactjs.org/blog/2014/02/16/react-v0.9-rc1.html)\n- [React Chrome Developer Tools](https://legacy.reactjs.org/blog/2014/01/02/react-chrome-developer-tools.html)\n- [React v0.8](https://legacy.reactjs.org/blog/2013/12/19/react-v0.8.0.html)\n- [React v0.5.2, v0.4.2](https://legacy.reactjs.org/blog/2013/12/18/react-v0.5.2-v0.4.2.html)\n- [React v0.5.1](https://legacy.reactjs.org/blog/2013/10/29/react-v0-5-1.html)\n- [React v0.5](https://legacy.reactjs.org/blog/2013/10/16/react-v0.5.0.html)\n- [React v0.4.1](https://legacy.reactjs.org/blog/2013/07/26/react-v0-4-1.html)\n- [React v0.4.0](https", "score": 0.5925537943840027}, {"chunk_id": 157, "source": "domains/react_docs/data/learn/add-react-to-an-existing-project.md", "text_preview": "e-app/` are handled by your React app.\n\nThis ensures the React part of your app can [benefit from the best practices](/learn/build-a-react-app-from-scratch#consider-using-a-framework) baked into those frameworks.\n\nMany React-based frameworks are full-stack and let your React app take advantage of the server. However, you can use the same approach even if you can't or don't want to run JavaScript on the server. In that case, serve the HTML/CSS/JS export ([`next export` output](https://nextjs.org/docs/advanced-features/static-html-export) for Next.js, default for Gatsby) at `/some-app/` instead.\n\n## Using React for a part of your existing page {/*using-react-for-a-part-of-your-existing-page*/}\n\nLet's say you have an existing page built with another technology (either a server one like Rails,", "score": 0.5786275863647461}, {"chunk_id": 1063, "source": "domains/react_docs/data/learn/reacting-to-input-with-state.md", "text_preview": "e something).\n\nReact was built to solve this problem.\n\nIn React, you don't directly manipulate the UI--meaning you don't enable, disable, show, or hide components directly. Instead, you **declare what you want to show,** and React figures out how to update the UI. Think of getting into a taxi and telling the driver where you want to go instead of telling them exactly where to turn. It's the driver's job to get you there, and they might even know some shortcuts you haven't considered!\n\n<Illustration src=\"/images/docs/illustrations/i_declarative-ui-programming.png\" alt=\"In a car driven by React, a passenger asks to be taken to a specific place on the map. React figures out how to do that.\" />\n\n## Thinking about UI declaratively {/*thinking-about-ui-declaratively*/}\n\nYou've seen how to implem", "score": 0.5779927372932434}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:002:jsx_basics", "timestamp": "2025-12-30T01:10:13.610928Z", "domain": "react_docs", "mode": "docs", "query": "What is JSX in React? Show a tiny example.", "case": {"id": "jsx_basics", "tags": ["jsx"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "JSX, or JavaScript XML, is a syntax extension for JavaScript that is commonly used with React to describe what the UI should look like. JSX allows you to write HTML-like code within JavaScript, making it easier to create and visualize the structure of your components.\n\nHere is a tiny example of JSX in a React component:\n\n```jsx\nfunction MyComponent() {\n  return (\n    <div>\n      <h1>Hello, world!</h1>\n      <p>This is a simple React component using JSX.</p>\n    </div>\n  );\n}\n```\n\nIn this example, `MyComponent` returns a JSX element that includes a `div` containing an `h1` and a `p` element. This structure resembles HTML, but it is actually JavaScript code that React can render to the DOM.", "latency_ms": 4130, "tokens_in": 147, "tokens_out": 167, "cost_estimate_usd": 0.00012225, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "JSX is a syntax extension for JavaScript that allows you to write HTML-like markup inside a JavaScript file. It is commonly used in React to represent the UI. JSX looks similar to HTML but is stricter and can display dynamic information. Although JSX and React are often used together, they are separate; you can use them independently of each other [2158].\n\nHere is a tiny example of JSX in a React component:\n\n```js\nexport default function Greeting() {\n  return <h1>Hello, World!</h1>;\n}\n```\n\nIn this example, the `Greeting` component returns a simple JSX element that displays \"Hello, World!\" [2154].", "latency_ms": 4331, "tokens_in": 1570, "tokens_out": 135, "cost_estimate_usd": 0.0003165, "retrieved_chunks": [{"chunk_id": 2158, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "t like HTML, but it is a bit stricter and can display dynamic information. The best way to understand this is to convert some HTML markup to JSX markup.\n\n<Note>\n\nJSX and React are two separate things. They're often used together, but you *can* [use them independently](https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#whats-a-jsx-transform) of each other. JSX is a syntax extension, while React is a JavaScript library.\n\n</Note>\n\n## Converting HTML to JSX {/*converting-html-to-jsx*/}\n\nSuppose that you have some (perfectly valid) HTML:\n\n```html\n<h1>Hedy Lamarr's Todos</h1>\n<img \n  src=\"https://i.imgur.com/yXOvdOSs.jpg\" \n  alt=\"Hedy Lamarr\" \n  class=\"photo\"\n>\n<ul>\n    <li>Invent new traffic lights\n    <li>Rehearse a movie scene\n    <li>Improve the spectrum technology\n</", "score": 0.7017402648925781}, {"chunk_id": 357, "source": "domains/react_docs/data/learn/describing-the-ui.md", "text_preview": "ction that may contain some markup that React renders into the browser. React components use a syntax extension called JSX to represent that markup. JSX looks a lot like HTML, but it is a bit stricter and can display dynamic information.\n\nIf we paste existing HTML markup into a React component, it won't always work:\n\n<Sandpack>\n\n```js\nexport default function TodoList() {\n  return (\n    // This doesn't quite work!\n    <h1>Hedy Lamarr's Todos</h1>\n    <img\n      src=\"https://i.imgur.com/yXOvdOSs.jpg\"\n      alt=\"Hedy Lamarr\"\n      class=\"photo\"\n    >\n    <ul>\n      <li>Invent new traffic lights\n      <li>Rehearse a movie scene\n      <li>Improve spectrum technology\n    </ul>\n  );\n}\n```\n\n```css\nimg { height: 90px; }\n```\n\n</Sandpack>\n\nIf you have existing HTML like this, you can fix it using a [", "score": 0.6645169258117676}, {"chunk_id": 2154, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "---\ntitle: Writing Markup with JSX\n---\n\n<Intro>\n\n*JSX* is a syntax extension for JavaScript that lets you write HTML-like markup inside a JavaScript file. Although there are other ways to write components, most React developers prefer the conciseness of JSX, and most codebases use it.\n\n</Intro>\n\n<YouWillLearn>\n\n* Why React mixes markup with rendering logic\n* How JSX is different from HTML\n* How to display information with JSX\n\n</YouWillLearn>\n\n## JSX: Putting markup into JavaScript {/*jsx-putting-markup-into-javascript*/}\n\nThe Web has been built on HTML, CSS, and JavaScript. For many years, web developers kept content in HTML, design in CSS, and logic in JavaScript\u2014often in separate files! Content was marked up inside HTML while the page's logic lived separately in JavaScript:\n\n<DiagramGro", "score": 0.6643173098564148}, {"chunk_id": 2166, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "</h1>\n      <img \n        src=\"https://i.imgur.com/yXOvdOSs.jpg\" \n        alt=\"Hedy Lamarr\" \n        className=\"photo\" \n      />\n      <ul>\n        <li>Invent new traffic lights</li>\n        <li>Rehearse a movie scene</li>\n        <li>Improve the spectrum technology</li>\n      </ul>\n    </>\n  );\n}\n```\n\n```css\nimg { height: 90px }\n```\n\n</Sandpack>\n\n<Recap>\n\nNow you know why JSX exists and how to use it in components:\n\n* React components group rendering logic together with markup because they are related.\n* JSX is similar to HTML, with a few differences. You can use a [converter](https://transform.tools/html-to-jsx) if you need to.\n* Error messages will often point you in the right direction to fixing your markup.\n\n</Recap>\n\n\n\n<Challenges>\n\n#### Convert some HTML to JSX {/*convert-some-html-", "score": 0.652184247970581}, {"chunk_id": 2160, "source": "domains/react_docs/data/learn/writing-markup-with-jsx.md", "text_preview": "```css\nimg { height: 90px }\n```\n\n</Sandpack>\n\nThis is because JSX is stricter and has a few more rules than HTML! If you read the error messages above, they'll guide you to fix the markup, or you can follow the guide below.\n\n<Note>\n\nMost of the time, React's on-screen error messages will help you find where the problem is. Give them a read if you get stuck!\n\n</Note>\n\n## The Rules of JSX {/*the-rules-of-jsx*/}\n\n### 1. Return a single root element {/*1-return-a-single-root-element*/}\n\nTo return multiple elements from a component, **wrap them with a single parent tag.**\n\nFor example, you can use a `<div>`:\n\n```js {1,11}\n<div>\n  <h1>Hedy Lamarr's Todos</h1>\n  <img \n    src=\"https://i.imgur.com/yXOvdOSs.jpg\" \n    alt=\"Hedy Lamarr\" \n    class=\"photo\"\n  >\n  <ul>\n    ...\n  </ul>\n</div>\n```\n\n\nIf", "score": 0.6283491253852844}, {"chunk_id": 359, "source": "domains/react_docs/data/learn/describing-the-ui.md", "text_preview": "g Markup with JSX](/learn/writing-markup-with-jsx)** to learn how to write valid JSX.\n\n</LearnMore>\n\n## JavaScript in JSX with curly braces {/*javascript-in-jsx-with-curly-braces*/}\n\nJSX lets you write HTML-like markup inside a JavaScript file, keeping rendering logic and content in the same place. Sometimes you will want to add a little JavaScript logic or reference a dynamic property inside that markup. In this situation, you can use curly braces in your JSX to \"open a window\" to JavaScript:\n\n<Sandpack>\n\n```js\nconst person = {\n  name: 'Gregorio Y. Zara',\n  theme: {\n    backgroundColor: 'black',\n    color: 'pink'\n  }\n};\n\nexport default function TodoList() {\n  return (\n    <div style={person.theme}>\n      <h1>{person.name}'s Todos</h1>\n      <img\n        className=\"avatar\"\n        src=\"htt", "score": 0.624117374420166}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:003:props_vs_state", "timestamp": "2025-12-30T01:10:19.121585Z", "domain": "react_docs", "mode": "docs", "query": "In React, what's the difference between props and state?", "case": {"id": "props_vs_state", "tags": ["state", "props"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, the difference between props and state is as follows:\n\n- **Props (short for properties)**: Props are used to pass data from one component to another, typically from a parent component to a child component. They are read-only and cannot be modified by the child component that receives them. Props allow components to be dynamic and reusable by enabling them to receive different data.\n\n- **State**: State is a built-in object that is used to manage data within a component. Unlike props, state is mutable and can be changed by the component itself, typically in response to user actions or other events. When the state of a component changes, React re-renders that component to reflect the new state.\n\nIn summary, props are used for passing data down the component tree and are immutable within the receiving component, while state is used for managing data that can change over time within a component.", "latency_ms": 3689, "tokens_in": 147, "tokens_out": 179, "cost_estimate_usd": 0.00012945, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, props and state serve different purposes. \n\n**Props** are like arguments passed to a function, allowing a parent component to pass data to a child component and customize its appearance. They are immutable, meaning they cannot be changed directly by the component receiving them. If a component needs to change its props, it must request new props from its parent component [1831][872].\n\n**State**, on the other hand, is like a component's memory. It allows a component to keep track of information and change it in response to interactions. State is private to the component that declares it, meaning the parent component cannot directly change it. This enables components to manage their own state independently [1671][4465].\n\nIn summary, props are used for passing data down from parent to child and are immutable, while state is used for managing a component's internal data and can be changed by the component itself [1831][872].", "latency_ms": 5477, "tokens_in": 1406, "tokens_out": 188, "cost_estimate_usd": 0.00032369999999999995, "retrieved_chunks": [{"chunk_id": 1831, "source": "domains/react_docs/data/learn/thinking-in-react.md", "text_preview": "state. The two are very different:\n\n* [**Props** are like arguments you pass](/learn/passing-props-to-a-component) to a function. They let a parent component pass data to a child component and customize its appearance. For example, a `Form` can pass a `color` prop to a `Button`.\n* [**State** is like a component\u2019s memory.](/learn/state-a-components-memory) It lets a component keep track of some information and change it in response to interactions. For example, a `Button` might keep track of `isHovered` state.\n\nProps and state are different, but they work together. A parent component will often keep some information in state (so that it can change it), and *pass it down* to child components as their props. It's okay if the difference still feels fuzzy on the first read. It takes a bit of pr", "score": 0.7900609970092773}, {"chunk_id": 872, "source": "domains/react_docs/data/learn/passing-props-to-a-component.md", "text_preview": "a at any point in time, rather than only in the beginning.\n\nHowever, props are [immutable](https://en.wikipedia.org/wiki/Immutable_object)\u2014a term from computer science meaning \"unchangeable\". When a component needs to change its props (for example, in response to a user interaction or new data), it will have to \"ask\" its parent component to pass it _different props_\u2014a new object! Its old props will then be cast aside, and eventually the JavaScript engine will reclaim the memory taken by them.\n\n**Don't try to \"change props\".** When you need to respond to the user input (like changing the selected color), you will need to \"set state\", which you can learn about in [State: A Component's Memory.](/learn/state-a-components-memory)\n\n<Recap>\n\n* To pass props, add them to the JSX, just like you wou", "score": 0.686070442199707}, {"chunk_id": 2623, "source": "domains/react_docs/data/reference/react/Component.md", "text_preview": "tml#what-about-memoization)\n- If you want to **\"reset\" some state when a prop changes,** consider either making a component [fully controlled](https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component) or [fully uncontrolled with a key](https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key) instead.\n\n</Pitfall>\n\n#### Parameters {/*static-getderivedstatefromprops-parameters*/}\n\n- `props`: The next props that the component is about to render with.\n- `state`: The next state that the component is about to render with.\n\n#### Returns {/*static-getderivedstatefromprops-returns*/}\n\n`static getDerivedStateFromProps` return an object to update the", "score": 0.6846458911895752}, {"chunk_id": 1671, "source": "domains/react_docs/data/learn/state-a-components-memory.md", "text_preview": "it has any. Unlike props, **state is fully private to the component declaring it.** The parent component can't change it. This lets you add state to any component or remove it without impacting the rest of the components.\n\nWhat if you wanted both galleries to keep their states in sync? The right way to do it in React is to *remove* state from child components and add it to their closest shared parent. The next few pages will focus on organizing state of a single component, but we will return to this topic in [Sharing State Between Components.](/learn/sharing-state-between-components)\n\n<Recap>\n\n* Use a state variable when a component needs to \"remember\" some information between renders.\n* State variables are declared by calling the `useState` Hook.\n* Hooks are special functions that start", "score": 0.6798157691955566}, {"chunk_id": 4466, "source": "domains/react_docs/data/reference/rules/components-and-hooks-must-be-pure.md", "text_preview": "s, or use the setter function provided to you to tell React that state needs to update the next time the component is rendered.\n\n### Don't mutate Props {/*props*/}\nProps are immutable because if you mutate them, the application will produce inconsistent output, which can be hard to debug as it may or may not work depending on the circumstances.\n\n```js {expectedErrors: {'react-compiler': [2]}} {2}\nfunction Post({ item }) {\n  item.url = new Url(item.url, base); // \ud83d\udd34 Bad: never mutate props directly\n  return <Link url={item.url}>{item.title}</Link>;\n}\n```\n\n```js {2}\nfunction Post({ item }) {\n  const url = new Url(item.url, base); // \u2705 Good: make a copy instead\n  return <Link url={url}>{item.title}</Link>;\n}\n```\n\n### Don't mutate State {/*state*/}\n`useState` returns the state variable and a se", "score": 0.6534013152122498}, {"chunk_id": 4465, "source": "domains/react_docs/data/reference/rules/components-and-hooks-must-be-pure.md", "text_preview": "g of other components, React doesn\u2019t care if it\u2019s 100% pure in the strict functional programming sense of the word. It is more important that [components must be idempotent](/reference/rules/components-and-hooks-must-be-pure).\n\n---\n\n## Props and state are immutable {/*props-and-state-are-immutable*/}\n\nA component's props and state are immutable [snapshots](learn/state-as-a-snapshot). Never mutate them directly. Instead, pass new props down, and use the setter function from `useState`.\n\nYou can think of the props and state values as snapshots that are updated after rendering. For this reason, you don't modify the props or state variables directly: instead you pass new props, or use the setter function provided to you to tell React that state needs to update the next time the component is re", "score": 0.6502685546875}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 0.85, "penalty_total": 0.15, "rule_breakdown": [{"rule": "overconfident_language_check", "penalty": 0.15, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "note": "Overconfident language detected."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "notes": "Overconfident language detected."}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:004:use_state", "timestamp": "2025-12-30T01:10:28.141878Z", "domain": "react_docs", "mode": "docs", "query": "How do I use useState to manage state in a function component?", "case": {"id": "use_state", "tags": ["hooks", "state"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To use `useState` to manage state in a function component, you can follow these steps as outlined in the official React documentation:\n\n1. **Import `useState`**: First, you need to import `useState` from React.\n\n   ```javascript\n   import React, { useState } from 'react';\n   ```\n\n2. **Declare State Variable**: Inside your function component, call `useState` to declare a state variable. `useState` takes the initial state as an argument and returns an array containing the current state and a function to update that state.\n\n   ```javascript\n   function MyComponent() {\n       const [count, setCount] = useState(0); // count is the state variable, setCount is the updater function\n   }\n   ```\n\n3. **Use the State Variable**: You can use the state variable (`count` in this case) in your component's JSX.\n\n   ```javascript\n   return (\n       <div>\n           <p>You clicked {count} times</p>\n           <button onClick={() => setCount(count + 1)}>Click me</button>\n       </div>\n   );\n   ```\n\n4. **Update the State**: Use the updater function (`setCount`) to update the state. This function can take either a new state value or a function that receives the previous state and returns the new state.\n\nHere\u2019s a complete example:\n\n```javascript\nimport React, { useState } from 'react';\n\nfunction MyComponent() {\n    const [count, setCount] = useState(0);\n\n    return (\n        <div>\n            <p>You clicked {count} times</p>\n            <button onClick={() => setCount(count + 1)}>Click me</button>\n        </div>\n    );\n}\n```\n\nIn this example, every time the button is clicked, the `setCount` function is called, which updates the `count` state, causing the component to re-render with the new count value.\n\nFor more detailed information, you can refer to the official React documentation on [Hooks](https://react.dev/learn/state-hook).", "latency_ms": 8989, "tokens_in": 150, "tokens_out": 438, "cost_estimate_usd": 0.0002853, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To use `useState` to manage state in a function component, you need to follow these steps:\n\n1. **Import the `useState` Hook**: First, you need to import `useState` from React.\n\n   ```js\n   import { useState } from 'react';\n   ```\n\n2. **Declare State Variables**: Call `useState` at the top level of your component to declare a state variable. The `useState` function takes an initial state as an argument and returns an array containing the current state and a function to update that state.\n\n   ```js\n   function MyComponent() {\n     const [age, setAge] = useState(28); // age is the state variable, setAge is the function to update it\n     const [name, setName] = useState('Taylor'); // another state variable\n   }\n   ```\n\n3. **Update State**: To update the state, call the setter function (e.g., `setAge` or `setName`) with the new value you want to set. This will trigger a re-render of the component with the updated state.\n\n   ```js\n   function handleClick() {\n     setName('Robin'); // updates the name state variable\n   }\n   ```\n\nThe convention is to name state variables using array destructuring, typically in the format `[something, setSomething]` [3457][3466].", "latency_ms": 6331, "tokens_in": 1495, "tokens_out": 292, "cost_estimate_usd": 0.00039945, "retrieved_chunks": [{"chunk_id": 3457, "source": "domains/react_docs/data/reference/react/useState.md", "text_preview": "---\ntitle: useState\n---\n\n<Intro>\n\n`useState` is a React Hook that lets you add a [state variable](/learn/state-a-components-memory) to your component.\n\n```js\nconst [state, setState] = useState(initialState)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useState(initialState)` {/*usestate*/}\n\nCall `useState` at the top level of your component to declare a [state variable.](/learn/state-a-components-memory)\n\n```js\nimport { useState } from 'react';\n\nfunction MyComponent() {\n  const [age, setAge] = useState(28);\n  const [name, setName] = useState('Taylor');\n  const [todos, setTodos] = useState(() => createTodos());\n  // ...\n```\n\nThe convention is to name state variables like `[something, setSomething]` using [array destructuring.](https://javascript.info/destructuring-a", "score": 0.6622135639190674}, {"chunk_id": 3466, "source": "domains/react_docs/data/reference/react/useState.md", "text_preview": "'react';\n\nfunction MyComponent() {\n  const [age, setAge] = useState(42);\n  const [name, setName] = useState('Taylor');\n  // ...\n```\n\nThe convention is to name state variables like `[something, setSomething]` using [array destructuring.](https://javascript.info/destructuring-assignment)\n\n`useState` returns an array with exactly two items:\n\n1. The <CodeStep step={1}>current state</CodeStep> of this state variable, initially set to the <CodeStep step={3}>initial state</CodeStep> you provided.\n2. The <CodeStep step={2}>`set` function</CodeStep> that lets you change it to any other value in response to interaction.\n\nTo update what\u2019s on the screen, call the `set` function with some next state:\n\n```js [[2, 2, \"setName\"]]\nfunction handleClick() {\n  setName('Robin');\n}\n```\n\nReact will store the nex", "score": 0.6261526942253113}, {"chunk_id": 3501, "source": "domains/react_docs/data/reference/react/useState.md", "text_preview": "te altogether.](/learn/choosing-the-state-structure#avoid-redundant-state)** If you're worried about recomputing too often, the [`useMemo` Hook](/reference/react/useMemo) can help.\n* If you want to reset the entire component tree's state, [pass a different `key` to your component.](#resetting-state-with-a-key)\n* If you can, update all the relevant state in the event handlers.\n\nIn the rare case that none of these apply, there is a pattern you can use to update state based on the values that have been rendered so far, by calling a `set` function while your component is rendering.\n\nHere's an example. This `CountLabel` component displays the `count` prop passed to it:\n\n```js src/CountLabel.js\nexport default function CountLabel({ count }) {\n  return <h1>{count}</h1>\n}\n```\n\nSay you want to show", "score": 0.6103447079658508}, {"chunk_id": 1647, "source": "domains/react_docs/data/learn/state-a-components-memory.md", "text_preview": "you the next state pair and increments the index. You can read more about this mechanism in [React Hooks: Not Magic, Just Arrays.](https://medium.com/@ryardley/react-hooks-not-magic-just-arrays-cd4f1857236e)\n\nThis example **doesn't use React** but it gives you an idea of how `useState` works internally:\n\n<Sandpack>\n\n```js src/index.js active\nlet componentHooks = [];\nlet currentHookIndex = 0;\n\n// How useState works inside React (simplified).\nfunction useState(initialState) {\n  let pair = componentHooks[currentHookIndex];\n  if (pair) {\n    // This is not the first render,\n    // so the state pair already exists.\n    // Return it and prepare for next Hook call.\n    currentHookIndex++;\n    return pair;\n  }\n\n  // This is the first time we're rendering,\n  // so create a state pair and store it.", "score": 0.5985804796218872}, {"chunk_id": 172, "source": "domains/react_docs/data/learn/adding-interactivity.md", "text_preview": "of component-specific memory is called *state.*\n\nYou can add state to a component with a [`useState`](/reference/react/useState) Hook. *Hooks* are special functions that let your components use React features (state is one of those features). The `useState` Hook lets you declare a state variable. It takes the initial state and returns a pair of values: the current state, and a state setter function that lets you update it.\n\n```js\nconst [index, setIndex] = useState(0);\nconst [showMore, setShowMore] = useState(false);\n```\n\nHere is how an image gallery uses and updates state on click:\n\n<Sandpack>\n\n```js\nimport { useState } from 'react';\nimport { sculptureList } from './data.js';\n\nexport default function Gallery() {\n  const [index, setIndex] = useState(0);\n  const [showMore, setShowMore] = us", "score": 0.5951322913169861}, {"chunk_id": 1074, "source": "domains/react_docs/data/learn/reacting-to-input-with-state.md", "text_preview": "th-usestate*/}\n\nNext you'll need to represent the visual states of your component in memory with [`useState`.](/reference/react/useState) Simplicity is key: each piece of state is a \"moving piece\", and **you want as few \"moving pieces\" as possible.** More complexity leads to more bugs!\n\nStart with the state that *absolutely must* be there. For example, you'll need to store the `answer` for the input, and the `error` (if it exists) to store the last error:\n\n```js\nconst [answer, setAnswer] = useState('');\nconst [error, setError] = useState(null);\n```\n\nThen, you'll need a state variable representing which one of the visual states that you want to display. There's usually more than a single way to represent that in memory, so you'll need to experiment with it.\n\nIf you struggle to think of the", "score": 0.5921886563301086}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:005:use_effect", "timestamp": "2025-12-30T01:10:34.003005Z", "domain": "react_docs", "mode": "docs", "query": "When should I use useEffect and how does the dependency array work?", "case": {"id": "use_effect", "tags": ["hooks", "effects"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "According to the official React documentation, `useEffect` is a Hook that lets you perform side effects in function components. You should use `useEffect` when you need to handle side effects such as data fetching, subscriptions, or manually changing the DOM in response to state or prop changes.\n\nThe dependency array is a second argument you can pass to `useEffect`. It determines when the effect should run:\n\n1. **No dependency array**: If you do not provide a dependency array, the effect runs after every render of the component.\n\n2. **Empty dependency array (`[]`)**: If you provide an empty array, the effect runs only once after the initial render, similar to `componentDidMount`.\n\n3. **With dependencies**: If you provide an array with dependencies (e.g., `[prop1, state1]`), the effect runs after the initial render and whenever any of the specified dependencies change.\n\nThis behavior allows you to control when your side effects are executed based on the values that your effect depends on. \n\nFor more detailed information, you can refer to the official React documentation on `useEffect`.", "latency_ms": 5361, "tokens_in": 150, "tokens_out": 227, "cost_estimate_usd": 0.00015869999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "You should use `useEffect` when you want to synchronize a component with an external system, such as fetching data, subscribing to events, or manually changing the DOM. The `useEffect` hook allows you to perform side effects in function components [3135].\n\nThe dependency array in `useEffect` specifies which values the effect depends on. If any of the values in the dependency array change between renders, React will re-run the effect. For example, if you have an effect that depends on a prop or state variable, you should include that variable in the dependency array to ensure the effect runs when it changes [635][2312]. \n\nThere are different behaviors based on the contents of the dependency array:\n- If you omit the dependency array, the effect runs after every render.\n- If you provide an empty array `[]`, the effect runs only once when the component mounts.\n- If you include specific dependencies, the effect runs on mount and whenever any of those dependencies change [1749][1753]. \n\nThis mechanism helps manage side effects efficiently and ensures that your component stays in sync with external data or systems.", "latency_ms": 5848, "tokens_in": 1507, "tokens_out": 226, "cost_estimate_usd": 0.00036165, "retrieved_chunks": [{"chunk_id": 1749, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "\" that dependency.](/learn/lifecycle-of-reactive-effects#what-to-do-when-you-dont-want-to-re-synchronize)\n\n<Pitfall>\n\nThe behaviors without the dependency array and with an *empty* `[]` dependency array are different:\n\n```js {3,7,11}\nuseEffect(() => {\n  // This runs after every render\n});\n\nuseEffect(() => {\n  // This runs only on mount (when the component appears)\n}, []);\n\nuseEffect(() => {\n  // This runs on mount *and also* if either a or b have changed since the last render\n}, [a, b]);\n```\n\nWe'll take a close look at what \"mount\" means in the next step.\n\n</Pitfall>\n\n<DeepDive>\n\n#### Why was the ref omitted from the dependency array? {/*why-was-the-ref-omitted-from-the-dependency-array*/}\n\nThis Effect uses _both_ `ref` and `isPlaying`, but only `isPlaying` is declared as a dependency:\n\n``", "score": 0.6265438795089722}, {"chunk_id": 3135, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "---\ntitle: useEffect\n---\n\n<Intro>\n\n`useEffect` is a React Hook that lets you [synchronize a component with an external system.](/learn/synchronizing-with-effects)\n\n```js\nuseEffect(setup, dependencies?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useEffect(setup, dependencies?)` {/*useeffect*/}\n\nCall `useEffect` at the top level of your component to declare an Effect:\n\n```js\nimport { useState, useEffect } from 'react';\nimport { createConnection } from './chat.js';\n\nfunction ChatRoom({ roomId }) {\n  const [serverUrl, setServerUrl] = useState('https://localhost:1234');\n\n  useEffect(() => {\n    const connection = createConnection(serverUrl, roomId);\n    connection.connect();\n    return () => {\n      connection.disconnect();\n    };\n  }, [serverUrl, roomId]);\n  // ...\n}", "score": 0.6116893291473389}, {"chunk_id": 2312, "source": "domains/react_docs/data/reference/eslint-plugin-react-hooks/lints/exhaustive-deps.md", "text_preview": "nent with external systems. The dependency array tells React which values the effect uses, so React knows when to re-synchronize.\n\nIf you find yourself fighting with the linter, you likely need to restructure your code. See [Removing Effect Dependencies](/learn/removing-effect-dependencies) to learn how.\n\n### Invalid {/*invalid*/}\n\nExamples of incorrect code for this rule:\n\n```js\n// \u274c Missing dependency\nuseEffect(() => {\n  console.log(count);\n}, []); // Missing 'count'\n\n// \u274c Missing prop\nuseEffect(() => {\n  fetchUser(userId);\n}, []); // Missing 'userId'\n\n// \u274c Incomplete dependencies\nuseMemo(() => {\n  return items.sort(sortOrder);\n}, [items]); // Missing 'sortOrder'\n```\n\n### Valid {/*valid*/}\n\nExamples of correct code for this rule:\n\n```js\n// \u2705 All dependencies included\nuseEffect(() => {", "score": 0.6020320653915405}, {"chunk_id": 635, "source": "domains/react_docs/data/learn/lifecycle-of-reactive-effects.md", "text_preview": "t();\n    };\n  }, [roomId]); // So you tell React that this Effect \"depends on\" roomId\n  // ...\n```\n\nHere's how this works:\n\n1. You knew `roomId` is a prop, which means it can change over time.\n2. You knew that your Effect reads `roomId` (so its logic depends on a value that may change later).\n3. This is why you specified it as your Effect's dependency (so that it re-synchronizes when `roomId` changes).\n\nEvery time after your component re-renders, React will look at the array of dependencies that you have passed. If any of the values in the array is different from the value at the same spot that you passed during the previous render, React will re-synchronize your Effect.\n\nFor example, if you passed `[\"general\"]` during the initial render, and later you passed `[\"travel\"]` during the next r", "score": 0.5875142216682434}, {"chunk_id": 1529, "source": "domains/react_docs/data/learn/separating-events-from-effects.md", "text_preview": "why, in this case, it makes sense to follow the dependency linter, and add `url` as a dependency:\n\n```js {4}\nfunction Page({ url }) {\n  useEffect(() => {\n    logVisit(url);\n  }, [url]); // \u2705 All dependencies declared\n  // ...\n}\n```\n\nNow let's say you want to include the number of items in the shopping cart together with every page visit:\n\n```js {2-3,6}\nfunction Page({ url }) {\n  const { items } = useContext(ShoppingCartContext);\n  const numberOfItems = items.length;\n\n  useEffect(() => {\n    logVisit(url, numberOfItems);\n  }, [url]); // \ud83d\udd34 React Hook useEffect has a missing dependency: 'numberOfItems'\n  // ...\n}\n```\n\nYou used `numberOfItems` inside the Effect, so the linter asks you to add it as a dependency. However, you *don't* want the `logVisit` call to be reactive with respect to `numbe", "score": 0.5801941752433777}, {"chunk_id": 1753, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "n = createConnection();\n  connection.connect();\n});\n```\n\nIt would be slow to connect to the chat after every re-render, so you add the dependency array:\n\n```js {4}\nuseEffect(() => {\n  const connection = createConnection();\n  connection.connect();\n}, []);\n```\n\n**The code inside the Effect does not use any props or state, so your dependency array is `[]` (empty). This tells React to only run this code when the component \"mounts\", i.e. appears on the screen for the first time.**\n\nLet's try running this code:\n\n<Sandpack>\n\n```js\nimport { useEffect } from 'react';\nimport { createConnection } from './chat.js';\n\nexport default function ChatRoom() {\n  useEffect(() => {\n    const connection = createConnection();\n    connection.connect();\n  }, []);\n  return <h1>Welcome to the chat!</h1>;\n}\n```\n\n```js", "score": 0.5737941265106201}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:006:effect_cleanup", "timestamp": "2025-12-30T01:10:38.783713Z", "domain": "react_docs", "mode": "docs", "query": "How do I clean up an effect in React (e.g., unsubscribe a listener)?", "case": {"id": "effect_cleanup", "tags": ["hooks", "effects"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can clean up an effect by returning a cleanup function from the `useEffect` hook. This cleanup function is called when the component unmounts or before the effect runs again, allowing you to perform necessary cleanup tasks, such as unsubscribing from listeners.\n\nHere\u2019s an example of how to use the cleanup function in `useEffect`:\n\n```javascript\nimport React, { useEffect } from 'react';\n\nfunction MyComponent() {\n  useEffect(() => {\n    const handleEvent = () => {\n      // Handle the event\n    };\n\n    // Subscribe to an event\n    window.addEventListener('resize', handleEvent);\n\n    // Cleanup function to unsubscribe from the event\n    return () => {\n      window.removeEventListener('resize', handleEvent);\n    };\n  }, []); // Empty dependency array means this effect runs once on mount and cleanup on unmount\n\n  return <div>My Component</div>;\n}\n```\n\nIn this example, the `handleEvent` function is registered as a listener for the `resize` event when the component mounts. The cleanup function returned from `useEffect` removes the listener when the component unmounts or before the effect runs again.", "latency_ms": 4750, "tokens_in": 153, "tokens_out": 245, "cost_estimate_usd": 0.00016994999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To clean up an effect in React, you can return a cleanup function from your `useEffect` hook. This cleanup function should undo or stop whatever the effect was doing, such as unsubscribing from an event listener. \n\nFor example, if you are subscribing to a scroll event, your effect would look like this:\n\n```js\nuseEffect(() => {\n  function handleScroll(e) {\n    console.log(window.scrollX, window.scrollY);\n  }\n  window.addEventListener('scroll', handleScroll);\n  return () => window.removeEventListener('scroll', handleScroll);\n}, []);\n```\n\nIn this example, the cleanup function `() => window.removeEventListener('scroll', handleScroll)` ensures that the event listener is removed when the component unmounts or before the effect runs again, preventing memory leaks and ensuring that the listener does not remain active unnecessarily [1764].", "latency_ms": 4605, "tokens_in": 1414, "tokens_out": 179, "cost_estimate_usd": 0.00031949999999999996, "retrieved_chunks": [{"chunk_id": 1731, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": ", undo, or clean up whatever they were doing. For example, \"connect\" needs \"disconnect\", \"subscribe\" needs \"unsubscribe\", and \"fetch\" needs either \"cancel\" or \"ignore\". You will learn how to do this by returning a *cleanup function*.\n\nLet's look at each of these steps in detail.\n\n### Step 1: Declare an Effect {/*step-1-declare-an-effect*/}\n\nTo declare an Effect in your component, import the [`useEffect` Hook](/reference/react/useEffect) from React:\n\n```js\nimport { useEffect } from 'react';\n```\n\nThen, call it at the top level of your component and put some code inside your Effect:\n\n```js {2-4}\nfunction MyComponent() {\n  useEffect(() => {\n    // Code here will run after *every* render\n  });\n  return <div />;\n}\n```\n\nEvery time your component renders, React will update the screen *and then* ru", "score": 0.593044102191925}, {"chunk_id": 3146, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "onent is removed from the page, your Effect will disconnect one last time.\n\n**To [help you find bugs,](/learn/synchronizing-with-effects#step-3-add-cleanup-if-needed) in development React runs <CodeStep step={1}>setup</CodeStep> and <CodeStep step={2}>cleanup</CodeStep> one extra time before the <CodeStep step={1}>setup</CodeStep>.** This is a stress-test that verifies your Effect's logic is implemented correctly. If this causes visible issues, your cleanup function is missing some logic. The cleanup function should stop or undo whatever the setup function was doing. The rule of thumb is that the user shouldn't be able to distinguish between the setup being called once (as in production) and a *setup* \u2192 *cleanup* \u2192 *setup* sequence (as in development). [See common solutions.](/learn/synchr", "score": 0.5868212580680847}, {"chunk_id": 1780, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "mponent once in development to verify that you've implemented cleanup well.\n\nNow edit the input to say `abc`. If you do it fast enough, you'll see `Schedule \"ab\" log` immediately followed by `Cancel \"ab\" log` and `Schedule \"abc\" log`. **React always cleans up the previous render's Effect before the next render's Effect.** This is why even if you type into the input fast, there is at most one timeout scheduled at a time. Edit the input a few times and watch the console to get a feel for how Effects get cleaned up.\n\nType something into the input and then immediately press \"Unmount the component\". Notice how unmounting cleans up the last render's Effect. Here, it clears the last timeout before it has a chance to fire.\n\nFinally, edit the component above and comment out the cleanup function so", "score": 0.5606856346130371}, {"chunk_id": 1762, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "be cleaned up like in the solution above.\n\nSee the examples below for how to handle common patterns.\n\n</Pitfall>\n\n### Controlling non-React widgets {/*controlling-non-react-widgets*/}\n\nSometimes you need to add UI widgets that aren't written in React. For example, let's say you're adding a map component to your page. It has a `setZoomLevel()` method, and you'd like to keep the zoom level in sync with a `zoomLevel` state variable in your React code. Your Effect would look similar to this:\n\n```js\nuseEffect(() => {\n  const map = mapRef.current;\n  map.setZoomLevel(zoomLevel);\n}, [zoomLevel]);\n```\n\nNote that there is no cleanup needed in this case. In development, React will call the Effect twice, but this is not a problem because calling `setZoomLevel` twice with the same value does not do an", "score": 0.5606685876846313}, {"chunk_id": 3276, "source": "domains/react_docs/data/reference/react/useLayoutEffect.md", "text_preview": "that your cleanup logic \"mirrors\" your setup logic and that it stops or undoes whatever the setup is doing. If this causes a problem, [implement the cleanup function.](/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development)\n\n* If some of your dependencies are objects or functions defined inside the component, there is a risk that they will **cause the Effect to re-run more often than needed.** To fix this, remove unnecessary [object](/reference/react/useEffect#removing-unnecessary-object-dependencies) and [function](/reference/react/useEffect#removing-unnecessary-function-dependencies) dependencies. You can also [extract state updates](/reference/react/useEffect#updating-state-based-on-previous-state-from-an-effect) and [non-reactive logic](/reference/react", "score": 0.560620903968811}, {"chunk_id": 1764, "source": "domains/react_docs/data/learn/synchronizing-with-effects.md", "text_preview": "al();\n  return () => dialog.close();\n}, []);\n```\n\nIn development, your Effect will call `showModal()`, then immediately `close()`, and then `showModal()` again. This has the same user-visible behavior as calling `showModal()` once, as you would see in production.\n\n### Subscribing to events {/*subscribing-to-events*/}\n\nIf your Effect subscribes to something, the cleanup function should unsubscribe:\n\n```js {6}\nuseEffect(() => {\n  function handleScroll(e) {\n    console.log(window.scrollX, window.scrollY);\n  }\n  window.addEventListener('scroll', handleScroll);\n  return () => window.removeEventListener('scroll', handleScroll);\n}, []);\n```\n\nIn development, your Effect will call `addEventListener()`, then immediately `removeEventListener()`, and then `addEventListener()` again with the same handl", "score": 0.5581670999526978}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:007:controlled_input", "timestamp": "2025-12-30T01:10:46.305057Z", "domain": "react_docs", "mode": "docs", "query": "What is a controlled input in React and how do I implement one?", "case": {"id": "controlled_input", "tags": ["forms"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A controlled input in React is an input element whose value is controlled by the React state. This means that the value of the input is set by the state of the component, and any changes to the input are handled through event handlers that update the state.\n\nTo implement a controlled input, you typically follow these steps:\n\n1. **Set up state**: Use the `useState` hook (for functional components) or state in class components to hold the value of the input.\n\n2. **Bind the input value**: Set the `value` attribute of the input element to the state variable.\n\n3. **Handle changes**: Create an event handler function that updates the state when the input value changes, and pass this function to the `onChange` event of the input.\n\nHere\u2019s an example of a controlled input using a functional component:\n\n```jsx\nimport React, { useState } from 'react';\n\nfunction ControlledInput() {\n  const [inputValue, setInputValue] = useState('');\n\n  const handleChange = (event) => {\n    setInputValue(event.target.value);\n  };\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        value={inputValue}\n        onChange={handleChange}\n      />\n      <p>You typed: {inputValue}</p>\n    </div>\n  );\n}\n\nexport default ControlledInput;\n```\n\nIn this example:\n- The `inputValue` state holds the current value of the input.\n- The `value` attribute of the `<input>` element is set to `inputValue`, making it a controlled input.\n- The `handleChange` function updates the state whenever the input changes, ensuring that the displayed value is always in sync with the input. \n\nThis is how you implement a controlled input in React.", "latency_ms": 7486, "tokens_in": 150, "tokens_out": 364, "cost_estimate_usd": 0.0002409, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A controlled input in React is an input element whose value is controlled by React state. This means that the input's value is set by a state variable, and any changes to the input are handled through an event that updates this state.\n\nTo implement a controlled input, you need to pass the `value` prop to the input element, which should be tied to a state variable. You also need to handle the `onChange` event to update the state variable whenever the input changes. Here is an example:\n\n```js\nfunction Form() {\n  const [firstName, setFirstName] = useState(''); // Declare a state variable\n  return (\n    <input\n      value={firstName} // Force the input's value to match the state variable\n      onChange={e => setFirstName(e.target.value)} // Update the state variable on any edits\n    />\n  );\n}\n```\n\nIn this example, `firstName` is the state variable that holds the current value of the input, and `setFirstName` is the function used to update that state when the input changes [4000].", "latency_ms": 5913, "tokens_in": 1467, "tokens_out": 227, "cost_estimate_usd": 0.00035624999999999996, "retrieved_chunks": [{"chunk_id": 4000, "source": "domains/react_docs/data/reference/react-dom/components/input.md", "text_preview": "s an initial value](#providing-an-initial-value-for-an-input) like `<input defaultValue=\"Initial text\" />`, your JSX only specifies the initial value. It does not control what the value should be right now.\n\n**To render a _controlled_ input, pass the `value` prop to it (or `checked` for checkboxes and radios).** React will force the input to always have the `value` you passed. Usually, you would do this by declaring a [state variable:](/reference/react/useState)\n\n```js {2,6,7}\nfunction Form() {\n  const [firstName, setFirstName] = useState(''); // Declare a state variable...\n  // ...\n  return (\n    <input\n      value={firstName} // ...force the input's value to match the state variable...\n      onChange={e => setFirstName(e.target.value)} // ... and update the state variable on any edits!", "score": 0.6339179873466492}, {"chunk_id": 722, "source": "domains/react_docs/data/learn/managing-state.md", "text_preview": "te-between-components)\n* [How to control whether the state gets preserved or reset](/learn/preserving-and-resetting-state)\n* [How to consolidate complex state logic in a function](/learn/extracting-state-logic-into-a-reducer)\n* [How to pass information without \"prop drilling\"](/learn/passing-data-deeply-with-context)\n* [How to scale state management as your app grows](/learn/scaling-up-with-reducer-and-context)\n\n</YouWillLearn>\n\n## Reacting to input with state {/*reacting-to-input-with-state*/}\n\nWith React, you won't modify the UI from code directly. For example, you won't write commands like \"disable the button\", \"enable the button\", \"show the success message\", etc. Instead, you will describe the UI you want to see for the different visual states of your component (\"initial state\", \"typin", "score": 0.6291404962539673}, {"chunk_id": 3999, "source": "domains/react_docs/data/reference/react-dom/components/input.md", "text_preview": "sed as a key in the form data, for example `{ firstName: \"Taylor\" }`.\n\n</Note>\n\n<Pitfall>\n\nBy default, a `<button>` inside a `<form>` without a `type` attribute will submit it. This can be surprising! If you have your own custom `Button` React component, consider using [`<button type=\"button\">`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button) instead of `<button>` (with no type). Then, to be explicit, use `<button type=\"submit\">` for buttons that *are* supposed to submit the form.\n\n</Pitfall>\n\n---\n\n### Controlling an input with a state variable {/*controlling-an-input-with-a-state-variable*/}\n\nAn input like `<input />` is *uncontrolled.* Even if you [pass an initial value](#providing-an-initial-value-for-an-input) like `<input defaultValue=\"Initial text\" />`, your JSX onl", "score": 0.6287128925323486}, {"chunk_id": 4109, "source": "domains/react_docs/data/reference/react-dom/components/textarea.md", "text_preview": "e](/learn/preserving-and-resetting-state) on every re-render. For example, this can happen if the text area or one of its parents always receives a different `key` attribute, or if you nest component definitions (which is not allowed in React and causes the \"inner\" component to remount on every render).\n\n---\n\n### I'm getting an error: \"A component is changing an uncontrolled input to be controlled\" {/*im-getting-an-error-a-component-is-changing-an-uncontrolled-input-to-be-controlled*/}\n\n\nIf you provide a `value` to the component, it must remain a string throughout its lifetime.\n\nYou cannot pass `value={undefined}` first and later pass `value=\"some string\"` because React won't know whether you want the component to be uncontrolled or controlled. A controlled component should always receive", "score": 0.6268080472946167}, {"chunk_id": 3257, "source": "domains/react_docs/data/reference/react/useImperativeHandle.md", "text_preview": "t ref = useRef(null);\n\n  function handleClick() {\n    ref.current.focus();\n    // This won't work because the DOM node isn't exposed:\n    // ref.current.style.opacity = 0.5;\n  }\n\n  return (\n    <form>\n      <MyInput placeholder=\"Enter your name\" ref={ref} />\n      <button type=\"button\" onClick={handleClick}>\n        Edit\n      </button>\n    </form>\n  );\n}\n```\n\n```js src/MyInput.js\nimport { useRef, useImperativeHandle } from 'react';\n\nfunction MyInput({ ref, ...props }) {\n  const inputRef = useRef(null);\n\n  useImperativeHandle(ref, () => {\n    return {\n      focus() {\n        inputRef.current.focus();\n      },\n      scrollIntoView() {\n        inputRef.current.scrollIntoView();\n      },\n    };\n  }, []);\n\n  return <input {...props} ref={inputRef} />;\n};\n\nexport default MyInput;\n```\n\n```css\nin", "score": 0.6110599040985107}, {"chunk_id": 3445, "source": "domains/react_docs/data/reference/react/useRef.md", "text_preview": "MyComponent() {\n  const inputRef = useRef(null);\n  // ...\n```\n\nThen pass your ref object as the `ref` attribute to the JSX of the DOM node you want to manipulate:\n\n```js [[1, 2, \"inputRef\"]]\n  // ...\n  return <input ref={inputRef} />;\n```\n\nAfter React creates the DOM node and puts it on the screen, React will set the <CodeStep step={2}>`current` property</CodeStep> of your ref object to that DOM node. Now you can access the `<input>`'s DOM node and call methods like [`focus()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus):\n\n```js [[2, 2, \"inputRef.current\"]]\n  function handleClick() {\n    inputRef.current.focus();\n  }\n```\n\nReact will set the `current` property back to `null` when the node is removed from the screen.\n\nRead more about [manipulating the DOM with refs.]", "score": 0.608437716960907}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.35, "penalty_total": 0.65, "rule_breakdown": [{"rule": "overconfident_language_check", "penalty": 0.15, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "note": "Overconfident language detected."}, {"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Overconfident language detected. Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:008:keys_in_lists", "timestamp": "2025-12-30T01:10:52.659552Z", "domain": "react_docs", "mode": "docs", "query": "Why do I need keys when rendering lists in React? What makes a good key?", "case": {"id": "keys_in_lists", "tags": ["lists"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, keys are important when rendering lists of elements because they help React identify which items have changed, are added, or are removed. This identification process allows React to optimize rendering performance by minimizing the number of DOM manipulations required. When keys are used, React can efficiently update the UI by reusing existing elements instead of re-rendering everything from scratch.\n\nA good key should be a unique identifier for each element in the list. Here are some guidelines for choosing good keys:\n\n1. **Uniqueness**: The key should be unique among its siblings. Using an index as a key is generally discouraged if the list can change, as it can lead to issues with component state and performance.\n\n2. **Stability**: The key should remain consistent between renders. If the key changes, React will treat it as a new element, which can lead to unnecessary re-renders.\n\n3. **Predictability**: Ideally, the key should be something that is predictable and does not change over time, such as a unique ID from your data.\n\nIn summary, keys help React optimize rendering and should be unique, stable, and predictable to ensure efficient updates to the UI.", "latency_ms": 4496, "tokens_in": 153, "tokens_out": 236, "cost_estimate_usd": 0.00016455, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "Keys are essential when rendering lists in React because they help uniquely identify each item among its siblings. This identification allows React to maintain the state of components between re-renders. If a component's key changes, React will destroy the existing component and create a new one, which can lead to loss of state if not managed properly. A well-chosen key provides more information than just the position of the item in the array, enabling React to optimize rendering by reordering or moving components efficiently without unnecessary re-renders [1286][1953].\n\nA good key should be unique among siblings and should not change over time. Using keys that are derived from stable identifiers, such as database IDs, is recommended. If the data is generated locally, using an incrementing counter or a unique identifier like `crypto.randomUUID()` is advisable. Avoid using array indices as keys, as they can lead to issues when items are reordered or removed [1954][1285].", "latency_ms": 6330, "tokens_in": 1412, "tokens_out": 191, "cost_estimate_usd": 0.0003264, "retrieved_chunks": [{"chunk_id": 1286, "source": "domains/react_docs/data/learn/rendering-lists.md", "text_preview": "ferent_ arrays.\n* **Keys must not change** or that defeats their purpose! Don't generate them while rendering.\n\n### Why does React need keys? {/*why-does-react-need-keys*/}\n\nImagine that files on your desktop didn't have names. Instead, you'd refer to them by their order -- the first file, the second file, and so on. You could get used to it, but once you delete a file, it would get confusing. The second file would become the first file, the third file would be the second file, and so on.\n\nFile names in a folder and JSX keys in an array serve a similar purpose. They let us uniquely identify an item between its siblings. A well-chosen key provides more information than the position within the array. Even if the _position_ changes due to reordering, the `key` lets React identify the item thr", "score": 0.7331773042678833}, {"chunk_id": 1953, "source": "domains/react_docs/data/learn/tutorial-tic-tac-toe.md", "text_preview": "items for a matching key. If the current list has a key that didn't exist before, React creates a component. If the current list is missing a key that existed in the previous list, React destroys the previous component. If two keys match, the corresponding component is moved.\n\nKeys tell React about the identity of each component, which allows React to maintain state between re-renders. If a component's key changes, the component will be destroyed and re-created with a new state.\n\n`key` is a special and reserved property in React. When an element is created, React extracts the `key` property and stores the key directly on the returned element. Even though `key` may look like it is passed as props, React automatically uses `key` to decide which components to update. There's no way for a com", "score": 0.6923709511756897}, {"chunk_id": 1954, "source": "domains/react_docs/data/learn/tutorial-tic-tac-toe.md", "text_preview": "ike it is passed as props, React automatically uses `key` to decide which components to update. There's no way for a component to ask what `key` its parent specified.\n\n**It's strongly recommended that you assign proper keys whenever you build dynamic lists.** If you don't have an appropriate key, you may want to consider restructuring your data so that you do.\n\nIf no key is specified, React will report an error and use the array index as a key by default. Using the array index as a key is problematic when trying to re-order a list's items or inserting/removing list items. Explicitly passing `key={i}` silences the error but has the same problems as array indices and is not recommended in most cases.\n\nKeys do not need to be globally unique; they only need to be unique between components and", "score": 0.6807155013084412}, {"chunk_id": 934, "source": "domains/react_docs/data/learn/preserving-and-resetting-state.md", "text_preview": "e same place. In this example, you only have two, so it's not a hassle to render both separately in the JSX.\n\n### Option 2: Resetting state with a key {/*option-2-resetting-state-with-a-key*/}\n\nThere is also another, more generic, way to reset a component's state.\n\nYou might have seen `key`s when [rendering lists.](/learn/rendering-lists#keeping-list-items-in-order-with-key) Keys aren't just for lists! You can use keys to make React distinguish between any components. By default, React uses order within the parent (\"first counter\", \"second counter\") to discern between components. But keys let you tell React that this is not just a *first* counter, or a *second* counter, but a specific counter--for example, *Taylor's* counter. This way, React will know *Taylor's* counter wherever it appears", "score": 0.6617422103881836}, {"chunk_id": 1284, "source": "domains/react_docs/data/learn/rendering-lists.md", "text_preview": "each item needs to render not one, but several DOM nodes?\n\nThe short [`<>...</>` Fragment](/reference/react/Fragment) syntax won't let you pass a key, so you need to either group them into a single `<div>`, or use the slightly longer and [more explicit `<Fragment>` syntax:](/reference/react/Fragment#rendering-a-list-of-fragments)\n\n```js\nimport { Fragment } from 'react';\n\n// ...\n\nconst listItems = people.map(person =>\n  <Fragment key={person.id}>\n    <h1>{person.name}</h1>\n    <p>{person.bio}</p>\n  </Fragment>\n);\n```\n\nFragments disappear from the DOM, so this will produce a flat list of `<h1>`, `<p>`, `<h1>`, `<p>`, and so on.\n\n</DeepDive>\n\n### Where to get your `key` {/*where-to-get-your-key*/}\n\nDifferent sources of data provide different sources of keys:\n\n* **Data from a database:** If y", "score": 0.6260970830917358}, {"chunk_id": 1285, "source": "domains/react_docs/data/learn/rendering-lists.md", "text_preview": "where-to-get-your-key*/}\n\nDifferent sources of data provide different sources of keys:\n\n* **Data from a database:** If your data is coming from a database, you can use the database keys/IDs, which are unique by nature.\n* **Locally generated data:** If your data is generated and persisted locally (e.g. notes in a note-taking app), use an incrementing counter, [`crypto.randomUUID()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID) or a package like [`uuid`](https://www.npmjs.com/package/uuid) when creating items.\n\n### Rules of keys {/*rules-of-keys*/}\n\n* **Keys must be unique among siblings.** However, it\u2019s okay to use the same keys for JSX nodes in _different_ arrays.\n* **Keys must not change** or that defeats their purpose! Don't generate them while rendering.\n\n### Why", "score": 0.60856032371521}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:009:conditional_rendering", "timestamp": "2025-12-30T01:11:01.373592Z", "domain": "react_docs", "mode": "docs", "query": "How do I conditionally render elements in React?", "case": {"id": "conditional_rendering", "tags": ["rendering"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can conditionally render elements using several approaches. Here are the common methods:\n\n1. **Using if statements**: You can use an if statement to determine what to render.\n\n   ```jsx\n   function MyComponent({ isLoggedIn }) {\n     if (isLoggedIn) {\n       return <h1>Welcome back!</h1>;\n     }\n     return <h1>Please sign in.</h1>;\n   }\n   ```\n\n2. **Using ternary operators**: This is a concise way to conditionally render elements.\n\n   ```jsx\n   function MyComponent({ isLoggedIn }) {\n     return (\n       <h1>{isLoggedIn ? 'Welcome back!' : 'Please sign in.'}</h1>\n     );\n   }\n   ```\n\n3. **Using logical && operator**: This allows you to render an element only if a condition is true.\n\n   ```jsx\n   function MyComponent({ isLoggedIn }) {\n     return (\n       <div>\n         {isLoggedIn && <h1>Welcome back!</h1>}\n       </div>\n     );\n   }\n   ```\n\n4. **Using switch statements**: For more complex conditions, you can use a switch statement.\n\n   ```jsx\n   function MyComponent({ status }) {\n     switch (status) {\n       case 'loading':\n         return <h1>Loading...</h1>;\n       case 'error':\n         return <h1>Error occurred!</h1>;\n       case 'success':\n         return <h1>Data loaded!</h1>;\n       default:\n         return null;\n     }\n   }\n   ```\n\nThese methods allow you to control what gets rendered based on the state or props of your component. For more detailed information, you can refer to the official React documentation.", "latency_ms": 8706, "tokens_in": 146, "tokens_out": 364, "cost_estimate_usd": 0.00024029999999999999, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can conditionally render elements using JavaScript syntax such as `if` statements, the logical `&&` operator, and the conditional (ternary) `? :` operator. \n\nFor example, you can use an `if` statement to determine what to render based on a condition:\n\n```js\nlet content;\nif (isLoggedIn) {\n  content = <AdminPanel />;\n} else {\n  content = <LoginForm />;\n}\nreturn (\n  <div>\n    {content}\n  </div>\n);\n```\nThis approach allows you to return different JSX based on the condition [536].\n\nAlternatively, you can use the conditional `?` operator for a more compact syntax:\n\n```js\n<div>\n  {isLoggedIn ? (\n    <AdminPanel />\n  ) : (\n    <LoginForm />\n  )}\n</div>\n```\nThis method works well inside JSX [537]. \n\nIf you only need to render something when a condition is true, you can use the logical `&&` operator:\n\n```js\n<div>\n  {isLoggedIn && <AdminPanel />}\n</div>\n```\nThis will render `<AdminPanel />` only if `isLoggedIn` is true [537]. \n\nThese techniques allow you to effectively manage what gets rendered in your components based on different conditions [312].", "latency_ms": 8431, "tokens_in": 1436, "tokens_out": 269, "cost_estimate_usd": 0.0003768, "retrieved_chunks": [{"chunk_id": 312, "source": "domains/react_docs/data/learn/conditional-rendering.md", "text_preview": "---\ntitle: Conditional Rendering\n---\n\n<Intro>\n\nYour components will often need to display different things depending on different conditions. In React, you can conditionally render JSX using JavaScript syntax like `if` statements, `&&`, and `? :` operators.\n\n</Intro>\n\n<YouWillLearn>\n\n* How to return different JSX depending on a condition\n* How to conditionally include or exclude a piece of JSX\n* Common conditional syntax shortcuts you\u2019ll encounter in React codebases\n\n</YouWillLearn>\n\n## Conditionally returning JSX {/*conditionally-returning-jsx*/}\n\nLet\u2019s say you have a `PackingList` component rendering several `Item`s, which can be marked as packed or not:\n\n<Sandpack>\n\n```js\nfunction Item({ name, isPacked }) {\n  return <li className=\"item\">{name}</li>;\n}\n\nexport default function PackingLis", "score": 0.6760947108268738}, {"chunk_id": 363, "source": "domains/react_docs/data/learn/describing-the-ui.md", "text_preview": ": 20px;\n  border-radius: 50%;\n}\n```\n\n</Sandpack>\n\n<LearnMore path=\"/learn/passing-props-to-a-component\">\n\nRead **[Passing Props to a Component](/learn/passing-props-to-a-component)** to learn how to pass and read props.\n\n</LearnMore>\n\n## Conditional rendering {/*conditional-rendering*/}\n\nYour components will often need to display different things depending on different conditions. In React, you can conditionally render JSX using JavaScript syntax like `if` statements, `&&`, and `? :` operators.\n\nIn this example, the JavaScript `&&` operator is used to conditionally render a checkmark:\n\n<Sandpack>\n\n```js\nfunction Item({ name, isPacked }) {\n  return (\n    <li className=\"item\">\n      {name} {isPacked && '\u2705'}\n    </li>\n  );\n}\n\nexport default function PackingList() {\n  return (\n    <section>", "score": 0.6626149415969849}, {"chunk_id": 536, "source": "domains/react_docs/data/learn/index.md", "text_preview": "syntax, but a regular `{}` object inside the `style={ }` JSX curly braces. You can use the `style` attribute when your styles depend on JavaScript variables.\n\n## Conditional rendering {/*conditional-rendering*/}\n\nIn React, there is no special syntax for writing conditions. Instead, you'll use the same techniques as you use when writing regular JavaScript code. For example, you can use an [`if`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else) statement to conditionally include JSX:\n\n```js\nlet content;\nif (isLoggedIn) {\n  content = <AdminPanel />;\n} else {\n  content = <LoginForm />;\n}\nreturn (\n  <div>\n    {content}\n  </div>\n);\n```\n\nIf you prefer more compact code, you can use the [conditional `?` operator.](https://developer.mozilla.org/en-US/docs/Web", "score": 0.6588907241821289}, {"chunk_id": 537, "source": "domains/react_docs/data/learn/index.md", "text_preview": "f you prefer more compact code, you can use the [conditional `?` operator.](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator) Unlike `if`, it works inside JSX:\n\n```js\n<div>\n  {isLoggedIn ? (\n    <AdminPanel />\n  ) : (\n    <LoginForm />\n  )}\n</div>\n```\n\nWhen you don't need the `else` branch, you can also use a shorter [logical `&&` syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#short-circuit_evaluation):\n\n```js\n<div>\n  {isLoggedIn && <AdminPanel />}\n</div>\n```\n\nAll of these approaches also work for conditionally specifying attributes. If you're unfamiliar with some of this JavaScript syntax, you can start by always using `if...else`.\n\n## Rendering lists {/*rendering-lists*/}\n\nYou will rely on Ja", "score": 0.6457065343856812}, {"chunk_id": 318, "source": "domains/react_docs/data/learn/conditional-rendering.md", "text_preview": "onent. You may already have noticed some duplication in the render output:\n\n```js\n<li className=\"item\">{name} \u2705</li>\n```\n\nis very similar to\n\n```js\n<li className=\"item\">{name}</li>\n```\n\nBoth of the conditional branches return `<li className=\"item\">...</li>`:\n\n```js\nif (isPacked) {\n  return <li className=\"item\">{name} \u2705</li>;\n}\nreturn <li className=\"item\">{name}</li>;\n```\n\nWhile this duplication isn't harmful, it could make your code harder to maintain. What if you want to change the `className`? You'd have to do it in two places in your code! In such a situation, you could conditionally include a little JSX to make your code more [DRY.](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)\n\n### Conditional (ternary) operator (`? :`) {/*conditional-ternary-operator--*/}\n\nJavaScript has a c", "score": 0.6008940935134888}, {"chunk_id": 2017, "source": "domains/react_docs/data/learn/understanding-your-ui-as-a-tree.md", "text_preview": "not a part of React. React render trees can provide insight to our React app regardless of what platform your app renders to.\n\n</DeepDive>\n\nA render tree represents a single render pass of a React application. With [conditional rendering](/learn/conditional-rendering), a parent component may render different children depending on the data passed.\n\nWe can update the app to conditionally render either an inspirational quote or color.\n\n<Sandpack>\n\n```js src/App.js\nimport FancyText from './FancyText';\nimport InspirationGenerator from './InspirationGenerator';\nimport Copyright from './Copyright';\n\nexport default function App() {\n  return (\n    <>\n      <FancyText title text=\"Get Inspired App\" />\n      <InspirationGenerator>\n        <Copyright year={2004} />\n      </InspirationGenerator>\n    </>", "score": 0.5950915813446045}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:010:lifting_state_up", "timestamp": "2025-12-30T01:11:10.809075Z", "domain": "react_docs", "mode": "docs", "query": "What does it mean to lift state up in React, and when should I do it?", "case": {"id": "lifting_state_up", "tags": ["state"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "Lifting state up in React refers to the practice of moving state from a child component to a parent component. This is done when multiple child components need to share or access the same state. By lifting the state up, you ensure that the state is managed in a single location, which can help avoid inconsistencies and make it easier to manage the data flow in your application.\n\nYou should consider lifting state up in the following scenarios:\n\n1. **Shared State**: When two or more components need to access and modify the same state. By lifting the state to their closest common ancestor, you can pass the state and any necessary functions down as props.\n\n2. **Controlled Components**: When you want to have a controlled component (like an input) that reflects the state of its parent. This allows the parent to control the value and behavior of the child component.\n\n3. **Simplifying State Management**: If you find that managing state in multiple components is becoming complex or cumbersome, lifting state up can simplify your architecture by centralizing state management.\n\nIn summary, lifting state up is a useful technique in React for managing shared state between components and ensuring a clear data flow in your application.", "latency_ms": 6432, "tokens_in": 154, "tokens_out": 238, "cost_estimate_usd": 0.0001659, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "Lifting state up in React means moving the state from two or more components to their closest common parent component. This allows the state to be shared between those components, ensuring that they can coordinate their behavior based on the same piece of state. You should lift state up when you want the state of two components to always change together, which is a common scenario in React applications [1580][1598].\n\nBy lifting state up, you remove the duplicated state from the child components and manage it in the parent component. The parent then passes the state down to the children via props, along with any necessary event handlers to update that state [1580][722]. This approach helps to avoid bugs and makes it easier to manage shared state across components [730].", "latency_ms": 9421, "tokens_in": 1409, "tokens_out": 151, "cost_estimate_usd": 0.00030195000000000005, "retrieved_chunks": [{"chunk_id": 1580, "source": "domains/react_docs/data/learn/sharing-state-between-components.md", "text_preview": "---\ntitle: Sharing State Between Components\n---\n\n<Intro>\n\nSometimes, you want the state of two components to always change together. To do it, remove state from both of them, move it to their closest common parent, and then pass it down to them via props. This is known as *lifting state up,* and it's one of the most common things you will do writing React code.\n\n</Intro>\n\n<YouWillLearn>\n\n- How to share state between components by lifting it up\n- What are controlled and uncontrolled components\n\n</YouWillLearn>\n\n## Lifting state up by example {/*lifting-state-up-by-example*/}\n\nIn this example, a parent `Accordion` component renders two separate `Panel`s:\n\n* `Accordion`\n  - `Panel`\n  - `Panel`\n\nEach `Panel` component has a boolean `isActive` state that determines whether its content is visibl", "score": 0.6529377102851868}, {"chunk_id": 730, "source": "domains/react_docs/data/learn/managing-state.md", "text_preview": "```\n\n</Sandpack>\n\nThis might seem like a small change, but many bugs in React apps are fixed this way.\n\n<LearnMore path=\"/learn/choosing-the-state-structure\">\n\nRead **[Choosing the State Structure](/learn/choosing-the-state-structure)** to learn how to design the state shape to avoid bugs.\n\n</LearnMore>\n\n## Sharing state between components {/*sharing-state-between-components*/}\n\nSometimes, you want the state of two components to always change together. To do it, remove state from both of them, move it to their closest common parent, and then pass it down to them via props. This is known as \"lifting state up\", and it's one of the most common things you will do writing React code.\n\nIn this example, only one panel should be active at a time. To achieve this, instead of keeping the active sta", "score": 0.6116194725036621}, {"chunk_id": 1598, "source": "domains/react_docs/data/learn/sharing-state-between-components.md", "text_preview": "-but that for _each_ piece of state, there is a _specific_ component that holds that piece of information. Instead of duplicating shared state between components, *lift it up* to their common shared parent, and *pass it down* to the children that need it.\n\nYour app will change as you work on it. It is common that you will move state down or back up while you're still figuring out where each piece of the state \"lives\". This is all part of the process!\n\nTo see what this feels like in practice with a few more components, read [Thinking in React.](/learn/thinking-in-react)\n\n<Recap>\n\n* When you want to coordinate two components, move their state to their common parent.\n* Then pass the information down through props from their common parent.\n* Finally, pass the event handlers down so that the ch", "score": 0.5971131920814514}, {"chunk_id": 722, "source": "domains/react_docs/data/learn/managing-state.md", "text_preview": "te-between-components)\n* [How to control whether the state gets preserved or reset](/learn/preserving-and-resetting-state)\n* [How to consolidate complex state logic in a function](/learn/extracting-state-logic-into-a-reducer)\n* [How to pass information without \"prop drilling\"](/learn/passing-data-deeply-with-context)\n* [How to scale state management as your app grows](/learn/scaling-up-with-reducer-and-context)\n\n</YouWillLearn>\n\n## Reacting to input with state {/*reacting-to-input-with-state*/}\n\nWith React, you won't modify the UI from code directly. For example, you won't write commands like \"disable the button\", \"enable the button\", \"show the success message\", etc. Instead, you will describe the UI you want to see for the different visual states of your component (\"initial state\", \"typin", "score": 0.5679062604904175}, {"chunk_id": 897, "source": "domains/react_docs/data/learn/preserving-and-resetting-state.md", "text_preview": "re in your UI.\n\nWhen you give a component state, you might think the state \"lives\" inside the component. But the state is actually held inside React. React associates each piece of state it's holding with the correct component by where that component sits in the render tree.\n\nHere, there is only one `<Counter />` JSX tag, but it's rendered at two different positions:\n\n<Sandpack>\n\n```js\nimport { useState } from 'react';\n\nexport default function App() {\n  const counter = <Counter />;\n  return (\n    <div>\n      {counter}\n      {counter}\n    </div>\n  );\n}\n\nfunction Counter() {\n  const [score, setScore] = useState(0);\n  const [hover, setHover] = useState(false);\n\n  let className = 'counter';\n  if (hover) {\n    className += ' hover';\n  }\n\n  return (\n    <div\n      className={className}\n      onP", "score": 0.5564861297607422}, {"chunk_id": 1064, "source": "domains/react_docs/data/learn/reacting-to-input-with-state.md", "text_preview": "how to do that.\" />\n\n## Thinking about UI declaratively {/*thinking-about-ui-declaratively*/}\n\nYou've seen how to implement a form imperatively above. To better understand how to think in React, you'll walk through reimplementing this UI in React below:\n\n1. **Identify** your component's different visual states\n2. **Determine** what triggers those state changes\n3. **Represent** the state in memory using `useState`\n4. **Remove** any non-essential state variables\n5. **Connect** the event handlers to set the state\n\n### Step 1: Identify your component's different visual states {/*step-1-identify-your-components-different-visual-states*/}\n\nIn computer science, you may hear about a [\"state machine\"](https://en.wikipedia.org/wiki/Finite-state_machine) being in one of several \u201cstates\u201d. If you work", "score": 0.5378082990646362}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 0.85, "penalty_total": 0.15, "rule_breakdown": [{"rule": "overconfident_language_check", "penalty": 0.15, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "note": "Overconfident language detected."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": ["OVERCONFIDENT_LANGUAGE"], "grounding_flags": [], "notes": "Overconfident language detected."}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:011:context_basics", "timestamp": "2025-12-30T01:11:17.357375Z", "domain": "react_docs", "mode": "docs", "query": "How do I pass data deeply without prop drilling in React?", "case": {"id": "context_basics", "tags": ["context"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To pass data deeply without prop drilling in React, you can use the Context API. The Context API allows you to create a context that can be accessed by any component in the component tree without having to pass props down manually at every level.\n\nHere\u2019s a brief overview of how to use the Context API:\n\n1. **Create a Context**: Use `React.createContext()` to create a context.\n\n   ```javascript\n   const MyContext = React.createContext();\n   ```\n\n2. **Provide the Context**: Use the `Provider` component to wrap your component tree and pass the data you want to share.\n\n   ```javascript\n   const App = () => {\n     const sharedData = { /* your data */ };\n\n     return (\n       <MyContext.Provider value={sharedData}>\n         <ComponentA />\n       </MyContext.Provider>\n     );\n   };\n   ```\n\n3. **Consume the Context**: Use the `useContext` hook or the `Context.Consumer` to access the data in any component that is a descendant of the `Provider`.\n\n   ```javascript\n   const ComponentB = () => {\n     const contextData = React.useContext(MyContext);\n     return <div>{contextData.someValue}</div>;\n   };\n   ```\n\nThis method allows you to avoid prop drilling by providing a way to share values across the component tree without having to pass props through every level.\n\nFor more detailed information, you can refer to the official React documentation on the Context API.", "latency_ms": 6538, "tokens_in": 148, "tokens_out": 300, "cost_estimate_usd": 0.00020219999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To pass data deeply without prop drilling in React, you can use the context feature. Context allows a parent component to provide data to all components in the tree below it, regardless of how deep they are, without the need to pass props explicitly through each level of the component hierarchy. This helps avoid the verbosity and inconvenience of passing props through many intermediate components, which can lead to \"prop drilling\" [805][806].", "latency_ms": 2114, "tokens_in": 1373, "tokens_out": 84, "cost_estimate_usd": 0.00025635, "retrieved_chunks": [{"chunk_id": 806, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "earn>\n\n## The problem with passing props {/*the-problem-with-passing-props*/}\n\n[Passing props](/learn/passing-props-to-a-component) is a great way to explicitly pipe data through your UI tree to the components that use it.\n\nBut passing props can become verbose and inconvenient when you need to pass some prop deeply through the tree, or if many components need the same prop. The nearest common ancestor could be far removed from the components that need data, and [lifting state up](/learn/sharing-state-between-components) that high can lead to a situation called \"prop drilling\".\n\n<DiagramGroup>\n\n<Diagram name=\"passing_data_lifting_state\" height={160} width={608} captionPosition=\"top\" alt=\"Diagram with a tree of three components. The parent contains a bubble representing a value highlighted i", "score": 0.6481710076332092}, {"chunk_id": 841, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "ents. It may feel like a slog, but it makes it very clear which components use which data! The person maintaining your code will be glad you've made the data flow explicit with props.\n2. **Extract components and [pass JSX as `children`](/learn/passing-props-to-a-component#passing-jsx-as-children) to them.** If you pass some data through many layers of intermediate components that don't use that data (and only pass it further down), this often means that you forgot to extract some components along the way. For example, maybe you pass data props like `posts` to visual components that don't use them directly, like `<Layout posts={posts} />`. Instead, make `Layout` take `children` as a prop, and render `<Layout><Posts posts={posts} /></Layout>`. This reduces the number of layers between the co", "score": 0.6166700124740601}, {"chunk_id": 805, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "---\ntitle: Passing Data Deeply with Context\n---\n\n<Intro>\n\nUsually, you will pass information from a parent component to a child component via props. But passing props can become verbose and inconvenient if you have to pass them through many components in the middle, or if many components in your app need the same information. *Context* lets the parent component make some information available to any component in the tree below it\u2014no matter how deep\u2014without passing it explicitly through props.\n\n</Intro>\n\n<YouWillLearn>\n\n- What \"prop drilling\" is\n- How to replace repetitive prop passing with context\n- Common use cases for context\n- Common alternatives to context\n\n</YouWillLearn>\n\n## The problem with passing props {/*the-problem-with-passing-props*/}\n\n[Passing props](/learn/passing-props-to-a", "score": 0.6130053400993347}, {"chunk_id": 808, "source": "domains/react_docs/data/learn/passing-data-deeply-with-context.md", "text_preview": "child of the root passes the value through to one of its two children - the right one, which is highlighted purple. That child passed the value through its single child, which passes it down to both of its two children, which are highlighted purple.\">\n\nProp drilling\n\n</Diagram>\n\n</DiagramGroup>\n\nWouldn't it be great if there were a way to \"teleport\" data to the components in the tree that need it without passing props? With React's context feature, there is!\n\n## Context: an alternative to passing props {/*context-an-alternative-to-passing-props*/}\n\nContext lets a parent component provide data to the entire tree below it. There are many uses for context. Here is one example. Consider this `Heading` component that accepts a `level` for its size:\n\n<Sandpack>\n\n```js\nimport Heading from './Head", "score": 0.6049836874008179}, {"chunk_id": 2213, "source": "domains/react_docs/data/learn/you-might-not-need-an-effect.md", "text_preview": "}\n\nfunction Child({ onFetched }) {\n  const data = useSomeAPI();\n  // \ud83d\udd34 Avoid: Passing data to the parent in an Effect\n  useEffect(() => {\n    if (data) {\n      onFetched(data);\n    }\n  }, [onFetched, data]);\n  // ...\n}\n```\n\nIn React, data flows from the parent components to their children. When you see something wrong on the screen, you can trace where the information comes from by going up the component chain until you find which component passes the wrong prop or has the wrong state. When child components update the state of their parent components in Effects, the data flow becomes very difficult to trace. Since both the child and the parent need the same data, let the parent component fetch that data, and *pass it down* to the child instead:\n\n```js {4-5}\nfunction Parent() {\n  const data", "score": 0.5653784871101379}, {"chunk_id": 585, "source": "domains/react_docs/data/learn/keeping-components-pure.md", "text_preview": "of each other. In the same way, each component should only \"think for itself\", and not attempt to coordinate with or depend upon others during rendering. Rendering is like a school exam: each component should calculate JSX on their own!\n\n<DeepDive>\n\n#### Detecting impure calculations with StrictMode {/*detecting-impure-calculations-with-strict-mode*/}\n\nAlthough you might not have used them all yet, in React there are three kinds of inputs that you can read while rendering: [props](/learn/passing-props-to-a-component), [state](/learn/state-a-components-memory), and [context.](/learn/passing-data-deeply-with-context) You should always treat these inputs as read-only.\n\nWhen you want to *change* something in response to user input, you should [set state](/learn/state-a-components-memory) inst", "score": 0.5535069108009338}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 0.5, "expect_details": {"missing": ["Provider"]}, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": "prompt"}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:012:use_reducer", "timestamp": "2025-12-30T01:11:22.000016Z", "domain": "react_docs", "mode": "docs", "query": "When should I use useReducer instead of useState?", "case": {"id": "use_reducer", "tags": ["hooks", "state"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "According to the official React documentation, you should consider using `useReducer` instead of `useState` in the following scenarios:\n\n1. **Complex State Logic**: If your state logic is complex and involves multiple sub-values or when the next state depends on the previous one, `useReducer` can help manage that complexity more effectively.\n\n2. **State Transitions**: When you have a state that can be updated in various ways based on different actions, `useReducer` allows you to define a reducer function that handles these actions, making the code more organized.\n\n3. **Performance Optimization**: If you have components that trigger deep updates, using `useReducer` can help prevent unnecessary re-renders by allowing you to manage state updates more granularly.\n\n4. **Shared State Logic**: If you need to share state logic between components, using `useReducer` can make it easier to encapsulate that logic in a single reducer function.\n\nIn summary, `useReducer` is particularly useful for managing more complex state scenarios, while `useState` is simpler and more suitable for straightforward state management.", "latency_ms": 4075, "tokens_in": 147, "tokens_out": 224, "cost_estimate_usd": 0.00015644999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "You should consider using `useReducer` instead of `useState` when you often encounter bugs due to incorrect state updates in some component and want to introduce more structure to your code. `useReducer` can help manage complex state logic more effectively, especially when many event handlers modify state in a similar way. It allows for better readability and debugging, as you can log state updates and understand the reasons behind them more clearly compared to `useState` [449][451]. \n\nAdditionally, if your state updates become complex and lead to bloated component code, `useReducer` can help cleanly separate the update logic from the event handlers [449]. However, it's important to note that you don't have to use reducers for everything; you can mix and match `useState` and `useReducer` in the same component [451].", "latency_ms": 4616, "tokens_in": 1469, "tokens_out": 168, "cost_estimate_usd": 0.00032114999999999997, "retrieved_chunks": [{"chunk_id": 449, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "`useState` you have to write less code upfront. With `useReducer`, you have to write both a reducer function _and_ dispatch actions. However, `useReducer` can help cut down on the code if many event handlers modify state in a similar way.\n- **Readability:** `useState` is very easy to read when the state updates are simple. When they get more complex, they can bloat your component's code and make it difficult to scan. In this case, `useReducer` lets you cleanly separate the _how_ of update logic from the _what happened_ of event handlers.\n- **Debugging:** When you have a bug with `useState`, it can be difficult to tell _where_ the state was set incorrectly, and _why_. With `useReducer`, you can add a console log into your reducer to see every state update, and _why_ it happened (due to whi", "score": 0.7093126773834229}, {"chunk_id": 451, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "eference:** Some people like reducers, others don't. That's okay. It's a matter of preference. You can always convert between `useState` and `useReducer` back and forth: they are equivalent!\n\nWe recommend using a reducer if you often encounter bugs due to incorrect state updates in some component, and want to introduce more structure to its code. You don't have to use reducers for everything: feel free to mix and match! You can even `useState` and `useReducer` in the same component.\n\n## Writing reducers well {/*writing-reducers-well*/}\n\nKeep these two tips in mind when writing reducers:\n\n- **Reducers must be pure.** Similar to [state updater functions](/learn/queueing-a-series-of-state-updates), reducers run during rendering! (Actions are queued until the next render.) This means that redu", "score": 0.6742817163467407}, {"chunk_id": 425, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "alled a \"reducer\".**\n\nReducers are a different way to handle state. You can migrate from `useState` to `useReducer` in three steps:\n\n1. **Move** from setting state to dispatching actions.\n2. **Write** a reducer function.\n3. **Use** the reducer from your component.\n\n### Step 1: Move from setting state to dispatching actions {/*step-1-move-from-setting-state-to-dispatching-actions*/}\n\nYour event handlers currently specify _what to do_ by setting state:\n\n```js\nfunction handleAddTask(text) {\n  setTasks([\n    ...tasks,\n    {\n      id: nextId++,\n      text: text,\n      done: false,\n    },\n  ]);\n}\n\nfunction handleChangeTask(task) {\n  setTasks(\n    tasks.map((t) => {\n      if (t.id === task.id) {\n        return task;\n      } else {\n        return t;\n      }\n    })\n  );\n}\n\nfunction handleDeleteTask", "score": 0.6733031272888184}, {"chunk_id": 450, "source": "domains/react_docs/data/learn/extracting-state-logic-into-a-reducer.md", "text_preview": "h `useReducer`, you can add a console log into your reducer to see every state update, and _why_ it happened (due to which `action`). If each `action` is correct, you'll know that the mistake is in the reducer logic itself. However, you have to step through more code than with `useState`.\n- **Testing:** A reducer is a pure function that doesn't depend on your component. This means that you can export and test it separately in isolation. While generally it's best to test components in a more realistic environment, for complex state update logic it can be useful to assert that your reducer returns a particular state for a particular initial state and action.\n- **Personal preference:** Some people like reducers, others don't. That's okay. It's a matter of preference. You can always convert be", "score": 0.6650655269622803}, {"chunk_id": 3397, "source": "domains/react_docs/data/reference/react/useReducer.md", "text_preview": "ent handlers into a single function outside of your component. Read more about [choosing between `useState` and `useReducer`.](/learn/extracting-state-logic-into-a-reducer#comparing-usestate-and-usereducer)\n\n---\n\n### Writing the reducer function {/*writing-the-reducer-function*/}\n\nA reducer function is declared like this:\n\n```js\nfunction reducer(state, action) {\n  // ...\n}\n```\n\nThen you need to fill in the code that will calculate and return the next state. By convention, it is common to write it as a [`switch` statement.](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch) For each `case` in the `switch`, calculate and return some next state.\n\n```js {4-7,10-13}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'incremented_age': {\n      r", "score": 0.6601709127426147}, {"chunk_id": 3387, "source": "domains/react_docs/data/reference/react/useReducer.md", "text_preview": "---\ntitle: useReducer\n---\n\n<Intro>\n\n`useReducer` is a React Hook that lets you add a [reducer](/learn/extracting-state-logic-into-a-reducer) to your component.\n\n```js\nconst [state, dispatch] = useReducer(reducer, initialArg, init?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useReducer(reducer, initialArg, init?)` {/*usereducer*/}\n\nCall `useReducer` at the top level of your component to manage its state with a [reducer.](/learn/extracting-state-logic-into-a-reducer)\n\n```js\nimport { useReducer } from 'react';\n\nfunction reducer(state, action) {\n  // ...\n}\n\nfunction MyComponent() {\n  const [state, dispatch] = useReducer(reducer, { age: 42 });\n  // ...\n```\n\n[See more examples below.](#usage)\n\n#### Parameters {/*parameters*/}\n\n* `reducer`: The reducer function that spe", "score": 0.6493033766746521}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:013:custom_hooks", "timestamp": "2025-12-30T01:11:27.013468Z", "domain": "react_docs", "mode": "docs", "query": "What is a custom hook and when should I create one?", "case": {"id": "custom_hooks", "tags": ["hooks"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A custom hook in React is a JavaScript function that starts with the prefix \"use\" and can call other hooks. Custom hooks allow you to extract component logic into reusable functions, enabling you to share stateful logic between components without changing their structure.\n\nYou should create a custom hook when you find yourself needing to reuse stateful logic across multiple components. This can include scenarios such as managing form state, handling API calls, or implementing complex animations. By encapsulating this logic in a custom hook, you can keep your components cleaner and more focused on their rendering logic.\n\nFor more detailed guidance on when and how to create custom hooks, you can refer to the official React documentation on hooks.", "latency_ms": 2799, "tokens_in": 148, "tokens_out": 137, "cost_estimate_usd": 0.00010439999999999999, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "A custom Hook in React is a JavaScript function that allows you to reuse stateful logic between components. It is defined by a function that starts with the word \"use\" followed by a capital letter, and it can encapsulate logic that may involve using built-in Hooks like `useState`, `useEffect`, or others. Custom Hooks help make the calling code more declarative by constraining what it does, focusing on specific high-level use cases, and allowing for better organization of code [1406][1402].\n\nYou should create a custom Hook when you have logic that is duplicated across multiple components or when you want to encapsulate complex logic that can be reused. However, it is not necessary to extract a custom Hook for every small piece of duplicated code; some duplication is acceptable. A good rule of thumb is to create a custom Hook when it helps to simplify your components and makes the code more maintainable [1430][1396].", "latency_ms": 4977, "tokens_in": 1473, "tokens_out": 191, "cost_estimate_usd": 0.00033555, "retrieved_chunks": [{"chunk_id": 1406, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "hatRoom({ serverUrl, roomId });\n  useImpressionLog('visit_chat', { roomId });\n  // ...\n}\n```\n\n**A good custom Hook makes the calling code more declarative by constraining what it does.** For example, `useChatRoom(options)` can only connect to the chat room, while `useImpressionLog(eventName, extraData)` can only send an impression log to the analytics. If your custom Hook API doesn't constrain the use cases and is very abstract, in the long run it's likely to introduce more problems than it solves.\n\n</DeepDive>\n\n### Custom Hooks help you migrate to better patterns {/*custom-hooks-help-you-migrate-to-better-patterns*/}\n\nEffects are an [\"escape hatch\"](/learn/escape-hatches): you use them when you need to \"step outside React\" and when there is no better built-in solution for your use case. W", "score": 0.5888679027557373}, {"chunk_id": 1402, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "k a clear name, it might mean that your Effect is too coupled to the rest of your component's logic, and is not yet ready to be extracted.\n\nIdeally, your custom Hook's name should be clear enough that even a person who doesn't write code often could have a good guess about what your custom Hook does, what it takes, and what it returns:\n\n* \u2705 `useData(url)`\n* \u2705 `useImpressionLog(eventName, extraData)`\n* \u2705 `useChatRoom(options)`\n\nWhen you synchronize with an external system, your custom Hook name may be more technical and use jargon specific to that system. It's good as long as it would be clear to a person familiar with that system:\n\n* \u2705 `useMediaQuery(query)`\n* \u2705 `useSocket(url)`\n* \u2705 `useIntersectionObserver(ref, options)`\n\n**Keep custom Hooks focused on concrete high-level use cases.** Avo", "score": 0.5796340703964233}, {"chunk_id": 1350, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "---\ntitle: 'Reusing Logic with Custom Hooks'\n---\n\n<Intro>\n\nReact comes with several built-in Hooks like `useState`, `useContext`, and `useEffect`. Sometimes, you'll wish that there was a Hook for some more specific purpose: for example, to fetch data, to keep track of whether the user is online, or to connect to a chat room. You might not find these Hooks in React, but you can create your own Hooks for your application's needs.\n\n</Intro>\n\n<YouWillLearn>\n\n- What custom Hooks are, and how to write your own\n- How to reuse logic between components\n- How to name and structure your custom Hooks\n- When and why to extract custom Hooks\n\n</YouWillLearn>\n\n## Custom Hooks: Sharing logic between components {/*custom-hooks-sharing-logic-between-components*/}\n\nImagine you're developing an app that heavil", "score": 0.5772238373756409}, {"chunk_id": 1430, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "</>\n  );\n}\n```\n\n```css src/styles.css\nlabel, button { display: block; margin-bottom: 20px; }\nhtml, body { min-height: 300px; }\n```\n\n```css src/welcome.css active\n.welcome {\n  color: white;\n  padding: 50px;\n  text-align: center;\n  font-size: 50px;\n  background-image: radial-gradient(circle, rgba(63,94,251,1) 0%, rgba(252,70,107,1) 100%);\n\n  animation: fadeIn 1000ms;\n}\n\n@keyframes fadeIn {\n  0% { opacity: 0; }\n  100% { opacity: 1; }\n}\n\n```\n\n</Sandpack>\n\nSometimes, you don't even need a Hook!\n\n<Recap>\n\n- Custom Hooks let you share logic between components.\n- Custom Hooks must be named starting with `use` followed by a capital letter.\n- Custom Hooks only share stateful logic, not state itself.\n- You can pass reactive values from one Hook to another, and they stay up-to-date.\n- All Hooks re", "score": 0.5562654733657837}, {"chunk_id": 1396, "source": "domains/react_docs/data/learn/reusing-logic-with-custom-hooks.md", "text_preview": "\"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test --env=jsdom\",\n    \"eject\": \"react-scripts eject\"\n  }\n}\n```\n\n```css\ninput { display: block; margin-bottom: 20px; }\nbutton { margin-left: 10px; }\n```\n\n</Sandpack>\n\nNotice how you no longer need to know *how* `useChatRoom` works in order to use it. You could add it to any other component, pass any other options, and it would work the same way. That's the power of custom Hooks.\n\n## When to use custom Hooks {/*when-to-use-custom-hooks*/}\n\nYou don't need to extract a custom Hook for every little duplicated bit of code. Some duplication is fine. For example, extracting a `useFormInput` Hook to wrap a single `useState` call like earlier is probably unnecessary.\n\nHowever, whenever yo", "score": 0.5539200901985168}, {"chunk_id": 2755, "source": "domains/react_docs/data/reference/react/hooks.md", "text_preview": "tly useful to library authors and aren't commonly used in the application code.\n\n- [`useDebugValue`](/reference/react/useDebugValue) lets you customize the label React DevTools displays for your custom Hook.\n- [`useId`](/reference/react/useId) lets a component associate a unique ID with itself. Typically used with accessibility APIs.\n- [`useSyncExternalStore`](/reference/react/useSyncExternalStore) lets a component subscribe to an external store.\n* [`useActionState`](/reference/react/useActionState) allows you to manage state of actions.\n\n---\n\n## Your own Hooks {/*your-own-hooks*/}\n\nYou can also [define your own custom Hooks](/learn/reusing-logic-with-custom-hooks#extracting-your-own-custom-hook-from-a-component) as JavaScript functions.", "score": 0.5477042198181152}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:014:use_memo_vs_use_callback", "timestamp": "2025-12-30T01:11:32.438602Z", "domain": "react_docs", "mode": "docs", "query": "What's the difference between useMemo and useCallback?", "case": {"id": "use_memo_vs_use_callback", "tags": ["hooks", "performance"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "According to the official React documentation, `useMemo` and `useCallback` are both hooks that help optimize performance by memoizing values and functions, respectively, but they serve different purposes.\n\n- **`useMemo`**: This hook is used to memoize a computed value. It takes a function that computes a value and an array of dependencies. React will recompute the memoized value only when one of the dependencies has changed. This is useful for optimizing expensive calculations.\n\n  Example:\n  ```javascript\n  const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);\n  ```\n\n- **`useCallback`**: This hook is used to memoize a function. It takes a function and an array of dependencies. React will return the same function instance unless one of the dependencies has changed. This is particularly useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary renders.\n\n  Example:\n  ```javascript\n  const memoizedCallback = useCallback(() => {\n    doSomething(a, b);\n  }, [a, b]);\n  ```\n\nIn summary, `useMemo` is for memoizing values, while `useCallback` is for memoizing functions.", "latency_ms": 4654, "tokens_in": 146, "tokens_out": 252, "cost_estimate_usd": 0.00017309999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "`useMemo` and `useCallback` are both React Hooks that help with memoization, but they serve different purposes.\n\n`useMemo` is used to cache the result of a computation between re-renders. It takes a function that computes a value and an array of dependencies. If the dependencies haven't changed since the last render, `useMemo` returns the cached value instead of recalculating it. This is useful for optimizing performance when dealing with expensive calculations. For example, you might use `useMemo` to cache the result of filtering a list of items based on some criteria [3308].\n\nOn the other hand, `useCallback` is specifically designed to cache a function definition between re-renders. It takes a function and an array of dependencies, similar to `useMemo`. If the dependencies haven't changed, `useCallback` returns the same function instance, which can help prevent unnecessary re-renders of child components that rely on that function as a prop. This is particularly useful when passing callback functions to optimized child components [2993].\n\nIn summary, use `useMemo` for caching values and `useCallback` for caching functions [3009].", "latency_ms": 5394, "tokens_in": 1420, "tokens_out": 235, "cost_estimate_usd": 0.000354, "retrieved_chunks": [{"chunk_id": 3009, "source": "domains/react_docs/data/reference/react/useCallback.md", "text_preview": "with [`useMemo`,](/reference/react/useMemo) you might find it helpful to think of `useCallback` as this:\n\n```js {expectedErrors: {'react-compiler': [3]}}\n// Simplified implementation (inside React)\nfunction useCallback(fn, dependencies) {\n  return useMemo(() => fn, dependencies);\n}\n```\n\n[Read more about the difference between `useMemo` and `useCallback`.](/reference/react/useMemo#memoizing-a-function)\n\n</DeepDive>\n\n<DeepDive>\n\n#### Should you add useCallback everywhere? {/*should-you-add-usecallback-everywhere*/}\n\nIf your app is like this site, and most interactions are coarse (like replacing a page or an entire section), memoization is usually unnecessary. On the other hand, if your app is more like a drawing editor, and most interactions are granular (like moving shapes), then you might", "score": 0.6471222639083862}, {"chunk_id": 3006, "source": "domains/react_docs/data/reference/react/useCallback.md", "text_preview": "the underlying problem and fix it first. Then you may add `useCallback` back.\n\n</Note>\n\n<DeepDive>\n\n#### How is useCallback related to useMemo? {/*how-is-usecallback-related-to-usememo*/}\n\nYou will often see [`useMemo`](/reference/react/useMemo) alongside `useCallback`. They are both useful when you're trying to optimize a child component. They let you [memoize](https://en.wikipedia.org/wiki/Memoization) (or, in other words, cache) something you're passing down:\n\n```js {6-8,10-15,19}\nimport { useMemo, useCallback } from 'react';\n\nfunction ProductPage({ productId, referrer }) {\n  const product = useData('/product/' + productId);\n\n  const requirements = useMemo(() => { // Calls your function and caches its result\n    return computeRequirements(product);\n  }, [product]);\n\n  const handleSubmi", "score": 0.6466237306594849}, {"chunk_id": 3308, "source": "domains/react_docs/data/reference/react/useMemo.md", "text_preview": "---\ntitle: useMemo\n---\n\n<Intro>\n\n`useMemo` is a React Hook that lets you cache the result of a calculation between re-renders.\n\n```js\nconst cachedValue = useMemo(calculateValue, dependencies)\n```\n\n</Intro>\n\n<Note>\n\n[React Compiler](/learn/react-compiler) automatically memoizes values and functions, reducing the need for manual `useMemo` calls. You can use the compiler to handle memoization automatically.\n\n</Note>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useMemo(calculateValue, dependencies)` {/*usememo*/}\n\nCall `useMemo` at the top level of your component to cache a calculation between re-renders:\n\n```js\nimport { useMemo } from 'react';\n\nfunction TodoList({ todos, tab }) {\n  const visibleTodos = useMemo(\n    () => filterTodos(todos, tab),\n    [todos, tab]\n  );\n  // ...\n}\n```", "score": 0.6125223636627197}, {"chunk_id": 2993, "source": "domains/react_docs/data/reference/react/useCallback.md", "text_preview": "---\ntitle: useCallback\n---\n\n<Intro>\n\n`useCallback` is a React Hook that lets you cache a function definition between re-renders.\n\n```js\nconst cachedFn = useCallback(fn, dependencies)\n```\n\n</Intro>\n\n<Note>\n\n[React Compiler](/learn/react-compiler) automatically memoizes values and functions, reducing the need for manual `useCallback` calls. You can use the compiler to handle memoization automatically.\n\n</Note>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useCallback(fn, dependencies)` {/*usecallback*/}\n\nCall `useCallback` at the top level of your component to cache a function definition between re-renders:\n\n```js {4,9}\nimport { useCallback } from 'react';\n\nexport default function ProductPage({ productId, referrer, theme }) {\n  const handleSubmit = useCallback((orderDetails) => {", "score": 0.5984591245651245}, {"chunk_id": 2463, "source": "domains/react_docs/data/reference/react/cache.md", "text_preview": "eact/memo), or [`useMemo`](/reference/react/useMemo)? {/*cache-memo-usememo*/}\n\nAll mentioned APIs offer memoization but the difference is what they're intended to memoize, who can access the cache, and when their cache is invalidated.\n\n#### `useMemo` {/*deep-dive-use-memo*/}\n\nIn general, you should use [`useMemo`](/reference/react/useMemo) for caching an expensive computation in a Client Component across renders. As an example, to memoize a transformation of data within a component.\n\n```jsx {expectedErrors: {'react-compiler': [4]}} {4}\n'use client';\n\nfunction WeatherReport({record}) {\n  const avgTemp = useMemo(() => calculateAvg(record), record);\n  // ...\n}\n\nfunction App() {\n  const record = getRecord();\n  return (\n    <>\n      <WeatherReport record={record} />\n      <WeatherReport record", "score": 0.5930418372154236}, {"chunk_id": 1048, "source": "domains/react_docs/data/learn/react-compiler/introduction.md", "text_preview": "seCallback, and React.memo? {/*what-should-i-do-about-usememo-usecallback-and-reactmemo*/}\n\nBy default, React Compiler will memoize your code based on its analysis and heuristics. In most cases, this memoization will be as precise, or moreso, than what you may have written.\n\nHowever, in some cases developers may need more control over memoization. The `useMemo` and `useCallback` hooks can continue to be used with React Compiler as an escape hatch to provide control over which values are memoized. A common use-case for this is if a memoized value is used as an effect dependency, in order to ensure that an effect does not fire repeatedly even when its dependencies do not meaningfully change.\n\nFor new code, we recommend relying on the compiler for memoization and using `useMemo`/`useCallback`", "score": 0.5880440473556519}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:015:refs_use_ref", "timestamp": "2025-12-30T01:11:39.333971Z", "domain": "react_docs", "mode": "docs", "query": "How do I reference a DOM element in React?", "case": {"id": "refs_use_ref", "tags": ["refs"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "In React, you can reference a DOM element using the `ref` attribute. This allows you to create a reference to a DOM element and access it directly. Here\u2019s how you can do it:\n\n1. **Using `React.createRef()`**: You can create a ref using `React.createRef()` and attach it to a React element.\n\n   ```jsx\n   import React, { Component } from 'react';\n\n   class MyComponent extends Component {\n     constructor(props) {\n       super(props);\n       this.myRef = React.createRef();\n     }\n\n     componentDidMount() {\n       // Access the DOM element using this.myRef.current\n       console.log(this.myRef.current);\n     }\n\n     render() {\n       return <div ref={this.myRef}>Hello, World!</div>;\n     }\n   }\n   ```\n\n2. **Using the `useRef` Hook**: In functional components, you can use the `useRef` hook to create a ref.\n\n   ```jsx\n   import React, { useRef, useEffect } from 'react';\n\n   const MyComponent = () => {\n     const myRef = useRef(null);\n\n     useEffect(() => {\n       // Access the DOM element using myRef.current\n       console.log(myRef.current);\n     }, []);\n\n     return <div ref={myRef}>Hello, World!</div>;\n   };\n   ```\n\nIn both cases, `myRef.current` will give you access to the underlying DOM element after the component has mounted. \n\nThis method is built-in to React and does not require any third-party integration.", "latency_ms": 6863, "tokens_in": 146, "tokens_out": 321, "cost_estimate_usd": 0.00021449999999999998, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To reference a DOM element in React, you can use the `useRef` Hook. First, import the `useRef` Hook from React. Then, declare a ref inside your component using `const myRef = useRef(null);`. Finally, pass your ref as the `ref` attribute to the JSX tag for which you want to get the DOM node, like this: `<div ref={myRef}>`. When React creates the DOM node, it will store a reference to this node in `myRef.current`, allowing you to access it later in your event handlers or other functions [759][760].", "latency_ms": 3262, "tokens_in": 1470, "tokens_out": 124, "cost_estimate_usd": 0.0002949, "retrieved_chunks": [{"chunk_id": 385, "source": "domains/react_docs/data/learn/escape-hatches.md", "text_preview": "h-refs*/}\n\nReact automatically updates the DOM to match your render output, so your components won't often need to manipulate it. However, sometimes you might need access to the DOM elements managed by React\u2014for example, to focus a node, scroll to it, or measure its size and position. There is no built-in way to do those things in React, so you will need a ref to the DOM node. For example, clicking the button will focus the input using a ref:\n\n<Sandpack>\n\n```js\nimport { useRef } from 'react';\n\nexport default function Form() {\n  const inputRef = useRef(null);\n\n  function handleClick() {\n    inputRef.current.focus();\n  }\n\n  return (\n    <>\n      <input ref={inputRef} />\n      <button onClick={handleClick}>\n        Focus the input\n      </button>\n    </>\n  );\n}\n```\n\n</Sandpack>\n\n<LearnMore pa", "score": 0.7101589441299438}, {"chunk_id": 759, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "---\ntitle: 'Manipulating the DOM with Refs'\n---\n\n<Intro>\n\nReact automatically updates the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model/Introduction) to match your render output, so your components won't often need to manipulate it. However, sometimes you might need access to the DOM elements managed by React--for example, to focus a node, scroll to it, or measure its size and position. There is no built-in way to do those things in React, so you will need a *ref* to the DOM node.\n\n</Intro>\n\n<YouWillLearn>\n\n- How to access a DOM node managed by React with the `ref` attribute\n- How the `ref` JSX attribute relates to the `useRef` Hook\n- How to access another component's DOM node\n- In which cases it's safe to modify the DOM managed by React\n\n</YouWillLearn>\n\n## Gettin", "score": 0.6772878170013428}, {"chunk_id": 760, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "s another component's DOM node\n- In which cases it's safe to modify the DOM managed by React\n\n</YouWillLearn>\n\n## Getting a ref to the node {/*getting-a-ref-to-the-node*/}\n\nTo access a DOM node managed by React, first, import the `useRef` Hook:\n\n```js\nimport { useRef } from 'react';\n```\n\nThen, use it to declare a ref inside your component:\n\n```js\nconst myRef = useRef(null);\n```\n\nFinally, pass your ref as the `ref` attribute to the JSX tag for which you want to get the DOM node:\n\n```js\n<div ref={myRef}>\n```\n\nThe `useRef` Hook returns an object with a single property called `current`. Initially, `myRef.current` will be `null`. When React creates a DOM node for this `<div>`, React will put a reference to this node into `myRef.current`. You can then access this DOM node from your [event handle", "score": 0.6631567478179932}, {"chunk_id": 761, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "React will put a reference to this node into `myRef.current`. You can then access this DOM node from your [event handlers](/learn/responding-to-events) and use the built-in [browser APIs](https://developer.mozilla.org/docs/Web/API/Element) defined on it.\n\n```js\n// You can use any browser APIs, for example:\nmyRef.current.scrollIntoView();\n```\n\n### Example: Focusing a text input {/*example-focusing-a-text-input*/}\n\nIn this example, clicking the button will focus the input:\n\n<Sandpack>\n\n```js\nimport { useRef } from 'react';\n\nexport default function Form() {\n  const inputRef = useRef(null);\n\n  function handleClick() {\n    inputRef.current.focus();\n  }\n\n  return (\n    <>\n      <input ref={inputRef} />\n      <button onClick={handleClick}>\n        Focus the input\n      </button>\n    </>\n  );\n}\n`", "score": 0.6582500338554382}, {"chunk_id": 3456, "source": "domains/react_docs/data/reference/react/useRef.md", "text_preview": "des inside them.\n\nTo fix this, find the component that you want to get a ref to:\n\n```js\nexport default function MyInput({ value, onChange }) {\n  return (\n    <input\n      value={value}\n      onChange={onChange}\n    />\n  );\n}\n```\n\nAnd then add `ref` to the list of props your component accepts and pass `ref` as a prop to the relevant child [built-in component](/reference/react-dom/components/common) like this:\n\n```js {1,6}\nfunction MyInput({ value, onChange, ref }) {\n  return (\n    <input\n      value={value}\n      onChange={onChange}\n      ref={ref}\n    />\n  );\n};\n\nexport default MyInput;\n```\n\nThen the parent component can get a ref to it.\n\nRead more about [accessing another component's DOM nodes.](/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes)", "score": 0.6454582214355469}, {"chunk_id": 788, "source": "domains/react_docs/data/learn/manipulating-the-dom-with-refs.md", "text_preview": "u'll use them to hold DOM elements.\n- You instruct React to put a DOM node into `myRef.current` by passing `<div ref={myRef}>`.\n- Usually, you will use refs for non-destructive actions like focusing, scrolling, or measuring DOM elements.\n- A component doesn't expose its DOM nodes by default. You can opt into exposing a DOM node by using the `ref` prop.\n- Avoid changing DOM nodes managed by React.\n- If you do modify DOM nodes managed by React, modify parts that React has no reason to update.\n\n</Recap>\n\n\n\n<Challenges>\n\n#### Play and pause the video {/*play-and-pause-the-video*/}\n\nIn this example, the button toggles a state variable to switch between a playing and a paused state. However, in order to actually play or pause the video, toggling state is not enough. You also need to call [`play(", "score": 0.6406176686286926}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:016:strict_mode", "timestamp": "2025-12-30T01:11:42.464882Z", "domain": "react_docs", "mode": "docs", "query": "What is React Strict Mode and why can effects run twice in development?", "case": {"id": "strict_mode", "tags": ["dev"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Strict Mode is a tool for highlighting potential problems in an application. It activates additional checks and warnings for its descendants. Strict Mode does not render any visible UI; it only activates checks and warnings for its child components.\n\nOne of the behaviors of React Strict Mode is that it intentionally invokes certain lifecycle methods and effects twice in development mode. This is done to help identify side effects that are not properly handled. By running effects twice, React can help developers catch issues related to side effects that might not be idempotent or that rely on mutable state.\n\nThis double invocation occurs only in development mode and is not present in production builds. The goal is to ensure that components are resilient and can handle being mounted and unmounted multiple times without issues.\n\nFor more detailed information, you can refer to the official React documentation on Strict Mode.", "latency_ms": 3107, "tokens_in": 150, "tokens_out": 165, "cost_estimate_usd": 0.0001215, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Strict Mode is a tool for highlighting potential problems in an application during development. It enables additional checks and warnings for its descendants, helping developers identify issues before they reach production. Specifically, it can help find bugs caused by impure rendering, missing cleanup in effects, and improper usage of deprecated APIs, among other things [2836].\n\nIn development, when Strict Mode is enabled, React runs effects an extra time. This means that for every effect, React will execute one additional setup and cleanup cycle. This behavior is intended to stress-test the effects to ensure that the cleanup logic properly mirrors the setup logic. If the cleanup is missing or incorrect, it can lead to issues such as memory leaks or unintended behavior, which can be caught early in the development process [2854][3139].", "latency_ms": 2960, "tokens_in": 1370, "tokens_out": 158, "cost_estimate_usd": 0.0003003, "retrieved_chunks": [{"chunk_id": 2867, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "ct in development, Strict Mode made the missing cleanup logic more noticeable.\n\n[Read more about implementing Effect cleanup.](/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development)\n\n---\n### Fixing bugs found by re-running ref callbacks in development {/*fixing-bugs-found-by-re-running-ref-callbacks-in-development*/}\n\nStrict Mode can also help find bugs in [callbacks refs.](/learn/manipulating-the-dom-with-refs)\n\nEvery callback `ref` has some setup code and may have some cleanup code. Normally, React calls setup when the element is *created* (is added to the DOM) and calls cleanup when the element is *removed* (is removed from the DOM).\n\nWhen Strict Mode is on, React will also run **one extra setup+cleanup cycle in development for every callback `ref`.** Th", "score": 0.742677628993988}, {"chunk_id": 3139, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "-might-not-need-an-effect)\n\n* When Strict Mode is on, React will **run one extra development-only setup+cleanup cycle** before the first real setup. This is a stress-test that ensures that your cleanup logic \"mirrors\" your setup logic and that it stops or undoes whatever the setup is doing. If this causes a problem, [implement the cleanup function.](/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development)\n\n* If some of your dependencies are objects or functions defined inside the component, there is a risk that they will **cause the Effect to re-run more often than needed.** To fix this, remove unnecessary [object](#removing-unnecessary-object-dependencies) and [function](#removing-unnecessary-function-dependencies) dependencies. You can also [extract state u", "score": 0.7387650012969971}, {"chunk_id": 2854, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "then calls cleanup and setup again if its dependencies changed since the last render.\n\nWhen Strict Mode is on, React will also run **one extra setup+cleanup cycle in development for every Effect.** This may feel surprising, but it helps reveal subtle bugs that are hard to catch manually.\n\n**Here is an example to illustrate how re-running Effects in Strict Mode helps you find bugs early.**\n\nConsider this example that connects a component to a chat:\n\n<Sandpack>\n\n```js src/index.js\nimport { createRoot } from 'react-dom/client';\nimport './styles.css';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById(\"root\"));\nroot.render(<App />);\n```\n\n```js\nimport { useState, useEffect } from 'react';\nimport { createConnection } from './chat.js';\n\nconst serverUrl = 'https://localhos", "score": 0.7248605489730835}, {"chunk_id": 2868, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "hen Strict Mode is on, React will also run **one extra setup+cleanup cycle in development for every callback `ref`.** This may feel surprising, but it helps reveal subtle bugs that are hard to catch manually.\n\nConsider this example, which allows you to select an animal and then scroll to one of them. Notice when you switch from \"Cats\" to \"Dogs\", the console logs show that the number of animals in the list keeps growing, and the \"Scroll to\" buttons stop working:\n\n<Sandpack>\n\n```js src/index.js\nimport { createRoot } from 'react-dom/client';\nimport './styles.css';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById(\"root\"));\n// \u274c Not using StrictMode.\nroot.render(<App />);\n```\n\n```js src/App.js active\nimport { useRef, useState } from \"react\";\n\nexport default function Ca", "score": 0.7140366435050964}, {"chunk_id": 2836, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "liably reproduce in production. Strict Mode lets you fix bugs before your users report them.\n\n<Note>\n\nStrict Mode enables the following checks in development:\n\n- Your components will [re-render an extra time](#fixing-bugs-found-by-double-rendering-in-development) to find bugs caused by impure rendering.\n- Your components will [re-run Effects an extra time](#fixing-bugs-found-by-re-running-effects-in-development) to find bugs caused by missing Effect cleanup.\n- Your components will [re-run ref callbacks an extra time](#fixing-bugs-found-by-re-running-ref-callbacks-in-development) to find bugs caused by missing ref cleanup.\n- Your components will [be checked for usage of deprecated APIs.](#fixing-deprecation-warnings-enabled-by-strict-mode)\n\n**All of these checks are development-only and do", "score": 0.7080847024917603}, {"chunk_id": 2863, "source": "domains/react_docs/data/reference/react/StrictMode.md", "text_preview": "s a problem** (the number of active connections jumps to 2). Strict Mode runs an extra setup+cleanup cycle for every Effect. This Effect has no cleanup logic, so it creates an extra connection but doesn't destroy it. This is a hint that you're missing a cleanup function.\n\nStrict Mode lets you notice such mistakes early in the process. When you fix your Effect by adding a cleanup function in Strict Mode, you *also* fix many possible future production bugs like the select box from before:\n\n<Sandpack>\n\n```js src/index.js\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport './styles.css';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById(\"root\"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n```\n\n```js\nimport { useSta", "score": 0.6999104619026184}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:017:create_root", "timestamp": "2025-12-30T01:11:49.309897Z", "domain": "react_docs", "mode": "docs", "query": "How do I render a React app in the browser with createRoot?", "case": {"id": "create_root", "tags": ["react-dom"], "answerable_from_general_knowledge": false, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To render a React app in the browser using `createRoot`, you can follow these steps as outlined in the official React documentation:\n\n1. **Import React and ReactDOM**: Make sure to import the necessary libraries.\n\n2. **Create a root element**: You need to have a root DOM element in your HTML where your React app will be rendered.\n\n3. **Use `createRoot`**: Call `createRoot` from `react-dom/client` to create a root and then render your React component.\n\nHere\u2019s a basic example:\n\n```javascript\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App'; // Your main App component\n\n// Get the root element from the HTML\nconst rootElement = document.getElementById('root');\n\n// Create a root\nconst root = ReactDOM.createRoot(rootElement);\n\n// Render your app\nroot.render(<App />);\n```\n\nIn this example:\n- `App` is your main React component.\n- The `root` element is where the React app will be mounted.\n\nMake sure your HTML file has a corresponding element with the ID `root`, like this:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>My React App</title>\n</head>\n<body>\n    <div id=\"root\"></div>\n    <script src=\"path/to/your/bundle.js\"></script>\n</body>\n</html>\n```\n\nThis is how you can render a React app in the browser using `createRoot`.", "latency_ms": 6833, "tokens_in": 150, "tokens_out": 340, "cost_estimate_usd": 0.0002265, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To render a React app in the browser using `createRoot`, you need to follow these steps:\n\n1. Import the `createRoot` function from the `react-dom/client` package.\n2. Select a DOM node where you want to render your React app, typically an element with an ID of 'root'.\n3. Call `createRoot` with the selected DOM node to create a root.\n4. Use the `root.render` method to display your React component inside that root.\n\nHere is an example code snippet:\n\n```js\nimport { createRoot } from 'react-dom/client';\nimport App from './App.js'; // Your main app component\n\nconst root = createRoot(document.getElementById('root')); // Select the DOM node\nroot.render(<App />); // Render the App component\n```\n\nThis code will find the `<div id=\"root\"></div>` in your HTML and render the `<App />` component inside it, effectively taking over the management of the DOM within that node [3763][3753].", "latency_ms": 6343, "tokens_in": 1531, "tokens_out": 210, "cost_estimate_usd": 0.00035565, "retrieved_chunks": [{"chunk_id": 3763, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "## Usage {/*usage*/}\n\n### Rendering an app fully built with React {/*rendering-an-app-fully-built-with-react*/}\n\nIf your app is fully built with React, create a single root for your entire app.\n\n```js [[1, 3, \"document.getElementById('root')\"], [2, 4, \"<App />\"]]\nimport { createRoot } from 'react-dom/client';\n\nconst root = createRoot(document.getElementById('root'));\nroot.render(<App />);\n```\n\nUsually, you only need to run this code once at startup. It will:\n\n1. Find the <CodeStep step={1}>browser DOM node</CodeStep> defined in your HTML.\n2. Display the <CodeStep step={2}>React component</CodeStep> for your app inside.\n\n<Sandpack>\n\n```html public/index.html\n<!DOCTYPE html>\n<html>\n  <head><title>My app</title></head>\n  <body>\n    <!-- This is the DOM node -->\n    <div id=\"root\"></div>\n  </b", "score": 0.7334381341934204}, {"chunk_id": 3753, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "---\ntitle: createRoot\n---\n\n<Intro>\n\n`createRoot` lets you create a root to display React components inside a browser DOM node.\n\n```js\nconst root = createRoot(domNode, options?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `createRoot(domNode, options?)` {/*createroot*/}\n\nCall `createRoot` to create a React root for displaying content inside a browser DOM element.\n\n```js\nimport { createRoot } from 'react-dom/client';\n\nconst domNode = document.getElementById('root');\nconst root = createRoot(domNode);\n```\n\nReact will create a root for the `domNode`, and take over managing the DOM inside it. After you've created a root, you need to call [`root.render`](#root-render) to display a React component inside of it:\n\n```js\nroot.render(<App />);\n```\n\nAn app fully built with Reac", "score": 0.7322705984115601}, {"chunk_id": 3754, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "(#root-render) to display a React component inside of it:\n\n```js\nroot.render(<App />);\n```\n\nAn app fully built with React will usually only have one `createRoot` call for its root component. A page that uses \"sprinkles\" of React for parts of the page may have as many separate roots as needed.\n\n[See more examples below.](#usage)\n\n#### Parameters {/*parameters*/}\n\n* `domNode`: A [DOM element.](https://developer.mozilla.org/en-US/docs/Web/API/Element) React will create a root for this DOM element and allow you to call functions on the root, such as `render` to display rendered React content.\n\n* **optional** `options`: An object with options for this React root.\n\n  * **optional** `onCaughtError`: Callback called when React catches an error in an Error Boundary. Called with the `error` caught b", "score": 0.7247488498687744}, {"chunk_id": 3764, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": ">\n<html>\n  <head><title>My app</title></head>\n  <body>\n    <!-- This is the DOM node -->\n    <div id=\"root\"></div>\n  </body>\n</html>\n```\n\n```js src/index.js active\nimport { createRoot } from 'react-dom/client';\nimport App from './App.js';\nimport './styles.css';\n\nconst root = createRoot(document.getElementById('root'));\nroot.render(<App />);\n```\n\n```js src/App.js\nimport { useState } from 'react';\n\nexport default function App() {\n  return (\n    <>\n      <h1>Hello, world!</h1>\n      <Counter />\n    </>\n  );\n}\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  return (\n    <button onClick={() => setCount(count + 1)}>\n      You clicked me {count} times\n    </button>\n  );\n}\n```\n\n</Sandpack>\n\n**If your app is fully built with React, you shouldn't need to create any more roots, or to", "score": 0.6943149566650391}, {"chunk_id": 3757, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "part of the DOM tree that isn't a child of your component (for example, a modal or a tooltip), use [`createPortal`](/reference/react-dom/createPortal) instead of `createRoot`.\n\n---\n\n### `root.render(reactNode)` {/*root-render*/}\n\nCall `root.render` to display a piece of [JSX](/learn/writing-markup-with-jsx) (\"React node\") into the React root's browser DOM node.\n\n```js\nroot.render(<App />);\n```\n\nReact will display `<App />` in the `root`, and take over managing the DOM inside it.\n\n[See more examples below.](#usage)\n\n#### Parameters {/*root-render-parameters*/}\n\n* `reactNode`: A *React node* that you want to display. This will usually be a piece of JSX like `<App />`, but you can also pass a React element constructed with [`createElement()`](/reference/react/createElement), a string, a numb", "score": 0.6919697523117065}, {"chunk_id": 4128, "source": "domains/react_docs/data/reference/react-dom/createPortal.md", "text_preview": "static areas such as sidebars. Compared with having [multiple separate React roots,](/reference/react-dom/client/createRoot#rendering-a-page-partially-built-with-react) portals let you treat the app as a single React tree with shared state even though its parts render to different parts of the DOM.\n\n<Sandpack>\n\n```html public/index.html\n<!DOCTYPE html>\n<html>\n  <head><title>My app</title></head>\n  <body>\n    <h1>Welcome to my hybrid app</h1>\n    <div class=\"parent\">\n      <div class=\"sidebar\">\n        This is server non-React markup\n        <div id=\"sidebar-content\"></div>\n      </div>\n      <div id=\"root\"></div>\n    </div>\n  </body>\n</html>\n```\n\n```js src/index.js\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App.js';\nimport './style", "score": 0.6897797584533691}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:018:server_components_basics", "timestamp": "2025-12-30T01:11:55.877950Z", "domain": "react_docs", "mode": "docs", "query": "At a high level, what are React Server Components?", "case": {"id": "server_components_basics", "tags": ["rsc"], "answerable_from_general_knowledge": false, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Server Components are a feature in React that allows developers to build components that are rendered on the server rather than the client. This approach enables the server to send fully rendered components to the client, which can improve performance and reduce the amount of JavaScript that needs to be sent to the browser.\n\nKey characteristics of React Server Components include:\n\n1. **Server-Side Rendering**: They are rendered on the server, which can lead to faster initial load times and better SEO since the content is available to search engines immediately.\n\n2. **No Client-Side JavaScript**: Server Components do not require any client-side JavaScript to be sent to the browser, which can reduce the bundle size and improve performance.\n\n3. **Data Fetching**: They can fetch data directly on the server, allowing for more efficient data loading strategies.\n\n4. **Seamless Integration**: Server Components can be used alongside traditional client components, allowing developers to choose the best rendering strategy for each part of their application.\n\nOverall, React Server Components aim to enhance the user experience by optimizing rendering and data fetching processes.", "latency_ms": 6558, "tokens_in": 147, "tokens_out": 220, "cost_estimate_usd": 0.00015405, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "React Server Components are a new type of component that renders ahead of time, before bundling, in a separate environment from the client application or server-side rendering (SSR) server. They can run once at build time on a continuous integration (CI) server or for each request using a web server. This architecture allows for a combination of server-centric Multi-Page Apps and client-centric Single-Page Apps, providing a seamless interactivity experience while optimizing data fetching and rendering processes [4375][4383].", "latency_ms": 2874, "tokens_in": 1296, "tokens_out": 101, "cost_estimate_usd": 0.000255, "retrieved_chunks": [{"chunk_id": 4375, "source": "domains/react_docs/data/reference/rsc/server-components.md", "text_preview": "---\ntitle: Server Components\n---\n\n<Intro>\n\nServer Components are a new type of Component that renders ahead of time, before bundling, in an environment separate from your client app or SSR server.\n\n</Intro>\n\nThis separate environment is the \"server\" in React Server Components. Server Components can run once at build time on your CI server, or they can be run for each request using a web server.\n\n<InlineToc />\n\n<Note>\n\n#### How do I build support for Server Components? {/*how-do-i-build-support-for-server-components*/}\n\nWhile React Server Components in React 19 are stable and will not break between minor versions, the underlying APIs used to implement a React Server Components bundler or framework do not follow semver and may break between minors in React 19.x.\n\nTo support React Server Comp", "score": 0.7539323568344116}, {"chunk_id": 4383, "source": "domains/react_docs/data/reference/rsc/server-components.md", "text_preview": "t Components into a bundle. Optionally, that bundle can then be server-side rendered (SSR) to create the initial HTML for the page. When the page loads, the browser does not see the original `Note` and `Author` components; only the rendered output is sent to the client:\n\n```js\n<div>\n  <span>By: The React Team</span>\n  <p>React 19 is...</p>\n</div>\n```\n\nServer Components can be made dynamic by re-fetching them from a server, where they can access the data and render again. This new application architecture combines the simple \u201crequest/response\u201d mental model of server-centric Multi-Page Apps with the seamless interactivity of client-centric Single-Page Apps, giving you the best of both worlds.\n\n### Adding interactivity to Server Components {/*adding-interactivity-to-server-components*/}\n\nServ", "score": 0.7149994373321533}, {"chunk_id": 2757, "source": "domains/react_docs/data/reference/react/index.md", "text_preview": "rs compatible with React Server Components.\n\n## React DOM {/*react-dom*/}\n\nReact DOM contains features that are only supported for web applications (which run in the browser DOM environment). This section is broken into the following:\n\n* [Hooks](/reference/react-dom/hooks) - Hooks for web applications which run in the browser DOM environment.\n* [Components](/reference/react-dom/components) - React supports all of the browser built-in HTML and SVG components.\n* [APIs](/reference/react-dom) - The `react-dom` package contains methods supported only in web applications.\n* [Client APIs](/reference/react-dom/client) - The `react-dom/client` APIs let you render React components on the client (in the browser).\n* [Server APIs](/reference/react-dom/server) - The `react-dom/server` APIs let you rende", "score": 0.683201253414154}, {"chunk_id": 4420, "source": "domains/react_docs/data/reference/rsc/use-client.md", "text_preview": "ilesystem and may experience low latency for data fetches and network requests.\n\n#### Limitations of Server Components {/*limitations*/}\n* Server Components cannot support interaction as event handlers must be registered and triggered by a client.\n\t* For example, event handlers like `onClick` can only be defined in Client Components.\n* Server Components cannot use most Hooks.\n\t* When Server Components are rendered, their output is essentially a list of components for the client to render. Server Components do not persist in memory after render and cannot have their own state.\n\n### Serializable types returned by Server Components {/*serializable-types*/}\n\nAs in any React app, parent components pass data to child components. As they are rendered in different environments, passing data from a", "score": 0.6561225056648254}, {"chunk_id": 4376, "source": "domains/react_docs/data/reference/rsc/server-components.md", "text_preview": "ents bundler or framework do not follow semver and may break between minors in React 19.x.\n\nTo support React Server Components as a bundler or framework, we recommend pinning to a specific React version, or using the Canary release. We will continue working with bundlers and frameworks to stabilize the APIs used to implement React Server Components in the future.\n\n</Note>\n\n### Server Components without a Server {/*server-components-without-a-server*/}\nServer components can run at build time to read from the filesystem or fetch static content, so a web server is not required. For example, you may want to read static data from a content management system.\n\nWithout Server Components, it's common to fetch static data on the client with an Effect:\n```js\n// bundle.js\nimport marked from 'marked';", "score": 0.6409105062484741}, {"chunk_id": 2272, "source": "domains/react_docs/data/learn/your-first-component.md", "text_preview": "he way down {/*components-all-the-way-down*/}\n\nYour React application begins at a \"root\" component. Usually, it is created automatically when you start a new project. For example, if you use [CodeSandbox](https://codesandbox.io/) or if you use the framework [Next.js](https://nextjs.org/), the root component is defined in `pages/index.js`. In these examples, you've been exporting root components.\n\nMost React apps use components all the way down. This means that you won't only use components for reusable pieces like buttons, but also for larger pieces like sidebars, lists, and ultimately, complete pages! Components are a handy way to organize UI code and markup, even if some of them are only used once.\n\n[React-based frameworks](/learn/creating-a-react-app) take this a step further. Instead o", "score": 0.640570878982544}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:019:hydrate_root", "timestamp": "2025-12-30T01:11:59.641633Z", "domain": "react_docs", "mode": "docs", "query": "How do I hydrate a server-rendered React app in React 18+? Show a minimal hydrateRoot example.", "case": {"id": "hydrate_root", "tags": ["react-dom", "ssr"], "answerable_from_general_knowledge": false, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To hydrate a server-rendered React app in React 18 and above, you can use the `hydrateRoot` method from the `react-dom/client` package. This method is used to attach event listeners to the existing server-rendered markup.\n\nHere\u2019s a minimal example of how to use `hydrateRoot`:\n\n```javascript\nimport React from 'react';\nimport { hydrateRoot } from 'react-dom/client';\n\nfunction App() {\n  return <h1>Hello, world!</h1>;\n}\n\n// Assuming you have a root element with id 'root' in your HTML\nconst container = document.getElementById('root');\n\n// Hydrate the server-rendered content\nhydrateRoot(container, <App />);\n```\n\nIn this example, `hydrateRoot` takes two arguments: the container where the server-rendered content is located and the React element that you want to render. This will hydrate the existing HTML and make it interactive without re-rendering the entire content. \n\nMake sure that your server-rendered HTML matches the structure of the React components to avoid any discrepancies during hydration.", "latency_ms": 3727, "tokens_in": 159, "tokens_out": 216, "cost_estimate_usd": 0.00015344999999999996, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "To hydrate a server-rendered React app in React 18+, you can use the `hydrateRoot` function from the `react-dom/client` package. Here is a minimal example:\n\n```js\nimport { hydrateRoot } from 'react-dom/client';\nimport App from './App.js';\n\nhydrateRoot(\n  document.getElementById('root'),\n  <App />\n);\n```\n\nIn this example, `document.getElementById('root')` selects the DOM node where the server-rendered HTML is located, and `<App />` is the React component that will be hydrated into that existing HTML [3783][3792].", "latency_ms": 3371, "tokens_in": 1474, "tokens_out": 128, "cost_estimate_usd": 0.00029790000000000003, "retrieved_chunks": [{"chunk_id": 3783, "source": "domains/react_docs/data/reference/react-dom/client/hydrateRoot.md", "text_preview": "---\ntitle: hydrateRoot\n---\n\n<Intro>\n\n`hydrateRoot` lets you display React components inside a browser DOM node whose HTML content was previously generated by [`react-dom/server`.](/reference/react-dom/server)\n\n```js\nconst root = hydrateRoot(domNode, reactNode, options?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `hydrateRoot(domNode, reactNode, options?)` {/*hydrateroot*/}\n\nCall `hydrateRoot` to \u201cattach\u201d React to existing HTML that was already rendered by React in a server environment.\n\n```js\nimport { hydrateRoot } from 'react-dom/client';\n\nconst domNode = document.getElementById('root');\nconst root = hydrateRoot(domNode, reactNode);\n```\n\nReact will attach to the HTML that exists inside the `domNode`, and take over managing the DOM inside it. An app fully built wi", "score": 0.7531081438064575}, {"chunk_id": 3791, "source": "domains/react_docs/data/reference/react-dom/client/hydrateRoot.md", "text_preview": "ot. Attempting to call `root.render` on an unmounted root will throw a \"Cannot update an unmounted root\" error.\n\n---\n\n## Usage {/*usage*/}\n\n### Hydrating server-rendered HTML {/*hydrating-server-rendered-html*/}\n\nIf your app's HTML was generated by [`react-dom/server`](/reference/react-dom/client/createRoot), you need to *hydrate* it on the client.\n\n```js [[1, 3, \"document.getElementById('root')\"], [2, 3, \"<App />\"]]\nimport { hydrateRoot } from 'react-dom/client';\n\nhydrateRoot(document.getElementById('root'), <App />);\n```\n\nThis will hydrate the server HTML inside the <CodeStep step={1}>browser DOM node</CodeStep> with the <CodeStep step={2}>React component</CodeStep> for your app. Usually, you will do it once at startup. If you use a framework, it might do this behind the scenes for you.", "score": 0.7199370861053467}, {"chunk_id": 3793, "source": "domains/react_docs/data/reference/react-dom/client/hydrateRoot.md", "text_preview": "ient';\nimport App from './App.js';\n\nhydrateRoot(\n  document.getElementById('root'),\n  <App />\n);\n```\n\n```js src/App.js\nimport { useState } from 'react';\n\nexport default function App() {\n  return (\n    <>\n      <h1>Hello, world!</h1>\n      <Counter />\n    </>\n  );\n}\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  return (\n    <button onClick={() => setCount(count + 1)}>\n      You clicked me {count} times\n    </button>\n  );\n}\n```\n\n</Sandpack>\n\nYou shouldn't need to call `hydrateRoot` again or to call it in more places. From this point on, React will be managing the DOM of your application. To update the UI, your components will [use state](/reference/react/useState) instead.\n\n<Pitfall>\n\nThe React tree you pass to `hydrateRoot` needs to produce **the same output** as it did o", "score": 0.7141345739364624}, {"chunk_id": 3794, "source": "domains/react_docs/data/reference/react-dom/client/hydrateRoot.md", "text_preview": "useState) instead.\n\n<Pitfall>\n\nThe React tree you pass to `hydrateRoot` needs to produce **the same output** as it did on the server.\n\nThis is important for the user experience. The user will spend some time looking at the server-generated HTML before your JavaScript code loads. Server rendering creates an illusion that the app loads faster by showing the HTML snapshot of its output. Suddenly showing different content breaks that illusion. This is why the server render output must match the initial render output on the client.\n\nThe most common causes leading to hydration errors include:\n\n* Extra whitespace (like newlines) around the React-generated HTML inside the root node.\n* Using checks like `typeof window !== 'undefined'` in your rendering logic.\n* Using browser-only APIs like [`window", "score": 0.7119752168655396}, {"chunk_id": 3792, "source": "domains/react_docs/data/reference/react-dom/client/hydrateRoot.md", "text_preview": "your app. Usually, you will do it once at startup. If you use a framework, it might do this behind the scenes for you.\n\nTo hydrate your app, React will \"attach\" your components' logic to the initial generated HTML from the server. Hydration turns the initial HTML snapshot from the server into a fully interactive app that runs in the browser.\n\n<Sandpack>\n\n```html public/index.html\n<!--\n  HTML content inside <div id=\"root\">...</div>\n  was generated from App by react-dom/server.\n-->\n<div id=\"root\"><h1>Hello, world!</h1><button>You clicked me <!-- -->0<!-- --> times</button></div>\n```\n\n```js src/index.js active\nimport './styles.css';\nimport { hydrateRoot } from 'react-dom/client';\nimport App from './App.js';\n\nhydrateRoot(\n  document.getElementById('root'),\n  <App />\n);\n```\n\n```js src/App.js\ni", "score": 0.7092323899269104}, {"chunk_id": 3782, "source": "domains/react_docs/data/reference/react-dom/client/createRoot.md", "text_preview": "## My server-rendered HTML gets re-created from scratch {/*my-server-rendered-html-gets-re-created-from-scratch*/}\n\nIf your app is server-rendered and includes the initial HTML generated by React, you might notice that creating a root and calling `root.render` deletes all that HTML, and then re-creates all the DOM nodes from scratch. This can be slower, resets focus and scroll positions, and may lose other user input.\n\nServer-rendered apps must use [`hydrateRoot`](/reference/react-dom/client/hydrateRoot) instead of `createRoot`:\n\n```js {1,4-7}\nimport { hydrateRoot } from 'react-dom/client';\nimport App from './App.js';\n\nhydrateRoot(\n  document.getElementById('root'),\n  <App />\n);\n```\n\nNote that its API is different. In particular, usually there will be no further `root.render` call.", "score": 0.6979715824127197}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "rag", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:020:use_id_not_for_keys", "timestamp": "2025-12-30T01:12:04.946362Z", "domain": "react_docs", "mode": "docs", "query": "What is useId used for, and what should you not use it for?", "case": {"id": "use_id_not_for_keys", "tags": ["hooks", "edge_case"], "answerable_from_general_knowledge": false, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "The `useId` hook in React is used to generate unique IDs that can be used for accessibility purposes, such as associating labels with form elements. It helps ensure that IDs are unique across the application, which is particularly important when rendering components conditionally or in lists.\n\nAccording to the official React documentation, you should **not** use `useId` for generating IDs that need to be stable across server and client renders. This means that you should avoid using `useId` for IDs that are critical for the application\u2019s functionality or that need to be consistent between server-side rendering and client-side rendering.\n\nIn summary, `useId` is useful for generating unique IDs for accessibility, but it should not be used for IDs that require stability across different renders.", "latency_ms": 2815, "tokens_in": 152, "tokens_out": 153, "cost_estimate_usd": 0.0001146, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "`useId` is a React Hook used for generating unique IDs that can be passed to accessibility attributes. It ensures that the generated IDs are unique within the component, which is particularly useful for elements that require accessibility features, such as labels and inputs [3237][3241].\n\nHowever, you should not use `useId` to generate keys in a list. Keys should be generated from your data instead [3238][3243]. Additionally, `useId` cannot be used in async Server Components [3238].", "latency_ms": 5287, "tokens_in": 1457, "tokens_out": 105, "cost_estimate_usd": 0.00028155, "retrieved_chunks": [{"chunk_id": 3237, "source": "domains/react_docs/data/reference/react/useId.md", "text_preview": "---\ntitle: useId\n---\n\n<Intro>\n\n`useId` is a React Hook for generating unique IDs that can be passed to accessibility attributes.\n\n```js\nconst id = useId()\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useId()` {/*useid*/}\n\nCall `useId` at the top level of your component to generate a unique ID:\n\n```js\nimport { useId } from 'react';\n\nfunction PasswordField() {\n  const passwordHintId = useId();\n  // ...\n```\n\n[See more examples below.](#usage)\n\n#### Parameters {/*parameters*/}\n\n`useId` does not take any parameters.\n\n#### Returns {/*returns*/}\n\n`useId` returns a unique ID string associated with this particular `useId` call in this particular component.\n\n#### Caveats {/*caveats*/}\n\n* `useId` is a Hook, so you can only call it **at the top level of your component** or you", "score": 0.5822264552116394}, {"chunk_id": 3238, "source": "domains/react_docs/data/reference/react/useId.md", "text_preview": "#### Caveats {/*caveats*/}\n\n* `useId` is a Hook, so you can only call it **at the top level of your component** or your own Hooks. You can't call it inside loops or conditions. If you need that, extract a new component and move the state into it.\n\n* `useId` **should not be used to generate keys** in a list. [Keys should be generated from your data.](/learn/rendering-lists#where-to-get-your-key)\n\n* `useId` currently cannot be used in [async Server Components](/reference/rsc/server-components#async-components-with-server-components).\n\n---\n\n## Usage {/*usage*/}\n\n<Pitfall>\n\n**Do not call `useId` to generate keys in a list.** [Keys should be generated from your data.](/learn/rendering-lists#where-to-get-your-key)\n\n</Pitfall>\n\n### Generating unique IDs for accessibility attributes {/*generatin", "score": 0.5695958137512207}, {"chunk_id": 3243, "source": "domains/react_docs/data/reference/react/useId.md", "text_preview": "the difference in the user experience with assistive technologies.\n\n<Pitfall>\n\nWith [server rendering](/reference/react-dom/server), **`useId` requires an identical component tree on the server and the client**. If the trees you render on the server and the client don't match exactly, the generated IDs won't match.\n\n</Pitfall>\n\n<DeepDive>\n\n#### Why is useId better than an incrementing counter? {/*why-is-useid-better-than-an-incrementing-counter*/}\n\nYou might be wondering why `useId` is better than incrementing a global variable like `nextId++`.\n\nThe primary benefit of `useId` is that React ensures that it works with [server rendering.](/reference/react-dom/server) During server rendering, your components generate HTML output. Later, on the client, [hydration](/reference/react-dom/client/hy", "score": 0.5096055865287781}, {"chunk_id": 3241, "source": "domains/react_docs/data/reference/react/useId.md", "text_preview": "s is not a good practice in React. A component may be rendered more than once on the page--but IDs have to be unique! Instead of hardcoding an ID, generate a unique ID with `useId`:\n\n```js {4,11,14}\nimport { useId } from 'react';\n\nfunction PasswordField() {\n  const passwordHintId = useId();\n  return (\n    <>\n      <label>\n        Password:\n        <input\n          type=\"password\"\n          aria-describedby={passwordHintId}\n        />\n      </label>\n      <p id={passwordHintId}>\n        The password should contain at least 18 characters\n      </p>\n    </>\n  );\n}\n```\n\nNow, even if `PasswordField` appears multiple times on the screen, the generated IDs won't clash.\n\n<Sandpack>\n\n```js\nimport { useId } from 'react';\n\nfunction PasswordField() {\n  const passwordHintId = useId();\n  return (\n    <>", "score": 0.4496939182281494}, {"chunk_id": 3244, "source": "domains/react_docs/data/reference/react/useId.md", "text_preview": "server rendering, your components generate HTML output. Later, on the client, [hydration](/reference/react-dom/client/hydrateRoot) attaches your event handlers to the generated HTML. For hydration to work, the client output must match the server HTML.\n\nThis is very difficult to guarantee with an incrementing counter because the order in which the Client Components are hydrated may not match the order in which the server HTML was emitted. By calling `useId`, you ensure that hydration will work, and the output will match between the server and the client.\n\nInside React, `useId` is generated from the \"parent path\" of the calling component. This is why, if the client and the server tree are the same, the \"parent path\" will match up regardless of rendering order.\n\n</DeepDive>\n\n---\n\n### Generati", "score": 0.43652045726776123}, {"chunk_id": 3239, "source": "domains/react_docs/data/reference/react/useId.md", "text_preview": "/rendering-lists#where-to-get-your-key)\n\n</Pitfall>\n\n### Generating unique IDs for accessibility attributes {/*generating-unique-ids-for-accessibility-attributes*/}\n\nCall `useId` at the top level of your component to generate a unique ID:\n\n```js [[1, 4, \"passwordHintId\"]]\nimport { useId } from 'react';\n\nfunction PasswordField() {\n  const passwordHintId = useId();\n  // ...\n```\n\nYou can then pass the <CodeStep step={1}>generated ID</CodeStep> to different attributes:\n\n```js [[1, 2, \"passwordHintId\"], [1, 3, \"passwordHintId\"]]\n<>\n  <input type=\"password\" aria-describedby={passwordHintId} />\n  <p id={passwordHintId}>\n</>\n```\n\n**Let's walk through an example to see when this is useful.**\n\n[HTML accessibility attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA) like [`ari", "score": 0.43427714705467224}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 0.5, "expect_details": {"missing": ["not for keys | don't use it for keys | shouldn't be used for keys | not be used for keys"]}, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 0.5, "expect_details": {"missing": ["not for keys | don't use it for keys | shouldn't be used for keys | not be used for keys"]}, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:021:use_insertion_effect", "timestamp": "2025-12-30T01:12:09.677256Z", "domain": "react_docs", "mode": "docs", "query": "What is useInsertionEffect for, and when would you use it instead of useEffect?", "case": {"id": "use_insertion_effect", "tags": ["hooks", "edge_case"], "answerable_from_general_knowledge": false, "requires_docs": true, "expected_abstain_in_docs": null}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "`useInsertionEffect` is a hook introduced in React 18 that is specifically designed for scenarios where you need to insert styles or perform operations that should happen before the browser paints. It runs synchronously before the DOM is updated, which allows you to make changes that need to be reflected immediately in the layout.\n\nYou would use `useInsertionEffect` instead of `useEffect` in cases where you need to ensure that certain operations, such as injecting CSS styles or making DOM manipulations that affect layout, occur before the browser has a chance to paint. This can help prevent flickering or layout shifts that might occur if those operations were performed in `useEffect`, which runs after the paint.\n\nIn summary, use `useInsertionEffect` for operations that need to happen before the browser renders, while `useEffect` is suitable for side effects that can occur after the render phase.", "latency_ms": 4035, "tokens_in": 154, "tokens_out": 177, "cost_estimate_usd": 0.0001293, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "`useInsertionEffect` is specifically designed for authors of CSS-in-JS libraries. It allows for the insertion of elements into the DOM before any layout effects fire, ensuring that styles are applied before other effects that may depend on layout calculations. This is particularly useful when you need to inject dynamic styles directly into the DOM, as it guarantees that the styles are in place before any layout effects run, which can prevent issues with outdated styles affecting layout calculations [3263][3271].\n\nIn contrast, you would use `useEffect` or `useLayoutEffect` for general side effects in your components. `useEffect` runs after the render is committed to the screen, while `useLayoutEffect` runs synchronously after all DOM mutations but before the browser has a chance to paint. Therefore, if you are not working on a CSS-in-JS library and do not need to inject styles, you would typically opt for `useEffect` or `useLayoutEffect` instead [3263][2752].", "latency_ms": 4716, "tokens_in": 1355, "tokens_out": 202, "cost_estimate_usd": 0.00032445, "retrieved_chunks": [{"chunk_id": 3263, "source": "domains/react_docs/data/reference/react/useInsertionEffect.md", "text_preview": "---\ntitle: useInsertionEffect\n---\n\n<Pitfall>\n\n`useInsertionEffect` is for CSS-in-JS library authors. Unless you are working on a CSS-in-JS library and need a place to inject the styles, you probably want [`useEffect`](/reference/react/useEffect) or [`useLayoutEffect`](/reference/react/useLayoutEffect) instead.\n\n</Pitfall>\n\n<Intro>\n\n`useInsertionEffect` allows inserting elements into the DOM before any layout Effects fire.\n\n```js\nuseInsertionEffect(setup, dependencies?)\n```\n\n</Intro>\n\n<InlineToc />\n\n---\n\n## Reference {/*reference*/}\n\n### `useInsertionEffect(setup, dependencies?)` {/*useinsertioneffect*/}\n\nCall `useInsertionEffect` to insert styles before any Effects fire that may need to read layout:\n\n```js\nimport { useInsertionEffect } from 'react';\n\n// Inside your CSS-in-JS library\nfuncti", "score": 0.6964534521102905}, {"chunk_id": 3266, "source": "domains/react_docs/data/reference/react/useInsertionEffect.md", "text_preview": "he [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) comparison algorithm. If you don't specify the dependencies at all, your Effect will re-run after every re-render of the component.\n\n#### Returns {/*returns*/}\n\n`useInsertionEffect` returns `undefined`.\n\n#### Caveats {/*caveats*/}\n\n* Effects only run on the client. They don't run during server rendering.\n* You can't update state from inside `useInsertionEffect`.\n* By the time `useInsertionEffect` runs, refs are not attached yet.\n* `useInsertionEffect` may run either before or after the DOM has been updated. You shouldn't rely on the DOM being updated at any particular time.\n* Unlike other types of Effects, which fire cleanup for every Effect and then setup for every Effect, `useInse", "score": 0.6164100170135498}, {"chunk_id": 3267, "source": "domains/react_docs/data/reference/react/useInsertionEffect.md", "text_preview": "lar time.\n* Unlike other types of Effects, which fire cleanup for every Effect and then setup for every Effect, `useInsertionEffect` will fire both cleanup and setup one component at a time. This results in an \"interleaving\" of the cleanup and setup functions.\n---\n\n## Usage {/*usage*/}\n\n### Injecting dynamic styles from CSS-in-JS libraries {/*injecting-dynamic-styles-from-css-in-js-libraries*/}\n\nTraditionally, you would style React components using plain CSS.\n\n```js\n// In your JS file:\n<button className=\"success\" />\n\n// In your CSS file:\n.success { color: green; }\n```\n\nSome teams prefer to author styles directly in JavaScript code instead of writing CSS files. This usually requires using a CSS-in-JS library or a tool. There are three common approaches to CSS-in-JS:\n\n1. Static extraction to", "score": 0.6096876859664917}, {"chunk_id": 3271, "source": "domains/react_docs/data/reference/react/useInsertionEffect.md", "text_preview": "ing-rendering-or-uselayouteffect*/}\n\nIf you insert styles during rendering and React is processing a [non-blocking update,](/reference/react/useTransition#perform-non-blocking-updates-with-actions) the browser will recalculate the styles every single frame while rendering a component tree, which can be **extremely slow.**\n\n`useInsertionEffect` is better than inserting styles during [`useLayoutEffect`](/reference/react/useLayoutEffect) or [`useEffect`](/reference/react/useEffect) because it ensures that by the time other Effects run in your components, the `<style>` tags have already been inserted. Otherwise, layout calculations in regular Effects would be wrong due to outdated styles.\n\n</DeepDive>", "score": 0.6079525947570801}, {"chunk_id": 2752, "source": "domains/react_docs/data/reference/react/hooks.md", "text_preview": "// ...\n```\n\nEffects are an \"escape hatch\" from the React paradigm. Don't use Effects to orchestrate the data flow of your application. If you're not interacting with an external system, [you might not need an Effect.](/learn/you-might-not-need-an-effect)\n\nThere are two rarely used variations of `useEffect` with differences in timing:\n\n* [`useLayoutEffect`](/reference/react/useLayoutEffect) fires before the browser repaints the screen. You can measure layout here.\n* [`useInsertionEffect`](/reference/react/useInsertionEffect) fires before React makes changes to the DOM. Libraries can insert dynamic CSS here.\n\n---\n\n## Performance Hooks {/*performance-hooks*/}\n\nA common way to optimize re-rendering performance is to skip unnecessary work. For example, you can tell React to reuse a cached calc", "score": 0.5984728336334229}, {"chunk_id": 3269, "source": "domains/react_docs/data/reference/react/useInsertionEffect.md", "text_preview": "sertionEffect` helps you solve the second problem.\n\nCall `useInsertionEffect` to insert the styles before any layout Effects fire:\n\n```js {4-11}\n// Inside your CSS-in-JS library\nlet isInserted = new Set();\nfunction useCSS(rule) {\n  useInsertionEffect(() => {\n    // As explained earlier, we don't recommend runtime injection of <style> tags.\n    // But if you have to do it, then it's important to do in useInsertionEffect.\n    if (!isInserted.has(rule)) {\n      isInserted.add(rule);\n      document.head.appendChild(getStyleForRule(rule));\n    }\n  });\n  return rule;\n}\n\nfunction Button() {\n  const className = useCSS('...');\n  return <div className={className} />;\n}\n```\n\nSimilarly to `useEffect`, `useInsertionEffect` does not run on the server. If you need to collect which CSS rules have been use", "score": 0.5957209467887878}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": false, "abstention_expected": false, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:022:trap_builtin_routing", "timestamp": "2025-12-30T01:12:12.084908Z", "domain": "react_docs", "mode": "docs", "query": "Does React include routing out of the box? Answer only if the docs explicitly say so.", "case": {"id": "trap_builtin_routing", "tags": ["trap", "edge_case", "unsupported_claim"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": true}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "The official React documentation does not state that routing is included out of the box. React itself is a library for building user interfaces and does not include routing functionality by default. For routing in React applications, you typically use a third-party library such as React Router.", "latency_ms": 1543, "tokens_in": 154, "tokens_out": 52, "cost_estimate_usd": 5.43e-05, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "The React documentation does not state that routing is included out of the box. Instead, it mentions that you need to set up a router to map URLs to different parts of your app, and suggests using React Router as a popular routing library for React applications [210][344].", "latency_ms": 2392, "tokens_in": 1350, "tokens_out": 55, "cost_estimate_usd": 0.00023550000000000003, "retrieved_chunks": [{"chunk_id": 210, "source": "domains/react_docs/data/learn/build-a-react-app-from-scratch.md", "text_preview": "idely used as a starting point, but feel free to choose other tools if those work better for you.\n\n### Routing {/*routing*/}\n\nRouting determines what content or pages to display when a user visits a particular URL. You need to set up a router to map URLs to different parts of your app. You'll also need to handle nested routes, route parameters, and query parameters.  Routers can be configured within your code, or defined based on your component folder and file structures.\n\nRouters are a core part of modern applications, and are usually integrated with data fetching (including prefetching data for a whole page for faster loading), code splitting (to minimize client bundle sizes), and page rendering approaches (to decide how each page gets generated).\n\nWe suggest using:\n\n- [React Router](htt", "score": 0.5936207175254822}, {"chunk_id": 344, "source": "domains/react_docs/data/learn/creating-a-react-app.md", "text_preview": "js or Docker containers, or to your own server. Next.js also supports [static export](https://nextjs.org/docs/app/building-your-application/deploying/static-exports) which doesn't require a server.\n\n### React Router (v7) {/*react-router-v7*/}\n\n**[React Router](https://reactrouter.com/start/framework/installation) is the most popular routing library for React and can be paired with Vite to create a full-stack React framework**. It emphasizes standard Web APIs and has several [ready to deploy templates](https://github.com/remix-run/react-router-templates) for various JavaScript runtimes and platforms.\n\nTo create a new React Router framework project, run:\n\n<TerminalBlock>\nnpx create-react-router@latest\n</TerminalBlock>\n\nReact Router is maintained by [Shopify](https://www.shopify.com).\n\n### Ex", "score": 0.5467103123664856}, {"chunk_id": 2756, "source": "domains/react_docs/data/reference/react/index.md", "text_preview": "---\ntitle: React Reference Overview\n---\n\n<Intro>\n\nThis section provides detailed reference documentation for working with React. For an introduction to React, please visit the [Learn](/learn) section.\n\n</Intro>\n\nThe React reference documentation is broken down into functional subsections:\n\n## React {/*react*/}\n\nProgrammatic React features:\n\n* [Hooks](/reference/react/hooks) - Use different React features from your components.\n* [Components](/reference/react/components) - Built-in components that you can use in your JSX.\n* [APIs](/reference/react/apis) - APIs that are useful for defining components.\n* [Directives](/reference/rsc/directives) - Provide instructions to bundlers compatible with React Server Components.\n\n## React DOM {/*react-dom*/}\n\nReact DOM contains features that are only sup", "score": 0.5209454894065857}, {"chunk_id": 343, "source": "domains/react_docs/data/learn/creating-a-react-app.md", "text_preview": "-only app, and if your needs change later, you can opt-in to using server features on individual routes without rewriting your app. See your framework's documentation for configuring the rendering strategy.\n\n</Note>\n\n### Next.js (App Router) {/*nextjs-app-router*/}\n\n**[Next.js's App Router](https://nextjs.org/docs) is a React framework that takes full advantage of React's architecture to enable full-stack React apps.**\n\n<TerminalBlock>\nnpx create-next-app@latest\n</TerminalBlock>\n\nNext.js is maintained by [Vercel](https://vercel.com/). You can [deploy a Next.js app](https://nextjs.org/docs/app/building-your-application/deploying) to any hosting provider that supports Node.js or Docker containers, or to your own server. Next.js also supports [static export](https://nextjs.org/docs/app/buildi", "score": 0.5109188556671143}, {"chunk_id": 3186, "source": "domains/react_docs/data/reference/react/useEffect.md", "text_preview": "ides is not specific to React. It applies to fetching data on mount with any library. Like with routing, data fetching is not trivial to do well, so we recommend the following approaches:\n\n- **If you use a [framework](/learn/creating-a-react-app#full-stack-frameworks), use its built-in data fetching mechanism.** Modern React frameworks have integrated data fetching mechanisms that are efficient and don't suffer from the above pitfalls.\n- **Otherwise, consider using or building a client-side cache.** Popular open source solutions include [TanStack Query](https://tanstack.com/query/latest/), [useSWR](https://swr.vercel.app/), and [React Router 6.4+.](https://beta.reactrouter.com/en/main/start/overview) You can build your own solution too, in which case you would use Effects under the hood bu", "score": 0.5060269236564636}, {"chunk_id": 347, "source": "domains/react_docs/data/learn/creating-a-react-app.md", "text_preview": "sy to build full-stack web applications.\n\n<DeepDive>\n\n#### Which features make up the React team\u2019s full-stack architecture vision? {/*which-features-make-up-the-react-teams-full-stack-architecture-vision*/}\n\nNext.js's App Router bundler fully implements the official [React Server Components specification](https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md). This lets you mix build-time, server-only, and interactive components in a single React tree.\n\nFor example, you can write a server-only React component as an `async` function that reads from a database or from a file. Then you can pass data down from it to your interactive components:\n\n```js\n// This component runs *only* on the server (or during the build).\nasync function Talks({ confId }) {\n  // 1. You're on the s", "score": 0.5036554932594299}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 0.5, "penalty_total": 0.5, "rule_breakdown": [{"rule": "prompt_docs_evidence_check", "penalty": 0.5, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "note": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}], "expect_score": 0.0, "expect_details": {"missing": ["IDK_EXPECTED"]}, "abstained": false, "abstention_expected": true, "abstention_correct": false, "abstention_score": 0.0, "hallucination_flags": [], "grounding_flags": ["PROMPT_NO_EVIDENCE_IN_DOCS"], "notes": "Docs-grounded mode: prompt-only has no retrieved evidence; treat non-abstaining answers as ungrounded."}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 0.0, "expect_details": {"missing": ["IDK_EXPECTED"]}, "abstained": false, "abstention_expected": true, "abstention_correct": false, "abstention_score": 0.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": "rag", "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
{"run_id": "regression:react_docs_mvp_v1:20251230T011004Z:023:trap_deno", "timestamp": "2025-12-30T01:12:12.768784Z", "domain": "react_docs", "mode": "docs", "query": "Can React run on Deno? Answer only if the docs explicitly say so.", "case": {"id": "trap_deno", "tags": ["trap", "edge_case", "unsupported_claim"], "answerable_from_general_knowledge": true, "requires_docs": false, "expected_abstain_in_docs": true}, "scoring": null, "results": {"prompt": {"pipeline": "prompt", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "I don't know.", "latency_ms": 469, "tokens_in": 152, "tokens_out": 4, "cost_estimate_usd": 2.5200000000000003e-05, "retrieved_chunks": null, "flags": {}, "error": null}, "rag": {"pipeline": "rag", "model": "gpt-4o-mini", "generation_config": {"temperature": 0.2, "top_p": 1.0, "max_tokens": 800}, "answer": "I don't know.", "latency_ms": 671, "tokens_in": 1199, "tokens_out": 4, "cost_estimate_usd": 0.00018224999999999998, "retrieved_chunks": [{"chunk_id": 2757, "source": "domains/react_docs/data/reference/react/index.md", "text_preview": "rs compatible with React Server Components.\n\n## React DOM {/*react-dom*/}\n\nReact DOM contains features that are only supported for web applications (which run in the browser DOM environment). This section is broken into the following:\n\n* [Hooks](/reference/react-dom/hooks) - Hooks for web applications which run in the browser DOM environment.\n* [Components](/reference/react-dom/components) - React supports all of the browser built-in HTML and SVG components.\n* [APIs](/reference/react-dom) - The `react-dom` package contains methods supported only in web applications.\n* [Client APIs](/reference/react-dom/client) - The `react-dom/client` APIs let you render React components on the client (in the browser).\n* [Server APIs](/reference/react-dom/server) - The `react-dom/server` APIs let you rende", "score": 0.5268775224685669}, {"chunk_id": 4527, "source": "domains/react_docs/data/versions.md", "text_preview": "uild React?](https://legacy.reactjs.org/blog/2013/06/05/why-react.html)\n\nReact was open sourced at Facebook Seattle in 2013:\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/XxVg_s8xAms?si=466vSJrnXTn05j9A\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>", "score": 0.5180425047874451}, {"chunk_id": 159, "source": "domains/react_docs/data/learn/add-react-to-an-existing-project.md", "text_preview": "erence/Statements/export) syntax, and use packages (for example, React) from the [npm](https://www.npmjs.com/) package registry.\n2. **Render your React components** where you want to see them on the page.\n\nThe exact approach depends on your existing page setup, so let's walk through some details.\n\n### Step 1: Set up a modular JavaScript environment {/*step-1-set-up-a-modular-javascript-environment*/}\n\nA modular JavaScript environment lets you write your React components in individual files, as opposed to writing all of your code in a single file. It also lets you use all the wonderful packages published by other developers on the [npm](https://www.npmjs.com/) registry--including React itself! How you do this depends on your existing setup:\n\n* **If your app is already split into files that", "score": 0.5124038457870483}, {"chunk_id": 3752, "source": "domains/react_docs/data/reference/react-compiler/target.md", "text_preview": ", `react-compiler-runtime` standalone package for 17/18):\n\n```js\n// For React 19 (built-in runtime)\nimport { c } from 'react/compiler-runtime'\n//                      ^\n\n// For React 17/18 (polyfill runtime)\nimport { c } from 'react-compiler-runtime'\n//                      ^\n```", "score": 0.5017256140708923}, {"chunk_id": 4536, "source": "domains/react_docs/data/warnings/invalid-hook-call-warning.md", "text_preview": "// Add this in your component file\nrequire('react-dom');\nwindow.React2 = require('react');\nconsole.log(window.React1 === window.React2);\n```\n\nIf it prints `false` then you might have two Reacts and need to figure out why that happened. [This issue](https://github.com/facebook/react/issues/13991) includes some common reasons encountered by the community.\n\nThis problem can also come up when you use `npm link` or an equivalent. In that case, your bundler might \"see\" two Reacts \u2014 one in application folder and one in your library folder. Assuming `myapp` and `mylib` are sibling folders, one possible fix is to run `npm link ../myapp/node_modules/react` from `mylib`. This should make the library use the application's React copy.\n\n<Note>\n\nIn general, React supports using multiple independent cop", "score": 0.4931781589984894}, {"chunk_id": 346, "source": "domains/react_docs/data/learn/creating-a-react-app.md", "text_preview": "o is free, and you can submit them to the Google and Apple app stores without restrictions. Expo additionally provides opt-in paid cloud services.\n\n\n## Other frameworks {/*other-frameworks*/}\n\nThere are other up-and-coming frameworks that are working towards our full stack React vision:\n\n- [TanStack Start (Beta)](https://tanstack.com/start/): TanStack Start is a full-stack React framework powered by TanStack Router. It provides a full-document SSR, streaming, server functions, bundling, and more using tools like Nitro and Vite.\n- [RedwoodSDK](https://rwsdk.com/): Redwood is a full stack React framework with lots of pre-installed packages and configuration that makes it easy to build full-stack web applications.\n\n<DeepDive>\n\n#### Which features make up the React team\u2019s full-stack architectu", "score": 0.4929940104484558}], "flags": {}, "error": null}}, "evaluations": {"prompt": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": true, "abstention_expected": true, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}, "rag": {"quality_score": 1.0, "penalty_total": 0.0, "rule_breakdown": [], "expect_score": 1.0, "expect_details": null, "abstained": true, "abstention_expected": true, "abstention_correct": true, "abstention_score": 1.0, "hallucination_flags": [], "grounding_flags": [], "notes": null}}, "summary_metrics": {"winner_by_quality": null, "winner_by_quality_ties": ["prompt", "rag"], "winner_by_latency": "prompt", "winner_by_cost": "prompt", "tradeoff_summary": "Compare quality vs latency vs cost; prefer grounded answers when needed.", "winner_by_expect": null, "winner_by_expect_ties": ["prompt", "rag"]}, "judge": null, "proxies": null}
